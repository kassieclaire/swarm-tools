{"id":"bd-lf2p4u-mja7tjentkc","title":"PGLite corruption from concurrent swarm agent access","description":"## What Happened\n\nDuring a swarm with 3+ workers, PGLite database got corrupted. All subsequent beads_* tool calls failed with:\n```\nRuntimeError: Aborted(). Build with -sASSERTIONS for more info.\n```\n\nRequired nuking `.opencode/streams/` directory and restarting OpenCode.\n\n## Root Cause\n\nMultiple concurrent agents (coordinator + workers) all trying to initialize PGLite at the same database path. PGLite's WASM runtime doesn't handle this gracefully.\n\nThe `pendingInstances` Map was supposed to prevent duplicate initialization, but:\n1. Each agent runs in a separate Task subagent\n2. They don't share the in-memory `instances` Map\n3. Multiple WASM instances fighting over same files = corruption\n\n## Impact\n\n- Lost all beads filed during the session\n- Lost swarm coordination state (reservations, messages)\n- Required manual intervention (nuke DB + restart)\n- Swarm completely stalled\n\n## Potential Fixes\n\n1. **Single shared connection** - All agents use same PGLite instance (requires IPC)\n2. **File locking** - Use proper file locks before PGLite init\n3. **Switch to SQLite** - Better concurrent access support with WAL mode\n4. **Detect and recover** - On WASM abort, nuke and recreate DB automatically\n5. **Health check tool** - `swarm_health` to detect corruption before it cascades\n\n## Reproduction\n\n1. Start a swarm with 3+ parallel workers\n2. All workers call swarmmail_init simultaneously\n3. Database corruption occurs\n4. All subsequent beads_* calls fail","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-17T16:17:51.743Z","updated_at":"2025-12-17T16:17:51.743Z"}
{"id":"bd-lf2p4u-mja89hxs119","title":"Implement PGLite leader election pattern for multi-agent swarm access","description":"## The Problem\n\nMultiple swarm agents (coordinator + workers) all try to initialize PGLite at the same database path. PGLite doesn't handle concurrent access - it's designed for single-process use. This causes WASM corruption.\n\n## The Solution: PGLite's Built-in Leader Election\n\nPGLite has a `PGliteWorker` pattern specifically for this! From their docs:\n\n\u003e \"Internally, this starts a worker for each tab, but then runs an election to nominate one as the leader. Only the leader then starts PGlite by calling the init function, and handles all queries.\"\n\n### Implementation Plan\n\n**Option A: Adapt PGliteWorker for Node.js**\n\nThe `PGliteWorker` is designed for browser tabs, but the pattern works for Node:\n1. One \"leader\" process owns the PGLite instance\n2. Other processes communicate via IPC (Unix socket or similar)\n3. Leader election when leader dies\n\n**Option B: File-based Locking + Single Instance**\n\nSimpler approach:\n1. Use file lock (flock) before PGLite init\n2. First process to acquire lock becomes the \"server\"\n3. Other processes wait or use IPC to talk to server\n4. On server death, lock releases, new server elected\n\n**Option C: Dedicated Database Process**\n\nMost robust:\n1. Separate long-running process owns PGLite\n2. All agents connect via Unix socket / HTTP\n3. Process survives agent restarts\n4. Similar to how `bd` daemon worked\n\n## Key Insight from PGLite Docs\n\n```typescript\n// Worker pattern - leader election built-in\nimport { PGliteWorker } from '@electric-sql/pglite/worker'\n\nconst pg = new PGliteWorker(\n  new Worker('./my-pglite-worker.js'),\n  { dataDir: 'file://./streams' }\n)\n\n// Only ONE instance actually runs PGLite\n// Others proxy through the leader\n```\n\n## For Node.js Adaptation\n\nWe need to implement similar leader election:\n1. Use `proper-lockfile` or `flock` for file-based locking\n2. Leader writes PID to lockfile\n3. Non-leaders connect to leader via IPC\n4. Health check / heartbeat to detect leader death\n5. Re-election on leader failure\n\n## References\n- https://pglite.dev/docs/multi-tab-worker\n- https://pglite.dev/docs/filesystems\n- https://pglite.dev/docs/api","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-17T16:30:16.336Z","updated_at":"2025-12-17T16:30:16.336Z"}
{"id":"opencode-swarm-plugin-006","title":"Query test bead","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:34:52.500551-08:00","updated_at":"2025-12-07T19:34:54.606061-08:00","closed_at":"2025-12-07T19:34:54.606061-08:00"}
{"id":"opencode-swarm-plugin-00k3h","title":"Lifecycle test bead","description":"50% complete","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T18:16:32.838669-08:00","updated_at":"2025-12-13T18:16:32.967628-08:00","closed_at":"2025-12-13T18:16:32.967628-08:00"}
{"id":"opencode-swarm-plugin-01ozp","title":"Test bead minimal","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T09:06:05.660762-08:00","updated_at":"2025-12-10T09:06:09.607108-08:00","closed_at":"2025-12-10T09:06:09.607108-08:00"}
{"id":"opencode-swarm-plugin-01yqg","title":"Skills security hardening from PR review","description":"Address remaining CodeRabbit suggestions from PR #5:\n- skills_execute: Add timeout to prevent scripts hanging indefinitely\n- skills_execute: Consolidate on spawn (remove ctx?.$ branch)\n- skills_read: Harden path traversal for Windows (backslash, absolute paths)\n- skills_init: Tighten script_name validation for Windows separators\n- skills_create: Quote YAML scalars in generateSkillContent (already addressed via gray-matter)\n- Test improvements: Use unique temp dir per test run, make import.meta.url assertion less brittle","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-12T21:25:51.328858-08:00","updated_at":"2025-12-12T21:29:53.849155-08:00","closed_at":"2025-12-12T21:29:53.849155-08:00"}
{"id":"opencode-swarm-plugin-02bv","title":"High priority ready bead","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T11:11:23.937484-08:00","updated_at":"2025-12-08T11:11:25.917071-08:00","closed_at":"2025-12-08T11:11:25.917071-08:00"}
{"id":"opencode-swarm-plugin-039b","title":"Thread link test bead","description":"[thread:test-thread-123]","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:11:24.294904-08:00","updated_at":"2025-12-08T11:11:26.065157-08:00","closed_at":"2025-12-08T11:11:26.065157-08:00"}
{"id":"opencode-swarm-plugin-044p","title":"Ordered subtasks epic","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T11:10:54.454145-08:00","updated_at":"2025-12-08T11:10:56.288996-08:00","closed_at":"2025-12-08T11:10:56.288996-08:00"}
{"id":"opencode-swarm-plugin-044p.1","title":"First","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:10:54.486328-08:00","updated_at":"2025-12-08T11:10:56.314738-08:00","closed_at":"2025-12-08T11:10:56.314738-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-044p.1","depends_on_id":"opencode-swarm-plugin-044p","type":"parent-child","created_at":"2025-12-08T11:10:54.48661-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-044p.2","title":"Second","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:10:54.520507-08:00","updated_at":"2025-12-08T11:10:56.339784-08:00","closed_at":"2025-12-08T11:10:56.339784-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-044p.2","depends_on_id":"opencode-swarm-plugin-044p","type":"parent-child","created_at":"2025-12-08T11:10:54.520862-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-044p.3","title":"Third","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:10:54.554603-08:00","updated_at":"2025-12-08T11:10:56.365658-08:00","closed_at":"2025-12-08T11:10:56.365658-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-044p.3","depends_on_id":"opencode-swarm-plugin-044p","type":"parent-child","created_at":"2025-12-08T11:10:54.55496-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-044p.4","title":"Fourth","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:10:54.58671-08:00","updated_at":"2025-12-08T11:10:56.390567-08:00","closed_at":"2025-12-08T11:10:56.390567-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-044p.4","depends_on_id":"opencode-swarm-plugin-044p","type":"parent-child","created_at":"2025-12-08T11:10:54.587031-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-05mcs","title":"Thread link test bead","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T10:00:24.790073-08:00","updated_at":"2025-12-09T10:00:26.756896-08:00","closed_at":"2025-12-09T10:00:26.756896-08:00"}
{"id":"opencode-swarm-plugin-081t1","title":"Limit test bead 1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T18:16:29.956336-08:00","updated_at":"2025-12-13T18:16:33.933974-08:00","closed_at":"2025-12-13T18:16:33.933974-08:00"}
{"id":"opencode-swarm-plugin-0agp","title":"Limit test bead 0","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:11:22.766681-08:00","updated_at":"2025-12-08T11:11:25.385398-08:00","closed_at":"2025-12-08T11:11:25.385398-08:00"}
{"id":"opencode-swarm-plugin-0bhyc","title":"Cleanup task","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:05.792553-08:00","updated_at":"2025-12-10T09:06:09.707617-08:00","closed_at":"2025-12-10T09:06:09.707617-08:00"}
{"id":"opencode-swarm-plugin-0bodc","title":"Integration test epic","description":"Testing epic creation","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T10:00:23.682038-08:00","updated_at":"2025-12-09T10:00:26.189078-08:00","closed_at":"2025-12-09T10:00:26.189078-08:00"}
{"id":"opencode-swarm-plugin-0bodc.1","title":"Subtask 1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T10:00:23.726612-08:00","updated_at":"2025-12-09T10:00:26.219506-08:00","closed_at":"2025-12-09T10:00:26.219506-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-0bodc.1","depends_on_id":"opencode-swarm-plugin-0bodc","type":"parent-child","created_at":"2025-12-09T10:00:23.72705-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-0bodc.2","title":"Subtask 2","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-09T10:00:23.772101-08:00","updated_at":"2025-12-09T10:00:26.249968-08:00","closed_at":"2025-12-09T10:00:26.249968-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-0bodc.2","depends_on_id":"opencode-swarm-plugin-0bodc","type":"parent-child","created_at":"2025-12-09T10:00:23.772406-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-0bodc.3","title":"Subtask 3","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T10:00:23.815565-08:00","updated_at":"2025-12-09T10:00:26.281479-08:00","closed_at":"2025-12-09T10:00:26.281479-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-0bodc.3","depends_on_id":"opencode-swarm-plugin-0bodc","type":"parent-child","created_at":"2025-12-09T10:00:23.815895-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-0bv4r","title":"Add validation to promotePattern state transition","description":"src/pattern-maturity.ts:266-282 - promotePattern throws on deprecated but silently returns on already proven. Consider warning or error for unexpected states like promoting from \"candidate\" without enough feedback.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:36.184348-08:00","updated_at":"2025-12-13T16:20:33.514538-08:00","closed_at":"2025-12-13T16:20:33.514538-08:00"}
{"id":"opencode-swarm-plugin-0cfbg","title":"New feature request","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-14T09:30:17.955215-08:00","updated_at":"2025-12-14T09:30:22.696235-08:00","closed_at":"2025-12-14T09:30:22.696235-08:00"}
{"id":"opencode-swarm-plugin-0giv","title":"Update test bead","description":"Updated description","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:21:27.5822-08:00","updated_at":"2025-12-08T08:21:30.125084-08:00","closed_at":"2025-12-08T08:21:30.125084-08:00"}
{"id":"opencode-swarm-plugin-0h7kz","title":"Thread link test bead","description":"[thread:test-thread-456]","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:20:49.245547-08:00","updated_at":"2025-12-13T11:20:52.464106-08:00","closed_at":"2025-12-13T11:20:52.464106-08:00"}
{"id":"opencode-swarm-plugin-0idn1","title":"Document minSuccessRate default in formatSuccessfulPatternsForPrompt","description":"src/anti-patterns.ts:333 - minSuccessRate default 0.7 (70%) is arbitrary. Add JSDoc: \"/** @param minSuccessRate - Minimum success rate to include (default 0.7 = 70%, chosen to filter out patterns with marginal track records) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:26.678439-08:00","updated_at":"2025-12-13T16:41:56.006348-08:00","closed_at":"2025-12-13T16:41:56.006348-08:00"}
{"id":"opencode-swarm-plugin-0jxx","title":"Limit test bead 4","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:22:16.923763-08:00","updated_at":"2025-12-08T08:22:19.339586-08:00","closed_at":"2025-12-08T08:22:19.339586-08:00"}
{"id":"opencode-swarm-plugin-0kb2","title":"Single subtask epic","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T08:23:18.591779-08:00","updated_at":"2025-12-08T08:23:20.415392-08:00","closed_at":"2025-12-08T08:23:20.415392-08:00"}
{"id":"opencode-swarm-plugin-0khc","title":"Epic with file references","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T11:11:23.920316-08:00","updated_at":"2025-12-08T11:11:25.828401-08:00","closed_at":"2025-12-08T11:11:25.828401-08:00"}
{"id":"opencode-swarm-plugin-0khc.2","title":"Edit src/b.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:11:23.994204-08:00","updated_at":"2025-12-08T11:11:25.880828-08:00","closed_at":"2025-12-08T11:11:25.880828-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-0khc.2","depends_on_id":"opencode-swarm-plugin-0khc","type":"parent-child","created_at":"2025-12-08T11:11:23.994475-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-0l14i.1","title":"Only task","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T11:12:42.322958-08:00","updated_at":"2025-12-08T11:12:44.174169-08:00","closed_at":"2025-12-08T11:12:44.174169-08:00"}
{"id":"opencode-swarm-plugin-0l5bq","title":"Add JSDoc to extractPatternsFromDescription regex patterns","description":"src/anti-patterns.ts:220-260 - strategyPatterns array has 12 regex patterns but no explanation of detection logic. Add comment: \"Detects common decomposition strategies via keyword matching. Not exhaustive - patterns can be manually created for novel strategies.\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:22.738997-08:00","updated_at":"2025-12-13T16:41:55.320002-08:00","closed_at":"2025-12-13T16:41:55.320002-08:00"}
{"id":"opencode-swarm-plugin-0lidx","title":"Limit test bead 3","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:12:41.181135-08:00","updated_at":"2025-12-08T11:12:43.741036-08:00","closed_at":"2025-12-08T11:12:43.741036-08:00"}
{"id":"opencode-swarm-plugin-0phkm","title":"swarm.ts:920-956 - queryCassHistory returns null with no distinction on failure types","description":"swarm.ts:920-956 - queryCassHistory returns null for \"unavailable\", \"failed\", and \"no results\" cases without distinction. Callers can't tell if they should retry or if CASS is disabled. Suggested fix: Return structured result with status enum.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:31.086042-08:00","updated_at":"2025-12-10T11:56:18.166564-08:00","closed_at":"2025-12-10T11:56:18.166564-08:00"}
{"id":"opencode-swarm-plugin-0tgw","title":"Bead to close","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:25:10.149976-08:00","updated_at":"2025-12-08T08:25:10.1787-08:00","closed_at":"2025-12-08T08:25:10.1787-08:00"}
{"id":"opencode-swarm-plugin-0wk","title":"Update test bead","description":"Original description","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T19:37:34.417512-08:00","updated_at":"2025-12-07T19:37:36.339262-08:00","closed_at":"2025-12-07T19:37:36.339262-08:00"}
{"id":"opencode-swarm-plugin-0wm7m","title":"Update test bead","description":"Original description","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T09:30:19.00836-08:00","updated_at":"2025-12-14T09:30:23.269506-08:00","closed_at":"2025-12-14T09:30:23.269506-08:00"}
{"id":"opencode-swarm-plugin-0yyyk","title":"Drizzle ORM Feasibility Analysis for swarm-mail","description":"## Drizzle ORM Feasibility Analysis - COMPLETE\n\n**VERDICT: ✅ FEASIBLE - Recommended Approach: HYBRID/COEXISTENCE**\n\n### Key Findings\n\n1. **PGLite Compatibility:** ✅ First-class support via drizzle-orm/pglite driver. Can wrap existing PGLite instance.\n\n2. **Migration Strategy:** COEXISTENCE - Keep migrations.ts for existing tables, use Drizzle for new features. Gradual migration over time.\n\n3. **Type-Safety Benefits:** 70 SQL patterns identified. Drizzle provides compile-time checking, auto JSONB handling, type inference.\n\n4. **DatabaseAdapter Impact:** DrizzleDatabaseAdapter wrapper recommended (8h effort). Zero breaking changes for consumers.\n\n5. **Effort Estimate:** ~87 hours (2-3 weeks) for full migration. Recommend phased approach.\n\n### Recommended Next Steps\n\n1. Create Drizzle schema definitions for existing tables\n2. Implement DrizzleDatabaseAdapter wrapper\n3. Add integration tests (equivalence check)\n4. Migrate high-value operations incrementally\n\n### Reference\n\nCourse Builder has working adapter-drizzle package at badass-courses/course-builder that demonstrates the pattern.\n\nSee related bead: opencode-swarm-plugin-13fho","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-16T12:16:07.49403-08:00","updated_at":"2025-12-16T12:23:31.775155-08:00","closed_at":"2025-12-16T12:23:31.775155-08:00"}
{"id":"opencode-swarm-plugin-10vx2","title":"Thread link test bead","description":"Important context here\n\n[thread:test-thread-789]","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T09:30:21.370858-08:00","updated_at":"2025-12-14T09:30:24.349053-08:00","closed_at":"2025-12-14T09:30:24.349053-08:00"}
{"id":"opencode-swarm-plugin-13fho","title":"Migrate swarm-mail to Drizzle ORM","description":"Replace raw SQL migrations and queries in swarm-mail with Drizzle ORM. Benefits: type-safe queries, schema-as-code, better migration management, less brittle tests. See https://orm.drizzle.team/docs/extensions/pg for PGLite integration.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-16T11:58:30.831614-08:00","updated_at":"2025-12-16T11:58:30.831614-08:00"}
{"id":"opencode-swarm-plugin-1agr0.1","title":"Edit src/a.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T13:58:52.436237-08:00","updated_at":"2025-12-14T13:58:55.956143-08:00","closed_at":"2025-12-14T13:58:55.956143-08:00"}
{"id":"opencode-swarm-plugin-1dhsw","title":"Bead to start","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T09:30:19.788064-08:00","updated_at":"2025-12-14T09:30:23.509064-08:00","closed_at":"2025-12-14T09:30:23.509064-08:00"}
{"id":"opencode-swarm-plugin-1dpc","title":"Workflow test epic","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T08:23:19.429782-08:00","updated_at":"2025-12-08T08:23:19.619019-08:00","closed_at":"2025-12-08T08:23:19.619019-08:00"}
{"id":"opencode-swarm-plugin-1dpc.1","title":"Step 1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:23:19.46242-08:00","updated_at":"2025-12-08T08:23:19.545623-08:00","closed_at":"2025-12-08T08:23:19.545623-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-1dpc.1","depends_on_id":"opencode-swarm-plugin-1dpc","type":"parent-child","created_at":"2025-12-08T08:23:19.462724-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-1dpc.2","title":"Step 2","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:23:19.498318-08:00","updated_at":"2025-12-08T08:23:19.595083-08:00","closed_at":"2025-12-08T08:23:19.595083-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-1dpc.2","depends_on_id":"opencode-swarm-plugin-1dpc","type":"parent-child","created_at":"2025-12-08T08:23:19.498652-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-1fskr","title":"Feature: Coordinator delegates planning to swarm/planner subagent","description":"## Problem\nCoordinators currently do planning inline, which:\n- Consumes main thread context with decomposition reasoning\n- Pollutes coordinator context with file contents, analysis, etc.\n- Makes long swarms hit context limits faster\n\n## Solution\nAdd a `swarm_delegate_planning` tool that:\n1. Creates a planning bead with full task context\n2. Spawns swarm/planner subagent with the bead\n3. Subagent returns ONLY structured BeadTree JSON\n4. Coordinator validates and creates beads from response\n\n## Implementation\n\n### New Tool: swarm_delegate_planning\n```typescript\ninterface DelegatePlanningArgs {\n  task: string\n  context?: string  // Additional context to include\n  max_subtasks?: number\n  strategy?: \"auto\" | \"file-based\" | \"feature-based\" | \"risk-based\" | \"socratic\"\n}\n\ninterface DelegatePlanningResult {\n  bead_tree: BeadTree  // Validated decomposition\n  planning_bead_id: string  // For reference\n  strategy_used: string\n}\n```\n\n### Workflow Change\n**Before (context-heavy):**\n```\nCoordinator:\n  → swarm_select_strategy (inline)\n  → swarm_plan_prompt (inline, dumps context)\n  → Agent reasons about decomposition (inline)\n  → swarm_validate_decomposition (inline)\n  → beads_create_epic\n```\n\n**After (context-lean):**\n```\nCoordinator:\n  → swarm_delegate_planning(task, context)\n    └─ [Subagent does all planning work]\n    └─ Returns only BeadTree JSON\n  → beads_create_epic (from validated result)\n```\n\n### Benefits\n- Coordinator context stays lean (orchestration only)\n- Planning reasoning isolated in subagent\n- Subagent can use skills, search CASS, read files without polluting main thread\n- Failed planning doesn't corrupt coordinator state\n\n## Files to Modify\n- src/swarm.ts - Add swarm_delegate_planning tool\n- src/index.ts - Export new tool\n- examples/commands/swarm.md - Update coordinator workflow\n- global-skills/swarm-coordination/SKILL.md - Document pattern\n\n## Success Criteria\n- Coordinator can decompose complex tasks without context bloat\n- Planning failures don't crash coordinator\n- BeadTree validation happens before coordinator sees it\n- Backward compatible (existing tools still work)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T14:08:54.208003-08:00","updated_at":"2025-12-13T15:59:40.405459-08:00","closed_at":"2025-12-13T15:59:40.405459-08:00"}
{"id":"opencode-swarm-plugin-1i8","title":"Test bead","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:23:49.873224-08:00","updated_at":"2025-12-07T19:24:13.408304-08:00","closed_at":"2025-12-07T19:24:13.408304-08:00"}
{"id":"opencode-swarm-plugin-1jhr8","title":"storage.ts:248-273 - Silent JSON parse failures in find()","description":"src/storage.ts:248-273 - The find() method catches JSON parse errors and returns empty arrays with no logging. If semantic-memory returns malformed data, callers have no visibility. Suggested fix: Log parse errors to console.warn before returning empty array.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:05:49.694433-08:00","updated_at":"2025-12-10T11:57:14.947397-08:00","closed_at":"2025-12-10T11:57:14.947397-08:00"}
{"id":"opencode-swarm-plugin-1li","title":"Test parent","description":"","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-07T19:35:34.909384-08:00","updated_at":"2025-12-08T08:35:24.648164-08:00","closed_at":"2025-12-08T08:35:24.648164-08:00"}
{"id":"opencode-swarm-plugin-1li.1","title":"Test child","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:35:39.491063-08:00","updated_at":"2025-12-08T08:36:24.892828-08:00","closed_at":"2025-12-08T08:36:24.892828-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-1li.1","depends_on_id":"opencode-swarm-plugin-1li","type":"parent-child","created_at":"2025-12-07T19:35:39.491364-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-1m18k","title":"storage.ts:225 - Missing error handling in store() method","description":"src/storage.ts:225 - The store() method in SemanticMemoryStorage silently swallows errors. If execSemanticMemory fails, no error is thrown or logged. Suggested fix: Check result.exitCode and throw if non-zero, or at minimum log the error.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:05:47.181965-08:00","updated_at":"2025-12-10T11:56:07.964661-08:00","closed_at":"2025-12-10T11:56:07.964661-08:00"}
{"id":"opencode-swarm-plugin-1r2","title":"Limit test bead 2","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:39:09.787144-08:00","updated_at":"2025-12-07T19:39:11.878331-08:00","closed_at":"2025-12-07T19:39:11.878331-08:00"}
{"id":"opencode-swarm-plugin-23rm2","title":"Update test bead","description":"Blocked on dependency","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T11:12:56.167128-08:00","updated_at":"2025-12-08T11:12:58.368775-08:00","closed_at":"2025-12-08T11:12:58.368775-08:00"}
{"id":"opencode-swarm-plugin-29o7i","title":"Test bug with priority","description":"This is a critical bug","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-10T09:06:05.704944-08:00","updated_at":"2025-12-10T09:06:09.640301-08:00","closed_at":"2025-12-10T09:06:09.640301-08:00"}
{"id":"opencode-swarm-plugin-2klp9","title":"Pattern: CSO - Claude Search Optimization for Skills","description":"## CSO - Claude Search Optimization (from obra/superpowers)\n\n**Purpose:** Claude reads skill descriptions to decide which skills to load. Make descriptions answer: \"Should I read this skill right now?\"\n\n### Description Field Format\n- Start with \"Use when...\" to focus on triggering conditions\n- Third-person only (injected into system prompt)\n- Include BOTH what it does AND when to use it\n- Max 1024 chars (aim for \u003c500)\n\n### Examples\n```yaml\n# ❌ BAD: Too abstract\ndescription: For async testing\n\n# ❌ BAD: First person\ndescription: I can help you with async tests\n\n# ❌ BAD: Technology-specific but skill isn't\ndescription: Use when tests use setTimeout and are flaky\n\n# ✅ GOOD: Trigger + problem + solution\ndescription: Use when tests have race conditions, timing dependencies, or pass/fail inconsistently - replaces arbitrary timeouts with condition polling\n```\n\n### Keyword Coverage\nUse words Claude would search for:\n- **Error messages:** \"Hook timed out\", \"ENOTEMPTY\", \"race condition\"\n- **Symptoms:** \"flaky\", \"hanging\", \"zombie\", \"pollution\"\n- **Synonyms:** \"timeout/hang/freeze\", \"cleanup/teardown/afterEach\"\n- **Tools:** Actual commands, library names, file types\n\n### Token Efficiency\n- getting-started workflows: \u003c150 words\n- Frequently-loaded skills: \u003c200 words\n- Other skills: \u003c500 words\n- Move details to tool --help\n- Use cross-references instead of repeating\n\n### Naming Conventions\n- Active voice, verb-first: `creating-skills` not `skill-creation`\n- Gerunds work well: `testing-skills`, `debugging-with-logs`\n- Name by what you DO: `condition-based-waiting` \u003e `async-test-helpers`\n\n**Full analysis:** .beads/analysis/skill-architecture-meta-skills.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T14:00:50.930936-08:00","updated_at":"2025-12-13T15:50:56.528937-08:00","closed_at":"2025-12-13T15:50:56.528937-08:00"}
{"id":"opencode-swarm-plugin-3fa7","title":"Add rate limiting to Agent Mail","description":"Implement per-agent rate limiting with Redis backend to prevent abuse","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-08T08:28:07.547069-08:00","updated_at":"2025-12-08T08:29:09.032995-08:00","closed_at":"2025-12-08T08:29:09.032995-08:00"}
{"id":"opencode-swarm-plugin-3fa7.1","title":"Add Redis dependency and connection","description":"Add redis-py to requirements.txt and create Redis connection helper","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:28:14.489575-08:00","updated_at":"2025-12-08T08:28:54.193001-08:00","closed_at":"2025-12-08T08:28:54.193001-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3fa7.1","depends_on_id":"opencode-swarm-plugin-3fa7","type":"parent-child","created_at":"2025-12-08T08:28:14.489983-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3fa7.2","title":"Implement rate limiter class","description":"Create RateLimiter class using Redis sorted sets for sliding window rate limiting","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:28:14.527429-08:00","updated_at":"2025-12-08T08:29:08.941471-08:00","closed_at":"2025-12-08T08:29:08.941471-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3fa7.2","depends_on_id":"opencode-swarm-plugin-3fa7","type":"parent-child","created_at":"2025-12-08T08:28:14.527749-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3fa7.3","title":"Integrate rate limiting into API endpoints","description":"Add rate limiting middleware to send_message and other high-traffic endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:28:14.563509-08:00","updated_at":"2025-12-08T08:29:08.973236-08:00","closed_at":"2025-12-08T08:29:08.973236-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3fa7.3","depends_on_id":"opencode-swarm-plugin-3fa7","type":"parent-child","created_at":"2025-12-08T08:28:14.563815-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3fa7.4","title":"Add rate limit configuration and tests","description":"Add rate limit config to docker-compose.yml and create integration tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:28:14.601283-08:00","updated_at":"2025-12-08T08:29:09.002331-08:00","closed_at":"2025-12-08T08:29:09.002331-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3fa7.4","depends_on_id":"opencode-swarm-plugin-3fa7","type":"parent-child","created_at":"2025-12-08T08:28:14.601636-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3l46g","title":"Restructure monorepo: move plugin to packages/opencode-swarm-plugin","description":"Move the root package into packages/opencode-swarm-plugin so root is workspace-only. Proper monorepo structure per Turborepo docs.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T18:05:10.647786-08:00","updated_at":"2025-12-14T19:49:12.831195-08:00","closed_at":"2025-12-14T19:49:12.831195-08:00"}
{"id":"opencode-swarm-plugin-3l46g.1","title":"Create plugin package.json and tsconfig","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T18:05:10.705537-08:00","updated_at":"2025-12-14T18:06:42.783777-08:00","closed_at":"2025-12-14T18:06:42.783777-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3l46g.1","depends_on_id":"opencode-swarm-plugin-3l46g","type":"parent-child","created_at":"2025-12-14T18:05:10.706508-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3l46g.2","title":"Update root package.json to workspace-only","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T18:05:10.759848-08:00","updated_at":"2025-12-14T18:06:29.276561-08:00","closed_at":"2025-12-14T18:06:29.276561-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3l46g.2","depends_on_id":"opencode-swarm-plugin-3l46g","type":"parent-child","created_at":"2025-12-14T18:05:10.760971-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3l46g.3","title":"Fix imports in plugin (swarm-mail paths)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T18:05:10.821024-08:00","updated_at":"2025-12-14T19:49:11.035603-08:00","closed_at":"2025-12-14T19:49:11.035603-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3l46g.3","depends_on_id":"opencode-swarm-plugin-3l46g","type":"parent-child","created_at":"2025-12-14T18:05:10.822647-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3l46g.4","title":"Verify turbo build and tests pass","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T18:05:10.881868-08:00","updated_at":"2025-12-14T19:49:11.621785-08:00","closed_at":"2025-12-14T19:49:11.621785-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3l46g.4","depends_on_id":"opencode-swarm-plugin-3l46g","type":"parent-child","created_at":"2025-12-14T18:05:10.882984-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3p6ry","title":"Swarm worker survival patterns and interactive planning","description":"Add mandatory context survival checklist to worker prompts, fix coordinator to not reserve files, add Socratic planning phase with escape hatches","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T08:16:03.176134-08:00","updated_at":"2025-12-16T08:29:30.426549-08:00","closed_at":"2025-12-16T08:29:30.426549-08:00"}
{"id":"opencode-swarm-plugin-3p6ry.1","title":"Update SUBTASK_PROMPT_V2 with survival checklist","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T08:16:03.263767-08:00","updated_at":"2025-12-16T08:22:19.21683-08:00","closed_at":"2025-12-16T08:22:19.21683-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3p6ry.1","depends_on_id":"opencode-swarm-plugin-3p6ry","type":"parent-child","created_at":"2025-12-16T08:16:03.264482-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3p6ry.2","title":"Add Socratic planning phase to swarm decomposition","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T08:16:03.354843-08:00","updated_at":"2025-12-16T08:22:20.646379-08:00","closed_at":"2025-12-16T08:22:20.646379-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3p6ry.2","depends_on_id":"opencode-swarm-plugin-3p6ry","type":"parent-child","created_at":"2025-12-16T08:16:03.356011-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3p6ry.3","title":"Update /swarm command with planning modes","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T08:16:03.449374-08:00","updated_at":"2025-12-16T08:26:47.377736-08:00","closed_at":"2025-12-16T08:26:47.377736-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3p6ry.3","depends_on_id":"opencode-swarm-plugin-3p6ry","type":"parent-child","created_at":"2025-12-16T08:16:03.450884-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3p6ry.4","title":"Update swarm-coordination skill with new patterns","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T08:16:03.542975-08:00","updated_at":"2025-12-16T08:26:48.324699-08:00","closed_at":"2025-12-16T08:26:48.324699-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-3p6ry.4","depends_on_id":"opencode-swarm-plugin-3p6ry","type":"parent-child","created_at":"2025-12-16T08:16:03.543733-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-3rby6","title":"Add PGLite convenience layer","description":"Add convenience functions that wrap the adapter with PGLite-specific setup.\n\n## Files\n- packages/swarm-mail/src/pglite.ts - PGLite-specific convenience layer\n- packages/swarm-mail/src/index.ts - Re-export convenience functions\n\n## Implementation\n```typescript\n// packages/swarm-mail/src/pglite.ts\nimport { PGlite } from '@electric-sql/pglite';\nimport { createSwarmMailAdapter, type SwarmMailAdapter, type DatabaseAdapter } from './adapter';\n\n// Wrap PGLite to match DatabaseAdapter interface\nfunction wrapPGlite(db: PGlite): DatabaseAdapter {\n  return {\n    query: (sql, params) =\u003e db.query(sql, params),\n    exec: (sql) =\u003e db.exec(sql),\n  };\n}\n\n// Singleton cache\nconst instances = new Map\u003cstring, SwarmMailAdapter\u003e();\n\nexport async function getSwarmMail(projectPath?: string): Promise\u003cSwarmMailAdapter\u003e {\n  const dbPath = getDatabasePath(projectPath);\n  \n  if (!instances.has(dbPath)) {\n    const pglite = new PGlite(dbPath);\n    const db = wrapPGlite(pglite);\n    const adapter = createSwarmMailAdapter(db);\n    await adapter.runMigrations();\n    instances.set(dbPath, adapter);\n  }\n  \n  return instances.get(dbPath)!;\n}\n\n// For testing - create in-memory instance\nexport function createInMemorySwarmMail(): Promise\u003cSwarmMailAdapter\u003e {\n  const pglite = new PGlite(); // in-memory\n  const db = wrapPGlite(pglite);\n  const adapter = createSwarmMailAdapter(db);\n  return adapter.runMigrations().then(() =\u003e adapter);\n}\n\n// Close all cached instances\nexport async function closeAllSwarmMail(): Promise\u003cvoid\u003e { ... }\n```\n\n## Exports from index.ts\n```typescript\n// Core (database-agnostic)\nexport { createSwarmMailAdapter } from './adapter';\nexport type { DatabaseAdapter, SwarmMailAdapter } from './types';\n\n// PGLite convenience (optional)\nexport { getSwarmMail, createInMemorySwarmMail, closeAllSwarmMail } from './pglite';\n```\n\n## Success Criteria\n- Simple usage still works: `const sm = await getSwarmMail()`\n- Advanced usage works: `const sm = createSwarmMailAdapter(myDb)`\n- Tests can use in-memory instances easily","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T15:57:42.074984-08:00","updated_at":"2025-12-14T16:18:29.119296-08:00","closed_at":"2025-12-14T16:18:29.119296-08:00"}
{"id":"opencode-swarm-plugin-3s3nr","title":"Gap: No pagination for large event reads","description":"src/streams/store.ts:214-263 - replayEvents() reads ALL events into memory without pagination. For large event logs (\u003e100k events), this could cause OOM. readEvents() has limit/offset but replayEvents doesn't use it. Should: paginate event replay (process in batches of 1000), add progress reporting, consider streaming API for large replays. Also affects debugEvents in debug.ts.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:10.536039-08:00","updated_at":"2025-12-13T16:20:31.328659-08:00","closed_at":"2025-12-13T16:20:31.328659-08:00"}
{"id":"opencode-swarm-plugin-3wvbh","title":"swarm-mail DB initialization fails - pglite.data not found","description":"## Problem\nswarm-mail database initialization fails with:\n```\nENOENT: no such file or directory, open '/Users/joel/.local/share/fnm/node-versions/v22.17.0/installation/lib/node_modules/opencode-swarm-plugin/node_modules/swarm-mail/dist/pglite.data'\n```\n\n## Impact\n- File reservations don't work\n- Agent coordination broken\n- swarm_complete can't track agents\n\n## Root Cause (likely)\nAfter extracting swarm-mail as a separate package, the pglite.data file path resolution is broken. It's looking in the global npm install location instead of the local project.\n\n## Reproduction\n1. Run any swarmmail_* tool\n2. Observe ENOENT error\n\n## Priority\nP0 - Core swarm functionality is broken","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-15T07:53:28.024162-08:00","updated_at":"2025-12-15T08:05:19.080574-08:00","closed_at":"2025-12-15T08:05:19.080574-08:00"}
{"id":"opencode-swarm-plugin-49vpo","title":"Full Swarm Docs Site Overhaul","description":"Go ham on the docs site: swarm theme with orange/amber, sidebar tabs, AI/LLM integration, ASCII art, the works","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T11:15:57.97996-08:00","updated_at":"2025-12-15T11:28:32.903658-08:00","closed_at":"2025-12-15T11:28:32.903658-08:00"}
{"id":"opencode-swarm-plugin-49vpo.1","title":"Swarm theme CSS - orange/amber colors, hex patterns, ASCII styling","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-15T11:15:58.061849-08:00","updated_at":"2025-12-15T11:18:26.671319-08:00","closed_at":"2025-12-15T11:18:26.671319-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-49vpo.1","depends_on_id":"opencode-swarm-plugin-49vpo","type":"parent-child","created_at":"2025-12-15T11:15:58.062792-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-49vpo.2","title":"Sidebar tabs + nav links with icons","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-15T11:15:58.134766-08:00","updated_at":"2025-12-15T11:20:20.192634-08:00","closed_at":"2025-12-15T11:20:20.192634-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-49vpo.2","depends_on_id":"opencode-swarm-plugin-49vpo","type":"parent-child","created_at":"2025-12-15T11:15:58.135582-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-49vpo.3","title":"LLM routes - llms-full.txt and .mdx endpoints","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T11:15:58.208382-08:00","updated_at":"2025-12-15T11:25:21.750573-08:00","closed_at":"2025-12-15T11:25:21.750573-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-49vpo.3","depends_on_id":"opencode-swarm-plugin-49vpo","type":"parent-child","created_at":"2025-12-15T11:15:58.209226-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-49vpo.4","title":"Source config - enable processed markdown, mermaid, typescript","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T11:15:58.297764-08:00","updated_at":"2025-12-15T11:21:54.105859-08:00","closed_at":"2025-12-15T11:21:54.105859-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-49vpo.4","depends_on_id":"opencode-swarm-plugin-49vpo","type":"parent-child","created_at":"2025-12-15T11:15:58.301868-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-49vpo.5","title":"ASCII art components and banners for docs","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:15:58.459112-08:00","updated_at":"2025-12-15T11:28:30.691477-08:00","closed_at":"2025-12-15T11:28:30.691477-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-49vpo.5","depends_on_id":"opencode-swarm-plugin-49vpo","type":"parent-child","created_at":"2025-12-15T11:15:58.459935-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4cbdw","title":"Document schema_name enum values in structured_validate","description":"src/structured.ts:351-353 - schema_name enum [\"evaluation\", \"task_decomposition\", \"bead_tree\"] not documented. Add description: \"Schema to validate against (evaluation=agent self-eval, task_decomposition=swarm breakdown, bead_tree=epic+subtasks)\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:54.29152-08:00","updated_at":"2025-12-13T16:45:46.595725-08:00","closed_at":"2025-12-13T16:45:46.595725-08:00"}
{"id":"opencode-swarm-plugin-4g3as","title":"Fix 12 medium-priority audit bugs","description":"Fix error handling and validation gaps identified in audit. Grouped by file for parallel work.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T11:21:31.743-08:00","updated_at":"2025-12-10T11:26:03.666518-08:00","closed_at":"2025-12-10T11:26:03.666518-08:00"}
{"id":"opencode-swarm-plugin-4g3as.1","title":"Fix learning.ts bugs (3): unbounded memory, division by zero, empty events","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:21:31.787859-08:00","updated_at":"2025-12-10T11:25:54.841964-08:00","closed_at":"2025-12-10T11:25:54.841964-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4g3as.1","depends_on_id":"opencode-swarm-plugin-4g3as","type":"parent-child","created_at":"2025-12-10T11:21:31.788935-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4g3as.2","title":"Fix swarm.ts bugs (5): silent failures, missing validation, reservation leaks","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:21:31.832744-08:00","updated_at":"2025-12-10T11:25:55.907401-08:00","closed_at":"2025-12-10T11:25:55.907401-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4g3as.2","depends_on_id":"opencode-swarm-plugin-4g3as","type":"parent-child","created_at":"2025-12-10T11:21:31.833411-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4g3as.3","title":"Fix rate-limiter.ts bugs (2): Redis fallback retry, SQL bounds checks","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:21:31.88323-08:00","updated_at":"2025-12-10T11:25:56.701956-08:00","closed_at":"2025-12-10T11:25:56.701956-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4g3as.3","depends_on_id":"opencode-swarm-plugin-4g3as","type":"parent-child","created_at":"2025-12-10T11:21:31.884295-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4re1l","title":"Wire up real LLM decomposition to Evalite","description":"Replace mock decomposition with actual Claude calls via AI SDK + Vercel AI Gateway","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T18:08:50.499705-08:00","updated_at":"2025-12-13T18:19:31.142019-08:00","closed_at":"2025-12-13T18:19:31.142019-08:00"}
{"id":"opencode-swarm-plugin-4re1l.1","title":"Create LLM client wrapper for evals","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T18:08:50.562386-08:00","updated_at":"2025-12-13T18:19:28.247432-08:00","closed_at":"2025-12-13T18:19:28.247432-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4re1l.1","depends_on_id":"opencode-swarm-plugin-4re1l","type":"parent-child","created_at":"2025-12-13T18:08:50.563757-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4re1l.2","title":"Update swarm-decomposition.eval.ts with real LLM calls","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T18:08:50.621235-08:00","updated_at":"2025-12-13T18:19:29.201449-08:00","closed_at":"2025-12-13T18:19:29.201449-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4re1l.2","depends_on_id":"opencode-swarm-plugin-4re1l","type":"parent-child","created_at":"2025-12-13T18:08:50.622232-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4re1l.3","title":"Update test fixtures with realistic expectations","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T18:08:50.67438-08:00","updated_at":"2025-12-13T18:19:30.083749-08:00","closed_at":"2025-12-13T18:19:30.083749-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4re1l.3","depends_on_id":"opencode-swarm-plugin-4re1l","type":"parent-child","created_at":"2025-12-13T18:08:50.675906-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4t3mp","title":"Extract magic number 10000 to constant in semantic-memory check","description":"src/tool-availability.ts:108 - bunx timeout 10000ms is magic number. Extract to constant: `const BUNX_TIMEOUT_MS = 10000;` for consistency with other timeouts.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:06.018452-08:00","updated_at":"2025-12-13T16:41:51.721641-08:00","closed_at":"2025-12-13T16:41:51.721641-08:00"}
{"id":"opencode-swarm-plugin-4uy9","title":"Implement Strategic Swarm Planner","description":"Add strategy selection, planning prompts, example agent, and learning integration for swarm decomposition","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T11:08:24.603771-08:00","updated_at":"2025-12-08T11:13:18.243383-08:00","closed_at":"2025-12-08T11:13:18.243383-08:00"}
{"id":"opencode-swarm-plugin-4uy9.1","title":"Add tests for swarm_select_strategy and swarm_plan_prompt","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T11:08:24.640194-08:00","updated_at":"2025-12-08T11:13:15.209806-08:00","closed_at":"2025-12-08T11:13:15.209806-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4uy9.1","depends_on_id":"opencode-swarm-plugin-4uy9","type":"parent-child","created_at":"2025-12-08T11:08:24.640519-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4uy9.2","title":"Add strategy tracking to swarm_record_outcome","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:08:24.675275-08:00","updated_at":"2025-12-08T11:13:16.248925-08:00","closed_at":"2025-12-08T11:13:16.248925-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4uy9.2","depends_on_id":"opencode-swarm-plugin-4uy9","type":"parent-child","created_at":"2025-12-08T11:08:24.675587-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-4uy9.3","title":"Update README with strategy documentation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T11:08:24.709732-08:00","updated_at":"2025-12-08T11:13:17.200743-08:00","closed_at":"2025-12-08T11:13:17.200743-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-4uy9.3","depends_on_id":"opencode-swarm-plugin-4uy9","type":"parent-child","created_at":"2025-12-08T11:08:24.710095-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-51b5","title":"Refactor swarm to coordinator-centric model","description":"Fix the fundamental issue: Task subagents don't have access to Agent Mail/beads tools. Move coordination to the main agent (coordinator) instead of expecting subagents to coordinate themselves.\n\nKey changes:\n1. Simplify SUBTASK_PROMPT - remove Agent Mail/beads instructions (agents can't use them)\n2. Add swarm_spawn_subtask - coordinator reserves files, marks bead, returns simple prompt\n3. Add swarm_complete_subtask - coordinator releases files, closes bead, creates issue beads\n4. Coordinator handles ALL Agent Mail communication on behalf of subagents","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T08:53:12.0718-08:00","updated_at":"2025-12-08T08:57:06.869129-08:00","closed_at":"2025-12-08T08:57:06.869129-08:00"}
{"id":"opencode-swarm-plugin-51b5.1","title":"Create SUBTASK_PROMPT_V2 - simplified prompt without coordination instructions","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:53:12.107139-08:00","updated_at":"2025-12-08T08:54:04.44185-08:00","closed_at":"2025-12-08T08:54:04.44185-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-51b5.1","depends_on_id":"opencode-swarm-plugin-51b5","type":"parent-child","created_at":"2025-12-08T08:53:12.107478-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-51b5.2","title":"Implement swarm_spawn_subtask tool - reserves files, marks bead, returns prompt","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:53:12.140035-08:00","updated_at":"2025-12-08T08:57:03.786311-08:00","closed_at":"2025-12-08T08:57:03.786311-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-51b5.2","depends_on_id":"opencode-swarm-plugin-51b5","type":"parent-child","created_at":"2025-12-08T08:53:12.140379-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-51b5.3","title":"Implement swarm_complete_subtask tool - releases files, closes bead, handles issues","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:53:12.171966-08:00","updated_at":"2025-12-08T08:57:04.504079-08:00","closed_at":"2025-12-08T08:57:04.504079-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-51b5.3","depends_on_id":"opencode-swarm-plugin-51b5","type":"parent-child","created_at":"2025-12-08T08:53:12.172331-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-51b5.4","title":"Update swarm integration tests for coordinator-centric flow","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:53:12.202852-08:00","updated_at":"2025-12-08T08:57:05.231038-08:00","closed_at":"2025-12-08T08:57:05.231038-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-51b5.4","depends_on_id":"opencode-swarm-plugin-51b5","type":"parent-child","created_at":"2025-12-08T08:53:12.203209-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-51b5.5","title":"Update index.ts exports for new swarm tools","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:53:12.234571-08:00","updated_at":"2025-12-08T08:57:05.857983-08:00","closed_at":"2025-12-08T08:57:05.857983-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-51b5.5","depends_on_id":"opencode-swarm-plugin-51b5","type":"parent-child","created_at":"2025-12-08T08:53:12.234917-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5cvcc","title":"Research: Event-Sourced Beads with Effect-TS","description":"Investigate feasibility of rebuilding steveyegge/beads issue tracker using Effect-TS durable streams and event sourcing, leveraging existing swarm-mail primitives. Research-only - no implementation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T10:50:42.907953-08:00","updated_at":"2025-12-15T11:05:04.156765-08:00","closed_at":"2025-12-15T11:05:04.156765-08:00"}
{"id":"opencode-swarm-plugin-5cvcc.1","title":"Analyze steveyegge/beads architecture and event patterns","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T10:50:42.988001-08:00","updated_at":"2025-12-15T10:54:51.30404-08:00","closed_at":"2025-12-15T10:54:51.30404-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-5cvcc.1","depends_on_id":"opencode-swarm-plugin-5cvcc","type":"parent-child","created_at":"2025-12-15T10:50:42.989017-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5cvcc.2","title":"Map swarm-mail primitives to beads requirements","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T10:50:43.064853-08:00","updated_at":"2025-12-15T10:54:52.411384-08:00","closed_at":"2025-12-15T10:54:52.411384-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-5cvcc.2","depends_on_id":"opencode-swarm-plugin-5cvcc","type":"parent-child","created_at":"2025-12-15T10:50:43.06554-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5cvcc.3","title":"Design event schema for beads operations","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T10:50:43.14255-08:00","updated_at":"2025-12-16T13:33:07.164767-08:00","closed_at":"2025-12-16T13:33:07.164767-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-5cvcc.3","depends_on_id":"opencode-swarm-plugin-5cvcc","type":"parent-child","created_at":"2025-12-15T10:50:43.143347-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5cvcc.4","title":"Evaluate git sync and distributed coordination","description":"Research how steveyegge/beads achieves distributed sync via git. Analyze: (1) JSONL export format and incremental updates; (2) Merge conflict resolution strategies; (3) Hash-based ID collision handling; (4) How this could work with PGLite event store.\n\n## Status\n✅ COMPLETE - Full analysis documented in `.beads/analysis/git-sync-distributed-coordination.md`\n\n## Key Findings\n1. **JSONL Format:** Snapshot-based (not event sourcing), one issue per line with incremental dirty tracking\n2. **Merge Strategy:** Field-level 3-way merge via vendored @neongreen algorithm (MIT license)\n3. **Hash IDs:** Content-based SHA256 with adaptive scaling (6→7→8 chars), collision probability \u003c 2.27% at 10K issues\n4. **PGLite Compatibility:** ✅ Works IF exporting projection snapshots (not raw events) using same JSONL schema\n\n## Recommendation\n**Adopt beads' proven architecture:** Export projections as JSONL, keep event log local, reuse beads merge driver. Don't reinvent git sync.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T10:50:43.222983-08:00","updated_at":"2025-12-15T10:54:53.909202-08:00","closed_at":"2025-12-15T10:54:53.909202-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-5cvcc.4","depends_on_id":"opencode-swarm-plugin-5cvcc","type":"parent-child","created_at":"2025-12-15T10:50:43.223669-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5cvcc.5","title":"Synthesize findings and write feasibility report","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T10:50:43.294268-08:00","updated_at":"2025-12-15T11:05:02.599624-08:00","closed_at":"2025-12-15T11:05:02.599624-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-5cvcc.5","depends_on_id":"opencode-swarm-plugin-5cvcc","type":"parent-child","created_at":"2025-12-15T10:50:43.29513-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-5jmtq","title":"agent-mail.ts:221-245 - Race condition in checkWindow Redis pipeline","description":"agent-mail.ts:221-245 (rate-limiter.ts transplanted) - The Redis checkWindow uses pipeline but doesn't handle the case where pipeline.exec() returns null. Network failure or Redis disconnect returns null, causing undefined access on results[1]?.[1]. Suggested fix: Check for null results before accessing.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:06.13131-08:00","updated_at":"2025-12-13T08:52:57.081406-08:00","closed_at":"2025-12-13T08:52:57.081406-08:00"}
{"id":"opencode-swarm-plugin-5quov","title":"Gap: isDatabaseHealthy swallows errors silently","description":"src/streams/index.ts:220-230 - isDatabaseHealthy() returns false on any error but doesn't log what failed. In production, you'd want to know WHY health check failed (connection refused, timeout, corrupted DB). Should log the caught error before returning false. Also consider returning error details for diagnostics.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:26.470966-08:00","updated_at":"2025-12-13T09:55:54.723524-08:00","closed_at":"2025-12-13T09:55:54.723524-08:00"}
{"id":"opencode-swarm-plugin-5xy17","title":"Swarm should support research task decomposition with pdf-brain","description":"Currently swarm coordinator treats \"research\" tasks as single-agent work. Should decompose research into parallel agents that:\n\n1. Search different sources (pdf-brain, repo-crawl, cass, web)\n2. Focus on different aspects of the question\n3. Synthesize findings into coherent answer\n\nExample decomposition for \"debug levers for agent mail\":\n- Agent 1: Search pdf-brain for \"agent debugging\", \"MCP server configuration\"\n- Agent 2: Crawl the repo README, .env.example, config.py\n- Agent 3: Search cass for past sessions dealing with agent-mail errors\n- Agent 4: Synthesize findings from other agents\n\nStrategy selection should recognize research keywords:\n- research, investigate, explore, find, discover, understand, learn, analyze\n\nTool availability check:\n- If pdf-brain available, include PDF search subtask\n- If repo-crawl available, include repo exploration subtask\n- If cass available, include history search subtask\n\nFiles: src/swarm.ts (add research strategy), src/tool-availability.ts","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T10:59:41.26917-08:00","updated_at":"2025-12-10T11:01:35.90704-08:00","closed_at":"2025-12-10T11:01:35.90704-08:00"}
{"id":"opencode-swarm-plugin-62afc","title":"Gap: Reservation conflicts detected but still grants reservation","description":"src/streams/agent-mail.ts:373-416 - reserveAgentFiles() checks conflicts (line 386-391) but ALWAYS creates reservations afterward (line 393-400). Conflicts are returned to caller but reservation is granted anyway. This is wrong - should NOT grant reservation if conflicts exist. Fix: return conflicts without creating reservations, or add flag to force reservation despite conflicts.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-13T09:25:20.417963-08:00","updated_at":"2025-12-13T09:34:09.124759-08:00","closed_at":"2025-12-13T09:34:09.124759-08:00"}
{"id":"opencode-swarm-plugin-66ni8","title":"README rewrite with full repo context","description":"## Context Captured\n\n### Repo Structure (74k lines total)\n```\nsrc/\n├── index.ts              # Plugin entry, exports all tools\n├── plugin.ts             # Plugin loader (23 lines)\n├── swarm.ts              # Swarm tools aggregator (35 lines)\n│\n├── # SWARM COORDINATION (5k lines)\n├── swarm-orchestrate.ts  # 2298 lines - swarm_status, swarm_progress, swarm_complete, swarm_checkpoint, swarm_recover\n├── swarm-decompose.ts    # 912 lines - swarm_decompose, swarm_validate_decomposition\n├── swarm-prompts.ts      # 828 lines - swarm_spawn_subtask, swarm_subtask_prompt\n├── swarm-strategies.ts   # 407 lines - swarm_select_strategy (file/feature/risk/research)\n│\n├── # BEADS (git-backed issues)\n├── beads.ts              # beads_create, beads_create_epic, beads_query, beads_update, beads_close, beads_start, beads_ready, beads_sync\n│\n├── # SWARM MAIL (agent coordination)\n├── swarm-mail.ts         # 739 lines - swarmmail_init, swarmmail_send, swarmmail_inbox, swarmmail_reserve, swarmmail_release\n├── agent-mail.ts         # DEPRECATED MCP-based version\n│\n├── # SKILLS (knowledge packages)\n├── skills.ts             # 1533 lines - skills_list, skills_use, skills_read, skills_create, skills_init, skills_update, skills_delete\n│\n├── # STRUCTURED OUTPUT\n├── structured.ts         # 755 lines - structured_extract_json, structured_validate, structured_parse_*\n│\n├── # LEARNING SYSTEM\n├── learning.ts           # Confidence decay, implicit feedback scoring\n├── pattern-maturity.ts   # candidate → established → proven lifecycle\n├── anti-patterns.ts      # Auto-inversion of failing patterns\n├── eval-capture.ts       # Outcome capture for evals\n│\n├── # STORAGE \u0026 STREAMS (event sourcing)\n├── streams/\n│   ├── index.ts          # PGLite database management\n│   ├── store.ts          # Append-only event log\n│   ├── events.ts         # 15+ event types (agent_registered, message_sent, file_reserved, swarm_checkpointed, etc.)\n│   ├── projections.ts    # Materialized views (agents, messages, reservations, eval_records)\n│   ├── migrations.ts     # Schema migrations v1-v4\n│   ├── effect/           # Durable primitives (DurableCursor, DurableDeferred, DurableLock, DurableMailbox, ask pattern)\n│   └── debug.ts          # Debugging utilities\n│\n├── # OTHER\n├── storage.ts            # File-based storage utilities\n├── rate-limiter.ts       # Redis/SQLite rate limiting\n├── repo-crawl.ts         # GitHub repo analysis tools\n├── output-guardrails.ts  # MCP output validation\n├── mandates.ts           # Mandate system (deprecated?)\n└── schemas/              # Zod schemas for all data types\n\nglobal-skills/            # Bundled skills\n├── cli-builder/\n├── learning-systems/\n├── skill-creator/\n├── swarm-coordination/\n├── system-design/\n└── testing-patterns/\n\nevals/                    # Evalite integration\n├── swarm-decomposition.eval.ts\n├── lib/data-loader.ts    # PGLite eval data loader\n└── scorers/              # Outcome-based scorers\n```\n\n### Tool Groups\n- **Swarm**: 12 tools (init, select_strategy, plan_prompt, decompose, validate_decomposition, spawn_subtask, status, progress, complete, record_outcome, checkpoint, recover)\n- **Beads**: 9 tools (create, create_epic, query, update, close, start, ready, sync, link_thread)\n- **Swarm Mail**: 8 tools (init, send, inbox, read_message, reserve, release, ack, health)\n- **Skills**: 7 tools (list, use, read, create, init, update, delete)\n- **Structured**: 5 tools (extract_json, validate, parse_evaluation, parse_decomposition, parse_bead_tree)\n\n### Key Concepts to Explain\n1. **Swarm flow**: task → decomposition → beads → file reservations → parallel agents → learning\n2. **Checkpoint/recovery**: survives context compaction (NEW)\n3. **Learning loop**: outcomes → confidence decay → pattern maturity → anti-pattern inversion\n4. **Event sourcing**: append-only log → materialized views → crash recovery\n5. **Skills**: reusable knowledge packages with references\n\n### v0.21.0 Changelog\n- Swarm recovery context (swarm_checkpoint, swarm_recover, auto-checkpoint at 25/50/75%)\n- Eval data capture (DecompositionGeneratedEvent, SubtaskOutcomeEvent, eval_records table)\n- Outcome-based scorers (fileOverlap, scopeAccuracy, timeBalance, successRate, humanAcceptance)\n- PGLite data loader for Evalite\n- JSONB parsing fix in store.ts/projections.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T13:40:47.478855-08:00","updated_at":"2025-12-14T14:29:15.955044-08:00","closed_at":"2025-12-14T14:29:15.955044-08:00"}
{"id":"opencode-swarm-plugin-68y4o","title":"Epic: Superpowers Pattern Integration - Verification, CSO, 3-Strike, Socratic","description":"## Goal\nIntegrate the best patterns from obra/superpowers analysis into opencode-swarm-plugin.\n\n## Features to Implement\n\n### 1. Verification Gate in swarm_complete\nAdd the Gate Function (IDENTIFY → RUN → READ → VERIFY → CLAIM) to swarm_complete:\n- Run UBS scan (already exists)\n- Run typecheck\n- Verify tests pass\n- Only then mark complete\n- Block completion if verification fails\n\n**Files:** src/swarm.ts (swarm_complete function)\n\n### 2. CSO Validation in skills_create\nAdd Claude Search Optimization validation when creating skills:\n- Description starts with \"Use when...\"\n- Description \u003c 500 chars (warn if \u003e 1024)\n- Third-person only (no \"I\", \"you\")\n- Contains trigger keywords\n- Name follows conventions (gerunds, verb-first)\n\n**Files:** src/skills.ts (skills_create function)\n\n### 3. 3-Strike Detection in debug-plus\nTrack fix attempts per issue. After 3 failures:\n- STOP and surface architecture question\n- Don't attempt Fix #4\n- Require human decision before continuing\n\n**Files:** examples/commands/debug-plus.md (or create if doesn't exist)\n\n### 4. Socratic Strategy for Swarm\nAdd \"socratic\" strategy to swarm decomposition:\n- Detect ambiguous tasks (no files, vague verbs, large scope)\n- One question at a time refinement\n- Multiple choice preferred\n- 200-300 word validation sections\n- Auto-transition to decomposition when validated\n\n**Files:** src/swarm.ts (swarm_select_strategy, swarm_plan_prompt)\n\n### 5. Coordinator Context Preservation Pattern\nUpdate swarm coordinator workflow to:\n- Create planning bead with full context FIRST\n- Delegate planning to subagent (not main thread)\n- Subagent returns structured BeadTree JSON\n- Coordinator validates and creates beads\n\n**Files:** examples/commands/swarm.md, global-skills/swarm-coordination/SKILL.md\n\n## Reference Documents\n- docs/analysis-socratic-planner-pattern.md\n- VERIFICATION_QUALITY_PATTERNS.md\n- docs/analysis/subagent-coordination-patterns.md\n- .beads/analysis/skill-architecture-meta-skills.md\n\n## Pattern Beads (for reference)\n- opencode-swarm-plugin-xwlda (Socratic Planner)\n- opencode-swarm-plugin-cyc8w (Verification Before Completion)\n- opencode-swarm-plugin-9lksy (3-Strike Architecture Rule)\n- opencode-swarm-plugin-2klp9 (CSO)\n\n## Success Criteria\n- swarm_complete blocks on failed verification\n- skills_create warns on poor CSO\n- debug-plus stops after 3 failed fixes\n- /swarm detects ambiguous tasks and refines them\n- Coordinator delegates planning to subagent","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-13T14:07:39.259162-08:00","updated_at":"2025-12-13T15:51:02.161099-08:00","closed_at":"2025-12-13T15:51:02.161099-08:00"}
{"id":"opencode-swarm-plugin-6bq","title":"Test link","description":"[thread:test-123]","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:36:39.895527-08:00","updated_at":"2025-12-08T08:36:25.487657-08:00","closed_at":"2025-12-08T08:36:25.487657-08:00"}
{"id":"opencode-swarm-plugin-6efn9","title":"Document why GET instead of HEAD in urlReachable","description":"src/tool-availability.ts:64-68 - Comment says \"Use GET instead of HEAD - some servers don't support HEAD\" but doesn't clarify that we check .ok, not response body. Add: \"We only check response.ok status, not body content, so GET has minimal overhead vs HEAD.\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:04.446096-08:00","updated_at":"2025-12-13T16:41:51.189901-08:00","closed_at":"2025-12-13T16:41:51.189901-08:00"}
{"id":"opencode-swarm-plugin-6ekgq","title":"Restore README flavor to docs site","description":"Bring the compelling problem/solution framing, ASCII art, and 'what makes it different' content from README.md into the docs site. Add the comprehensive swarm-mail-architecture.md to docs. Emphasize that the plugin is the immediately useful thing.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T18:30:30.621333-08:00","updated_at":"2025-12-15T18:37:08.621727-08:00","closed_at":"2025-12-15T18:37:08.621727-08:00"}
{"id":"opencode-swarm-plugin-6ekgq.1","title":"Add swarm-mail-architecture.md to docs as deep-dive page","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T18:30:30.700902-08:00","updated_at":"2025-12-15T18:37:05.373041-08:00","closed_at":"2025-12-15T18:37:05.373041-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ekgq.1","depends_on_id":"opencode-swarm-plugin-6ekgq","type":"parent-child","created_at":"2025-12-15T18:30:30.701735-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ekgq.2","title":"Rewrite docs homepage with README problem/solution framing","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T18:30:30.776519-08:00","updated_at":"2025-12-15T18:37:06.040389-08:00","closed_at":"2025-12-15T18:37:06.040389-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ekgq.2","depends_on_id":"opencode-swarm-plugin-6ekgq","type":"parent-child","created_at":"2025-12-15T18:30:30.777622-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ekgq.3","title":"Create web app landing page with value proposition","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T18:30:30.850273-08:00","updated_at":"2025-12-15T18:37:07.33017-08:00","closed_at":"2025-12-15T18:37:07.33017-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ekgq.3","depends_on_id":"opencode-swarm-plugin-6ekgq","type":"parent-child","created_at":"2025-12-15T18:30:30.850989-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ocg","title":"Add rate limiting to Agent Mail server","description":"Implement per-agent rate limiting with Redis primary and SQLite fallback. Prevents abuse and runaway agents.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T08:34:33.28449-08:00","updated_at":"2025-12-08T08:35:41.856259-08:00","closed_at":"2025-12-08T08:35:41.856259-08:00"}
{"id":"opencode-swarm-plugin-6ocg.1","title":"Add rate limiter module with Redis/SQLite backends","description":"Create rate_limiter.py with RateLimiter class. Redis primary (sliding window with sorted sets), SQLite fallback (COUNT query). Configurable limits per endpoint.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:34:44.240115-08:00","updated_at":"2025-12-08T08:35:42.506425-08:00","closed_at":"2025-12-08T08:35:42.506425-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ocg.1","depends_on_id":"opencode-swarm-plugin-6ocg","type":"parent-child","created_at":"2025-12-08T08:34:44.240449-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ocg.2","title":"Integrate rate limiting into send_message endpoint","description":"Add rate limit check to tool_send_message. Return 429 with retry-after header when exceeded. Track by agent_id.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:34:44.278972-08:00","updated_at":"2025-12-08T08:35:43.041616-08:00","closed_at":"2025-12-08T08:35:43.041616-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ocg.2","depends_on_id":"opencode-swarm-plugin-6ocg","type":"parent-child","created_at":"2025-12-08T08:34:44.279328-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ocg.3","title":"Add rate limit configuration and Docker setup","description":"Add Redis to docker-compose.yml. Add RATE_LIMIT_* env vars. Update requirements.txt with redis-py.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:34:44.317207-08:00","updated_at":"2025-12-08T08:35:43.593244-08:00","closed_at":"2025-12-08T08:35:43.593244-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ocg.3","depends_on_id":"opencode-swarm-plugin-6ocg","type":"parent-child","created_at":"2025-12-08T08:34:44.317517-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6ocg.4","title":"Add rate limiter integration tests","description":"Test rate limiting behavior: limit enforcement, Redis failover to SQLite, 429 responses, retry-after headers.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:34:44.355231-08:00","updated_at":"2025-12-08T08:35:44.087082-08:00","closed_at":"2025-12-08T08:35:44.087082-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-6ocg.4","depends_on_id":"opencode-swarm-plugin-6ocg","type":"parent-child","created_at":"2025-12-08T08:34:44.355586-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-6tb8u","title":"beads.ts:163-172 - No validation of bd create output before parsing","description":"beads.ts:163-172 - beads_create assumes bd create --json always returns valid JSON. If bd crashes or returns non-JSON error, parseBead throws generic error. Suggested fix: Check if stdout is empty or contains \"error\" before parsing.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:11.381852-08:00","updated_at":"2025-12-10T11:59:34.843893-08:00","closed_at":"2025-12-10T11:59:34.843893-08:00"}
{"id":"opencode-swarm-plugin-6x0s9","title":"Gap: Race condition in singleton creation","description":"src/streams/index.ts:58-78 - getDatabase() has race condition: two concurrent calls with same dbPath could both pass the `if (db)` check before either sets the instance in the Map, causing duplicate PGLite instances. Should use async lock/mutex or check-and-set pattern with await. Consider using a Promise cache instead of instance cache to handle pending initialization.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:24:53.052581-08:00","updated_at":"2025-12-13T09:55:52.819054-08:00","closed_at":"2025-12-13T09:55:52.819054-08:00"}
{"id":"opencode-swarm-plugin-733n9","title":"Docs IA Restructure - User Intent Navigation","description":"Reorganize docs from type-based tabs (Guide/Reference/Research) to user-intent structure (getting-started, packages, concepts, decisions). Migrate internal docs from packages/opencode-swarm-plugin/docs/ to web docs.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T13:19:33.014671-08:00","updated_at":"2025-12-15T13:33:55.828217-08:00","closed_at":"2025-12-15T13:33:55.828217-08:00"}
{"id":"opencode-swarm-plugin-733n9.1","title":"Create new directory structure and meta.json files","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-15T13:19:33.095727-08:00","updated_at":"2025-12-15T13:20:37.79096-08:00","closed_at":"2025-12-15T13:20:37.79096-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.1","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.096662-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-733n9.2","title":"Migrate getting-started content from guide/","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:19:33.166405-08:00","updated_at":"2025-12-15T13:24:52.68428-08:00","closed_at":"2025-12-15T13:24:52.68428-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.2","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.167847-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-733n9.3","title":"Create packages/swarm-mail/ docs from architecture doc","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:19:33.244233-08:00","updated_at":"2025-12-15T13:26:35.99293-08:00","closed_at":"2025-12-15T13:26:35.99293-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.3","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.244989-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-733n9.4","title":"Create packages/opencode-plugin/ docs","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:19:33.318352-08:00","updated_at":"2025-12-15T13:28:10.048955-08:00","closed_at":"2025-12-15T13:28:10.048955-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.4","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.319179-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-733n9.5","title":"Migrate ADRs and EDRs to decisions/","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:19:33.403328-08:00","updated_at":"2025-12-15T13:28:05.52724-08:00","closed_at":"2025-12-15T13:28:05.52724-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.5","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.404153-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-733n9.6","title":"Create concepts/ and archive/, update layout and links","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:19:33.485447-08:00","updated_at":"2025-12-15T13:33:54.125558-08:00","closed_at":"2025-12-15T13:33:54.125558-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-733n9.6","depends_on_id":"opencode-swarm-plugin-733n9","type":"parent-child","created_at":"2025-12-15T13:19:33.486492-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-76d9t","title":"Extract magic number 2000 to constant in tool-availability.ts","description":"src/tool-availability.ts:58 - Default timeout 2000ms is magic number. Extract to constant: `const DEFAULT_URL_TIMEOUT_MS = 2000;` for clarity and reusability.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:01.336168-08:00","updated_at":"2025-12-13T16:41:50.541178-08:00","closed_at":"2025-12-13T16:41:50.541178-08:00"}
{"id":"opencode-swarm-plugin-7aapx","title":"Add optional dependencies setup instructions to README and docs","description":"Add setup instructions for CASS, UBS, and semantic-memory to:\n1. packages/opencode-swarm-plugin/README.md\n2. apps/web/content/docs/index.mdx\n\nThese optional dependencies significantly enhance the experience:\n- CASS: Historical context for decomposition\n- UBS: Bug scanning on completion\n- semantic-memory: Learning persistence across sessions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T19:04:08.518627-08:00","updated_at":"2025-12-15T19:05:50.893253-08:00","closed_at":"2025-12-15T19:05:50.893253-08:00"}
{"id":"opencode-swarm-plugin-7lb2r","title":"Set up OIDC CI/CD via GitHub Actions for npm publishing","description":"## Goal\nConfigure trusted publishing for both npm packages using GitHub Actions OIDC - no long-lived npm tokens needed.\n\n## Packages\n- `swarm-mail` (packages/swarm-mail)\n- `opencode-swarm-plugin` (packages/opencode-swarm-plugin)\n\n## Steps\n\n### 1. Configure Trusted Publishers on npmjs.com\nFor each package, go to Settings → Trusted Publisher:\n- Organization: `joelhooks`\n- Repository: `opencode-swarm-plugin`\n- Workflow filename: `publish.yml`\n- Environment: `npm` (optional, for deployment protection)\n\n### 2. Create GitHub Actions Workflow\nCreate `.github/workflows/publish.yml`:\n\n```yaml\nname: Publish Packages\n\non:\n  push:\n    tags:\n      - 'v*'\n\npermissions:\n  id-token: write  # Required for OIDC\n  contents: read\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n          registry-url: 'https://registry.npmjs.org'\n\n      - uses: oven-sh/setup-bun@v2\n        with:\n          bun-version: latest\n\n      - name: Update npm (need 11.5.1+ for OIDC)\n        run: npm install -g npm@latest\n\n      - name: Install dependencies\n        run: bun install\n\n      - name: Build packages\n        run: bun turbo build\n\n      - name: Run tests\n        run: bun turbo test\n\n      - name: Publish swarm-mail\n        working-directory: packages/swarm-mail\n        run: npm publish --access public\n\n      - name: Publish opencode-swarm-plugin\n        working-directory: packages/opencode-swarm-plugin\n        run: npm publish --access public\n```\n\n### 3. Security Best Practices\n- [ ] Enable \"Require two-factor authentication and disallow tokens\" on npmjs.com after verifying OIDC works\n- [ ] Revoke any existing automation tokens\n- [ ] Provenance attestations will be auto-generated (cryptographic proof of build origin)\n\n### 4. Release Process\n```bash\n# Bump versions in both package.json files\n# Then tag and push:\ngit tag v0.23.0\ngit push origin v0.23.0\n```\n\n## Requirements\n- npm CLI 11.5.1+ (for OIDC support)\n- GitHub-hosted runners (self-hosted not supported yet)\n- Public repository (for provenance generation)\n\n## References\n- [npm Trusted Publishing Docs](https://docs.npmjs.com/generating-provenance-statements#publishing-packages-with-provenance-via-github-actions)\n- [GitHub OIDC Docs](https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:50:13.250083-08:00","updated_at":"2025-12-14T20:00:00.789685-08:00","closed_at":"2025-12-14T20:00:00.789685-08:00"}
{"id":"opencode-swarm-plugin-7swlo","title":"rate-limiter.ts:607 - Redis connection error swallowed, no retry","description":"rate-limiter.ts:607 - createRateLimiter catches Redis errors and falls back to SQLite immediately. No retry logic or connection validation beyond initial ping. Transient failures cause permanent fallback. Suggested fix: Retry connection with backoff before fallback.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:23.76291-08:00","updated_at":"2025-12-10T11:56:20.337157-08:00","closed_at":"2025-12-10T11:56:20.337157-08:00"}
{"id":"opencode-swarm-plugin-7uogs","title":"beads.ts:509-532 - beads_sync timeout implementation is buggy","description":"beads.ts:509-532 - withTimeout creates timeout promise but never clears the setTimeout if operation succeeds first. Causes lingering timers that reject after function returns. Suggested fix: Clear timeout in finally block of Promise.race.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:15.841975-08:00","updated_at":"2025-12-10T11:58:58.025223-08:00","closed_at":"2025-12-10T11:58:58.025223-08:00"}
{"id":"opencode-swarm-plugin-7vk","title":"Docker integration test infrastructure","description":"Create Docker-based integration test environment with real beads CLI and Agent Mail server for testing all plugin modules without mocks","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-07T19:24:33.121213-08:00","updated_at":"2025-12-07T19:33:04.935529-08:00","closed_at":"2025-12-07T19:33:04.935529-08:00"}
{"id":"opencode-swarm-plugin-7vk.1","title":"Create Docker infrastructure (Dockerfile + compose)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T19:24:38.792005-08:00","updated_at":"2025-12-07T19:28:00.040282-08:00","closed_at":"2025-12-07T19:28:00.040282-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7vk.1","depends_on_id":"opencode-swarm-plugin-7vk","type":"parent-child","created_at":"2025-12-07T19:24:38.79237-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7vk.2","title":"Create Agent Mail service container","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T19:24:38.826876-08:00","updated_at":"2025-12-07T19:28:00.067327-08:00","closed_at":"2025-12-07T19:28:00.067327-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7vk.2","depends_on_id":"opencode-swarm-plugin-7vk","type":"parent-child","created_at":"2025-12-07T19:24:38.827195-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7vk.3","title":"Write beads integration tests","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:24:38.858325-08:00","updated_at":"2025-12-07T19:32:59.293932-08:00","closed_at":"2025-12-07T19:32:59.293932-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7vk.3","depends_on_id":"opencode-swarm-plugin-7vk","type":"parent-child","created_at":"2025-12-07T19:24:38.858657-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7vk.4","title":"Write agent-mail integration tests","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:24:38.890283-08:00","updated_at":"2025-12-07T19:32:59.324527-08:00","closed_at":"2025-12-07T19:32:59.324527-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7vk.4","depends_on_id":"opencode-swarm-plugin-7vk","type":"parent-child","created_at":"2025-12-07T19:24:38.890586-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7vk.5","title":"Write swarm integration tests + update package.json","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:24:38.92166-08:00","updated_at":"2025-12-07T19:32:59.349281-08:00","closed_at":"2025-12-07T19:32:59.349281-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7vk.5","depends_on_id":"opencode-swarm-plugin-7vk","type":"parent-child","created_at":"2025-12-07T19:24:38.921953-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7x3pk","title":"Improve semantic memory usage patterns","description":"Fix test pollution, add auto-capture hooks, update agent prompts, and define clear memory triggers for proactive learning storage. FORCE agents to use semantic-memory and swarm mail at every opportunity.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T14:34:04.14035-08:00","updated_at":"2025-12-14T14:47:53.151758-08:00","closed_at":"2025-12-14T14:47:53.151758-08:00"}
{"id":"opencode-swarm-plugin-7x3pk.1","title":"Add test isolation + monitoring/logging for memory operations","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:34:04.20286-08:00","updated_at":"2025-12-14T14:47:47.479252-08:00","closed_at":"2025-12-14T14:47:47.479252-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7x3pk.1","depends_on_id":"opencode-swarm-plugin-7x3pk","type":"parent-child","created_at":"2025-12-14T14:34:04.204815-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7x3pk.2","title":"Update all integration tests to use isolated collections","description":"✅ Completed: Updated all integration tests to use isolated collections.\n\n**Changes:**\n- learning.integration.test.ts: Added unique collection names with timestamps, added afterEach cleanup\n\n**Verified:**\n- storage.integration.test.ts: Already using isolated collections ✓\n- swarm-mail.integration.test.ts: Already using unique db paths ✓\n- All streams/* tests: Already using unique temp paths ✓\n- rate-limiter.integration.test.ts: Already using unique temp dirs ✓\n\n**Pattern documented in semantic-memory for future reference**","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:34:04.259594-08:00","updated_at":"2025-12-14T14:47:48.373226-08:00","closed_at":"2025-12-14T14:47:48.373226-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7x3pk.2","depends_on_id":"opencode-swarm-plugin-7x3pk","type":"parent-child","created_at":"2025-12-14T14:34:04.260752-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7x3pk.3","title":"Add automatic memory capture hook in swarm_complete","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:34:04.319433-08:00","updated_at":"2025-12-14T14:47:49.36759-08:00","closed_at":"2025-12-14T14:47:49.36759-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7x3pk.3","depends_on_id":"opencode-swarm-plugin-7x3pk","type":"parent-child","created_at":"2025-12-14T14:34:04.320428-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7x3pk.4","title":"Define MANDATORY memory triggers and swarm mail usage in AGENTS.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:34:04.379325-08:00","updated_at":"2025-12-14T14:47:50.635175-08:00","closed_at":"2025-12-14T14:47:50.635175-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7x3pk.4","depends_on_id":"opencode-swarm-plugin-7x3pk","type":"parent-child","created_at":"2025-12-14T14:34:04.380061-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-7x3pk.5","title":"Audit and clean existing test pollution, document learnings","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:34:04.439992-08:00","updated_at":"2025-12-14T14:47:52.035028-08:00","closed_at":"2025-12-14T14:47:52.035028-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-7x3pk.5","depends_on_id":"opencode-swarm-plugin-7x3pk","type":"parent-child","created_at":"2025-12-14T14:34:04.440785-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-83iwu","title":"Define DatabaseAdapter and SwarmMailAdapter interfaces","description":"Create the core interfaces that make swarm-mail database-agnostic.\n\n## Files\n- packages/swarm-mail/src/types/database.ts - DatabaseAdapter interface\n- packages/swarm-mail/src/types/adapter.ts - SwarmMailAdapter interface\n- packages/swarm-mail/src/types/index.ts - Re-exports\n\n## DatabaseAdapter Interface\n```typescript\nexport interface DatabaseAdapter {\n  query\u003cT\u003e(sql: string, params?: unknown[]): Promise\u003c{ rows: T[] }\u003e;\n  exec(sql: string): Promise\u003cvoid\u003e;\n  // Optional transaction support\n  transaction?\u003cT\u003e(fn: (tx: DatabaseAdapter) =\u003e Promise\u003cT\u003e): Promise\u003cT\u003e;\n}\n```\n\n## SwarmMailAdapter Interface\n```typescript\nexport interface SwarmMailAdapter {\n  // Core\n  readonly db: DatabaseAdapter;\n  \n  // Event store\n  appendEvent(event: AgentEvent): Promise\u003cAgentEvent \u0026 { id: number; sequence: number }\u003e;\n  appendEvents(events: AgentEvent[]): Promise\u003cArray\u003cAgentEvent \u0026 { id: number; sequence: number }\u003e\u003e;\n  readEvents(options?: ReadEventsOptions): Promise\u003cArray\u003cAgentEvent \u0026 { id: number; sequence: number }\u003e\u003e;\n  \n  // Agent registration\n  registerAgent(projectKey: string, agentName: string, options?: AgentOptions): Promise\u003cvoid\u003e;\n  \n  // Messaging\n  sendMessage(input: SendMessageInput): Promise\u003cMessage\u003e;\n  getInbox(agentName: string, options?: InboxOptions): Promise\u003cMessage[]\u003e;\n  readMessage(messageId: number): Promise\u003cMessage | null\u003e;\n  acknowledgeMessage(messageId: number, agentName: string): Promise\u003cvoid\u003e;\n  \n  // File reservations\n  reserveFiles(agentName: string, paths: string[], options?: ReserveOptions): Promise\u003cReservation[]\u003e;\n  releaseFiles(agentName: string, paths?: string[]): Promise\u003cnumber\u003e;\n  getActiveReservations(projectKey: string): Promise\u003cReservation[]\u003e;\n  checkConflicts(paths: string[]): Promise\u003cConflict[]\u003e;\n  \n  // Distributed locks (Effect primitives)\n  acquireLock(resource: string, holder: string, options?: LockOptions): Promise\u003cLock\u003e;\n  releaseLock(resource: string, holder: string): Promise\u003cboolean\u003e;\n  \n  // Schema management\n  runMigrations(): Promise\u003c{ applied: number }\u003e;\n  \n  // Health\n  healthCheck(): Promise\u003c{ ok: boolean; error?: string }\u003e;\n}\n```\n\n## Success Criteria\n- Interfaces are minimal but complete\n- No PGLite-specific types leak into interfaces\n- Types are exported from package root","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:57:27.755266-08:00","updated_at":"2025-12-14T16:02:58.586251-08:00","closed_at":"2025-12-14T16:02:58.586251-08:00"}
{"id":"opencode-swarm-plugin-8evxm","title":"storage.ts:276-305 - Silent failures in list() method","description":"src/storage.ts:276-305 - Similar to find(), list() silently returns empty array on failures (non-zero exitCode or parse errors). No logging. Suggested fix: Log warnings for exitCode failures and JSON parse errors.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:05:51.902453-08:00","updated_at":"2025-12-10T11:58:00.473526-08:00","closed_at":"2025-12-10T11:58:00.473526-08:00"}
{"id":"opencode-swarm-plugin-8j4v","title":"Debug test","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:39:48.012695-08:00","updated_at":"2025-12-07T19:39:53.542819-08:00","closed_at":"2025-12-07T19:39:53.542819-08:00"}
{"id":"opencode-swarm-plugin-8kiel","title":"Gap: No migration strategy from MCP to event-sourced","description":"src/streams/agent-mail.ts - No migration path documented or implemented for users moving from MCP-based agent-mail to embedded PGLite. Need: migration tool to export MCP data and import as events, documentation on migration steps, backward compatibility layer, or at minimum clear upgrade guide. Consider: \"migrate-from-mcp\" command, schema version detection, auto-migration on first run.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:00.37956-08:00","updated_at":"2025-12-13T16:42:00.823655-08:00","closed_at":"2025-12-13T16:42:00.823655-08:00"}
{"id":"opencode-swarm-plugin-8npbb","title":"rate-limiter.ts:328 - Opportunistic cleanup without bounds","description":"rate-limiter.ts:328 - SqliteRateLimiter cleanup happens 1% of the time but could delete large datasets without limit or batching. On large DBs, this blocks recordRequest. Suggested fix: Add LIMIT clause or batch deletion.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-10T09:06:18.513101-08:00","updated_at":"2025-12-13T15:59:42.483297-08:00","closed_at":"2025-12-13T15:59:42.483297-08:00"}
{"id":"opencode-swarm-plugin-8qe8e","title":"Add JSDoc examples to CriterionEvaluation","description":"src/schemas/evaluation.ts:19-24 - CriterionEvaluationSchema lacks usage example. Add JSDoc with example: `{ passed: true, feedback: \"All types validated\", score: 0.95 }`","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:13.139472-08:00","updated_at":"2025-12-13T16:48:07.364425-08:00","closed_at":"2025-12-13T16:48:07.364425-08:00"}
{"id":"opencode-swarm-plugin-95o6e","title":"Add better error message for empty response in structured_validate","description":"src/structured.ts:374-385 - When JSON extraction fails, error just shows \"JSON extraction failed\". Add check for empty/whitespace-only input and provide specific message: \"Response is empty or contains only whitespace\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:51.941683-08:00","updated_at":"2025-12-13T16:45:46.102955-08:00","closed_at":"2025-12-13T16:45:46.102955-08:00"}
{"id":"opencode-swarm-plugin-9bwp7","title":"Swarm Plugin Improvements from AI Agent Pattern Research","description":"Improvements derived from PDF library research (Patterns for Building AI Agents, Principles of Building AI Agents). Focus on context engineering, error handling, and coordination patterns.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T10:02:46.552187-08:00","updated_at":"2025-12-10T11:11:22.345794-08:00","closed_at":"2025-12-10T11:11:22.345794-08:00"}
{"id":"opencode-swarm-plugin-9bwp7.1","title":"Add swarm_compress_context tool for inter-subtask context pruning","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T10:02:46.602046-08:00","updated_at":"2025-12-10T10:09:07.1119-08:00","closed_at":"2025-12-10T10:09:07.1119-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.1","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.603062-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9bwp7.2","title":"Add error accumulator that feeds errors into retry prompts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T10:02:46.646473-08:00","updated_at":"2025-12-10T10:14:05.802245-08:00","closed_at":"2025-12-10T10:14:05.802245-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.2","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.647689-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9bwp7.3","title":"Add failure mode taxonomy to swarm_record_outcome","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T10:02:46.693562-08:00","updated_at":"2025-12-10T11:09:21.122678-08:00","closed_at":"2025-12-10T11:09:21.122678-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.3","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.695053-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9bwp7.4","title":"Add swarm_broadcast for mid-task context sharing between agents","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T10:02:46.743428-08:00","updated_at":"2025-12-10T11:11:11.658976-08:00","closed_at":"2025-12-10T11:11:11.658976-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.4","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.744327-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9bwp7.5","title":"Restructure SUBTASK_PROMPT with explicit context sections","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T10:02:46.790385-08:00","updated_at":"2025-12-10T11:11:12.67557-08:00","closed_at":"2025-12-10T11:11:12.67557-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.5","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.791322-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9bwp7.6","title":"Audit tool descriptions for semantic clarity","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-10T10:02:46.835414-08:00","updated_at":"2025-12-13T09:54:34.046218-08:00","closed_at":"2025-12-13T09:54:34.046218-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9bwp7.6","depends_on_id":"opencode-swarm-plugin-9bwp7","type":"parent-child","created_at":"2025-12-10T10:02:46.836428-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9gyl9","title":"Document maturity multiplier rationale in getMaturityMultiplier","description":"src/pattern-maturity.ts:319-327 - Multipliers (candidate: 0.5, established: 1.0, proven: 1.5, deprecated: 0) not explained. Add JSDoc: \"Multipliers chosen to: heavily penalize deprecated (0), slightly boost proven (1.5x), penalize unvalidated candidates (0.5x)\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:39.554601-08:00","updated_at":"2025-12-13T16:20:32.852341-08:00","closed_at":"2025-12-13T16:20:32.852341-08:00"}
{"id":"opencode-swarm-plugin-9lksy","title":"Pattern: 3-Strike Architecture Rule - Question Fundamentals After 3 Failures","description":"## 3-Strike Architecture Rule (from obra/superpowers)\n\n**Iron Law:** If 3+ fixes have failed, you have an architectural problem, not a bug.\n\n### The Rule\n```\nIF 3+ fixes have failed:\n  STOP → Question the architecture\n  DON'T attempt Fix #4\n  Discuss with human partner\n\nThis is NOT a failed hypothesis.\nThis is a WRONG ARCHITECTURE.\n```\n\n### Pattern Indicators\n- Each fix reveals new shared state/coupling/problem in different place\n- Fixes require \"massive refactoring\" to implement\n- Each fix creates new symptoms elsewhere\n- \"Sticking with it through sheer inertia\"\n\n### What To Do\n1. STOP and question fundamentals\n2. Is this pattern fundamentally sound?\n3. Should we refactor architecture vs. continue fixing symptoms?\n4. Discuss with human partner before attempting more fixes\n\n### 4-Phase Debugging Framework\n| Phase | Key Activities | Success Criteria |\n|-------|---------------|------------------|\n| 1. Root Cause | Read errors, reproduce, check changes, trace data flow | Understand WHAT and WHY |\n| 2. Pattern Analysis | Find working examples, compare, identify differences | Know what's different |\n| 3. Hypothesis | Form single theory, test minimally, one variable | Confirmed or new hypothesis |\n| 4. Implementation | Create test, fix, verify | Bug resolved |\n| **4.5. Architecture** | If 3+ failures: STOP, question pattern | Discuss with human |\n\n### Key Quote\n\"Random fixes waste time and create new bugs. Quick patches mask underlying issues. Systematic debugging is FASTER than guess-and-check thrashing.\"\n\n**Full analysis:** VERIFICATION_QUALITY_PATTERNS.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T14:00:30.082677-08:00","updated_at":"2025-12-13T15:50:53.766873-08:00","closed_at":"2025-12-13T15:50:53.766873-08:00"}
{"id":"opencode-swarm-plugin-9pbe5","title":"Analyze opencode-swarm-plugin for improvements","description":"Deep code review to identify bugs, missing tests, documentation gaps, and improvement opportunities across the plugin","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T08:43:31.027524-08:00","updated_at":"2025-12-10T09:01:57.762335-08:00","closed_at":"2025-12-10T09:01:57.762335-08:00"}
{"id":"opencode-swarm-plugin-9pbe5.1","title":"Audit core modules: beads.ts and agent-mail.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T08:43:31.074084-08:00","updated_at":"2025-12-10T09:01:54.212232-08:00","closed_at":"2025-12-10T09:01:54.212232-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9pbe5.1","depends_on_id":"opencode-swarm-plugin-9pbe5","type":"parent-child","created_at":"2025-12-10T08:43:31.075596-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9pbe5.2","title":"Audit swarm orchestration: swarm.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T08:43:31.11509-08:00","updated_at":"2025-12-10T09:01:54.837099-08:00","closed_at":"2025-12-10T09:01:54.837099-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9pbe5.2","depends_on_id":"opencode-swarm-plugin-9pbe5","type":"parent-child","created_at":"2025-12-10T08:43:31.116423-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9pbe5.3","title":"Audit learning and storage: learning.ts, storage.ts, pattern-maturity.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T08:43:31.155383-08:00","updated_at":"2025-12-10T09:01:55.457029-08:00","closed_at":"2025-12-10T09:01:55.457029-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9pbe5.3","depends_on_id":"opencode-swarm-plugin-9pbe5","type":"parent-child","created_at":"2025-12-10T08:43:31.156172-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9pbe5.4","title":"Audit schemas and structured output","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T08:43:31.192168-08:00","updated_at":"2025-12-10T09:01:56.18448-08:00","closed_at":"2025-12-10T09:01:56.18448-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9pbe5.4","depends_on_id":"opencode-swarm-plugin-9pbe5","type":"parent-child","created_at":"2025-12-10T08:43:31.19365-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9pbe5.5","title":"Audit utilities and integration","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T08:43:31.233803-08:00","updated_at":"2025-12-10T09:01:57.01093-08:00","closed_at":"2025-12-10T09:01:57.01093-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-9pbe5.5","depends_on_id":"opencode-swarm-plugin-9pbe5","type":"parent-child","created_at":"2025-12-10T08:43:31.235023-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-9v33b","title":"beads.ts:260-278 - Epic rollback may fail silently","description":"beads.ts:260-278 - beads_create_epic catches rollback errors and logs them but continues. If multiple rollbacks fail, final error message may be misleading. Suggested fix: Collect rollback errors and include them in thrown error.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:13.501819-08:00","updated_at":"2025-12-10T12:00:15.295654-08:00","closed_at":"2025-12-10T12:00:15.295654-08:00"}
{"id":"opencode-swarm-plugin-9vjvw","title":"Event-Sourced Beads: Full TypeScript Replacement","description":"Replace steveyegge/beads Go CLI with TypeScript implementation using event sourcing, Effect-TS durable streams, and adapter pattern. Lives inside swarm-mail package. Shares PGLite database. TDD throughout. Designed for future cloud/multiplayer sync.\n\n## Context Survival Protocol (ALL AGENTS MUST FOLLOW)\n\n1. **Checkpoint frequently** - After completing any significant unit of work\n2. **Bead updates are checkpoints** - Update bead description with progress summary\n3. **Commit early, commit often** - Small atomic commits preserve work\n4. **Test files are documentation** - Tests survive context loss, comments don't\n5. **If context gets heavy** - Use /checkpoint before continuing\n\n## Key References (steveyegge/beads cloned at ~/.opencode-autopsy/steveyegge/beads)\n- internal/types/types.go - Issue struct, Status, IssueType, Dependency\n- internal/storage/storage.go - Storage interface (60+ methods)\n- internal/merge/merge.go - 3-way JSONL merge (MIT, port to TS)\n\n## Architecture Decisions\n- Beads code lives in swarm-mail/src/beads/\n- Shares DatabaseAdapter with agent-mail\n- Events in shared event store, bead-specific projections\n- JSONL exports projections (not events) for git sync","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T13:39:34.57323-08:00","updated_at":"2025-12-16T13:39:44.959499-08:00","closed_at":"2025-12-16T13:39:44.959499-08:00"}
{"id":"opencode-swarm-plugin-9yo1u","title":"Pattern: TDD for Documentation - Test Skills Before Writing","description":"## TDD for Documentation (from obra/superpowers)\n\n**Core Insight:** If you didn't watch an agent fail without the skill, you don't know if the skill teaches the right thing.\n\n### TDD Mapping\n| TDD Concept | Skill Creation |\n|-------------|----------------|\n| Test case | Pressure scenario with subagent |\n| Production code | SKILL.md document |\n| Test fails (RED) | Agent violates rule without skill |\n| Test passes (GREEN) | Agent complies with skill present |\n| Refactor | Close loopholes while maintaining compliance |\n\n### The Iron Law\n```\nNO SKILL WITHOUT A FAILING TEST FIRST\n```\n\nApplies to NEW skills AND EDITS to existing skills.\n\n### RED-GREEN-REFACTOR for Skills\n**RED (Baseline):**\n1. Run pressure scenario WITHOUT skill\n2. Document exact rationalizations verbatim\n3. Note specific violations\n\n**GREEN (Write Skill):**\n1. Write skill addressing observed failures\n2. Run same scenario WITH skill\n3. Verify agent now complies\n\n**REFACTOR (Close Loopholes):**\n1. Find new rationalizations\n2. Add explicit counters\n3. Re-verify compliance\n\n### Testing by Skill Type\n- **Discipline-enforcing:** Academic questions + pressure scenarios + combined pressures\n- **Technique skills:** Application scenarios + variations + missing info tests\n- **Pattern skills:** Recognition + application + counter-examples\n- **Reference skills:** Retrieval + application + gap testing\n\n### Bulletproofing Against Rationalization\n- Close every loophole explicitly\n- Address \"spirit vs letter\" arguments early\n- Build rationalization table from baseline testing\n- Create red flags list for self-checking\n\n**Full analysis:** .beads/analysis/skill-architecture-meta-skills.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T14:01:01.518288-08:00","updated_at":"2025-12-13T15:50:55.951299-08:00","closed_at":"2025-12-13T15:50:55.951299-08:00"}
{"id":"opencode-swarm-plugin-a544q","title":"Pattern Maturity Tests + Type Consolidation","description":"Add comprehensive tests for pattern-maturity.ts and consolidate duplicated AgentMailState/SwarmMailState types into a shared MailSessionState type","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T17:34:47.29781-08:00","updated_at":"2025-12-13T17:38:45.880092-08:00","closed_at":"2025-12-13T17:38:45.880092-08:00"}
{"id":"opencode-swarm-plugin-a544q.1","title":"Add comprehensive tests for pattern-maturity.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T17:34:47.364337-08:00","updated_at":"2025-12-13T17:38:44.260206-08:00","closed_at":"2025-12-13T17:38:44.260206-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a544q.1","depends_on_id":"opencode-swarm-plugin-a544q","type":"parent-child","created_at":"2025-12-13T17:34:47.365765-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a544q.2","title":"Extract shared MailSessionState type to streams/events.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T17:34:47.424639-08:00","updated_at":"2025-12-13T17:38:45.133011-08:00","closed_at":"2025-12-13T17:38:45.133011-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a544q.2","depends_on_id":"opencode-swarm-plugin-a544q","type":"parent-child","created_at":"2025-12-13T17:34:47.425534-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a6rl7","title":"Mandate from Heaven: Agent Voting System","description":"Build a collective intelligence system where agents file and vote on ideas, tips, lore, snippets, and feature requests. High-consensus items become 'mandates' that influence future agent behavior via semantic memory.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T14:56:58.000088-08:00","updated_at":"2025-12-13T15:51:03.366671-08:00","closed_at":"2025-12-13T15:51:03.366671-08:00"}
{"id":"opencode-swarm-plugin-a6rl7.1","title":"Core schemas and types for mandate system","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T14:56:58.053657-08:00","updated_at":"2025-12-13T14:59:07.218098-08:00","closed_at":"2025-12-13T14:59:07.218098-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a6rl7.1","depends_on_id":"opencode-swarm-plugin-a6rl7","type":"parent-child","created_at":"2025-12-13T14:56:58.055878-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a6rl7.2","title":"Mandate storage with semantic-memory backend","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T14:56:58.111874-08:00","updated_at":"2025-12-13T15:05:05.736212-08:00","closed_at":"2025-12-13T15:05:05.736212-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a6rl7.2","depends_on_id":"opencode-swarm-plugin-a6rl7","type":"parent-child","created_at":"2025-12-13T14:56:58.112928-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a6rl7.3","title":"Mandate promotion engine with decay","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T14:56:58.164309-08:00","updated_at":"2025-12-13T15:05:08.587143-08:00","closed_at":"2025-12-13T15:05:08.587143-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a6rl7.3","depends_on_id":"opencode-swarm-plugin-a6rl7","type":"parent-child","created_at":"2025-12-13T14:56:58.165879-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a6rl7.4","title":"Plugin tools for mandate operations","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T14:56:58.225915-08:00","updated_at":"2025-12-13T15:50:50.367358-08:00","closed_at":"2025-12-13T15:50:50.367358-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a6rl7.4","depends_on_id":"opencode-swarm-plugin-a6rl7","type":"parent-child","created_at":"2025-12-13T14:56:58.227213-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-a6rl7.5","title":"Integration tests and plugin export","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T14:56:58.282544-08:00","updated_at":"2025-12-13T15:51:04.411257-08:00","closed_at":"2025-12-13T15:51:04.411257-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-a6rl7.5","depends_on_id":"opencode-swarm-plugin-a6rl7","type":"parent-child","created_at":"2025-12-13T14:56:58.283786-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-anlp2","title":"AI Agent Pattern Research: Plugin Improvement Analysis","description":"Research synthesis from PDF library (Patterns for Building AI Agents, Principles of Building AI Agents, Training Complex Cognitive Skills) applied to opencode-swarm-plugin improvements.\n\n## Key Patterns Identified\n\n### 1. Context Engineering (from Patterns for Building AI Agents)\n- **Current gap**: Our SUBTASK_PROMPT is verbose but lacks structured context sections\n- **Pattern**: \"Context engineering is both art and science\" - Karpathy\n- **Improvement**: Add explicit context sections: [IDENTITY] [TASK] [CONSTRAINTS] [TOOLS] [OUTPUT]\n\n### 2. Context Compression (p.37-39)\n- **Current gap**: No automatic context pruning between agent tasks\n- **Pattern**: \"Periodic context compression can prune irrelevant context\"\n- **Improvement**: Add `swarm_compress_context` tool that summarizes completed work\n\n### 3. Feed Errors Into Context (p.40)\n- **Current gap**: Errors are logged but not fed back into agent context\n- **Pattern**: \"Good agents examine and correct errors when something goes wrong\"\n- **Improvement**: Add error accumulator that feeds into retry prompts\n\n### 4. Parallelize Carefully (p.31)\n- **Current gap**: We spawn parallel agents but don't ensure context sharing\n- **Pattern**: \"Ensure subagents can share context along the way\"\n- **Improvement**: Add `swarm_broadcast` for mid-task context updates\n\n### 5. List Failure Modes (p.46)\n- **Current gap**: No classification of why agent failures occur\n- **Pattern**: \"Create classification process for agent failures\"\n- **Improvement**: Add failure taxonomy to swarm_record_outcome\n\n### 6. Tool Calling Best Practices (Principles p.36)\n- **Current gap**: Tool descriptions are functional but not semantic\n- **Pattern**: \"Use semantic naming that matches tool's purpose\"\n- **Improvement**: Audit all tool descriptions for semantic clarity\n\n### 7. Workflows as Tools (Principles p.109)\n- **Current gap**: Swarm is a command, not composable\n- **Pattern**: \"Multi-agent architecture = primitives + arrangement\"\n- **Improvement**: Make swarm_decompose callable from other workflows\n\n### 8. Implicit Feedback Scoring (already implemented)\n- **Current strength**: swarm_record_outcome tracks duration/errors/retries\n- **Enhancement**: Add strategy-specific scoring (file-based vs feature-based)\n\n## Recommended Improvements (Priority Order)\n\n1. **HIGH**: Context compression between subtasks\n2. **HIGH**: Error accumulator for retry prompts  \n3. **MEDIUM**: Failure mode taxonomy\n4. **MEDIUM**: Mid-task context broadcast\n5. **LOW**: Semantic tool description audit\n6. **LOW**: Composable workflow primitives","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T10:02:37.4266-08:00","updated_at":"2025-12-10T11:06:06.392-08:00","closed_at":"2025-12-10T11:06:06.392-08:00"}
{"id":"opencode-swarm-plugin-apsqh","title":"Durable Streams Primitives with Effect-TS","description":"Implement Kyle Matthews' composable actor-model primitives for Swarm Mail: DurableCursor (positioned consumer), DurableDeferred (distributed promise), DurableLock (mutual exclusion), DurableMailbox (actor inbox), and Ask pattern (request/response). Uses Effect-TS service layers for dependency injection and composability.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T10:01:18.517087-08:00","updated_at":"2025-12-13T10:21:05.411996-08:00","closed_at":"2025-12-13T10:21:05.411996-08:00"}
{"id":"opencode-swarm-plugin-apsqh.1","title":"Effect-TS foundation + DurableCursor service","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T10:01:18.574091-08:00","updated_at":"2025-12-13T10:12:29.546777-08:00","closed_at":"2025-12-13T10:12:29.546777-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.1","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.57601-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-apsqh.2","title":"DurableDeferred service - distributed promises","description":"DurableDeferred service implemented and tested.\n\n## Implementation Complete\n\nCreated DurableDeferred service for distributed promises:\n\n### Files Created:\n- `src/streams/effect/deferred.ts` - Full service implementation\n- `src/streams/effect/deferred.test.ts` - Comprehensive test suite\n\n### Features Implemented:\n1. **create()** - Generates unique URL, stores in DB, returns resolvable handle\n2. **resolve()** - Resolves deferred with value, updates DB + in-memory\n3. **reject()** - Rejects deferred with error, updates DB + in-memory  \n4. **value getter** - Blocks until resolved/rejected or timeout\n5. **Cleanup** - Removes expired entries from DB\n\n### Technical Details:\n- Uses Effect.Deferred internally for instant resolution\n- Falls back to DB polling when deferred not in memory\n- Implements proper timeout with `Effect.timeoutFail`\n- Type-safe with full generic support\n- JSONB storage for structured values\n\n### Tests (48 passing):\n✓ create with unique URL\n✓ resolve and return value\n✓ reject with error\n✓ timeout when not resolved within TTL  \n✓ concurrent resolvers (first wins)\n✓ cleanup expired entries\n✓ type preservation through resolution\n\nAll typechecks pass. Ready for integration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T10:01:18.632993-08:00","updated_at":"2025-12-13T10:12:30.479877-08:00","closed_at":"2025-12-13T10:12:30.479877-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.2","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.634226-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-apsqh.3","title":"DurableLock service - mutual exclusion via CAS","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T10:01:18.693584-08:00","updated_at":"2025-12-13T10:12:31.373255-08:00","closed_at":"2025-12-13T10:12:31.373255-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.3","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.695197-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-apsqh.4","title":"Schema migrations for cursor/deferred/lock tables","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T10:01:18.751343-08:00","updated_at":"2025-12-13T10:12:32.518828-08:00","closed_at":"2025-12-13T10:12:32.518828-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.4","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.752562-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-apsqh.5","title":"DurableMailbox service - actor inbox with envelope","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:01:18.808333-08:00","updated_at":"2025-12-13T10:21:02.959937-08:00","closed_at":"2025-12-13T10:21:02.959937-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.5","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.809622-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-apsqh.6","title":"Ask pattern + composed Layer exports","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:01:18.863532-08:00","updated_at":"2025-12-13T10:21:03.67534-08:00","closed_at":"2025-12-13T10:21:03.67534-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-apsqh.6","depends_on_id":"opencode-swarm-plugin-apsqh","type":"parent-child","created_at":"2025-12-13T10:01:18.866469-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-azjh4","title":"Swarm Tools Monorepo Architecture - Extract Generalized Packages","description":"## Vision\n\n**Swarm Tools** - Framework-agnostic primitives for agentic systems.\n\n- **Repo:** `swarm-tools` (rename from `opencode-swarm-plugin`)\n- **npm org:** `@swarmtools/*`\n- **Domain:** swarmtools.ai\n- **GitHub org:** github.com/swarmtools\n- **Toolchain:** Bun, Next.js + Turbopack, TypeScript, oxlint, Biome\n\n## Package Structure\n\n```\nswarm-tools/\n├── apps/\n│   └── web/                     # swarmtools.ai (Next.js + Turbopack)\n│       ├── app/\n│       ├── content/docs/        # Fumadocs MDX\n│       ├── next.config.ts\n│       ├── biome.json\n│       └── package.json\n│\n├── packages/\n│   ├── data/                    # @swarmtools/data - Foundation\n│   │   ├── adapter.ts           # DatabaseAdapter interface\n│   │   ├── pglite.ts            # PGLite implementation\n│   │   ├── migrations.ts        # Namespaced migration runner\n│   │   └── index.ts\n│   │\n│   ├── mail/                    # @swarmtools/mail - Event sourcing\n│   │   └── (existing swarm-mail, renamed)\n│   │\n│   ├── vector/                  # @swarmtools/vector - Embeddings + storage\n│   │   ├── provider.ts          # EmbeddingProvider interface\n│   │   ├── store.ts             # VectorStore interface\n│   │   ├── ollama.ts            # Ollama embeddings\n│   │   ├── openai.ts            # OpenAI embeddings\n│   │   ├── pglite.ts            # pgvector storage\n│   │   └── index.ts\n│   │\n│   ├── learning/                # @swarmtools/learning - Adaptive systems\n│   │   ├── confidence-decay.ts  # 90-day half-life scoring\n│   │   ├── pattern-maturity.ts  # candidate→established→proven\n│   │   ├── anti-patterns.ts     # Failure detection, auto-inversion\n│   │   ├── decompose.ts         # Task decomposition strategies\n│   │   └── index.ts\n│   │\n│   ├── skills/                  # @swarmtools/skills - Knowledge injection\n│   │   ├── loader.ts            # SKILL.md parser\n│   │   ├── registry.ts          # Discovery (global/project/bundled)\n│   │   ├── injection.ts         # Context formatting\n│   │   └── index.ts\n│   │\n│   ├── structured/              # @swarmtools/structured - Schema validation\n│   │   ├── schemas/             # Zod schemas\n│   │   ├── extraction.ts        # JSON from markdown/LLM output\n│   │   ├── validation.ts        # Schema validation with retries\n│   │   └── index.ts\n│   │\n│   ├── guardrails/              # @swarmtools/guardrails - Agent safety\n│   │   ├── rate-limiter.ts      # Token bucket, adaptive limits\n│   │   ├── output-guard.ts      # Size limits, truncation\n│   │   └── index.ts\n│   │\n│   └── opencode/                # @swarmtools/opencode - OpenCode plugin\n│       ├── beads.ts             # Beads integration\n│       ├── tools.ts             # Tool wrappers\n│       ├── orchestrate.ts       # Swarm coordination\n│       └── index.ts\n│\n├── turbo.json\n├── biome.json                   # Root biome config\n├── package.json                 # Workspace root\n└── bun.lock\n```\n\n## Toolchain\n\n| Tool | Purpose | Why |\n|------|---------|-----|\n| **Bun** | Runtime + package manager | Fast, native TS |\n| **Turborepo** | Monorepo orchestration | Caching, task deps |\n| **Next.js + Turbopack** | Web app | Fast dev, RSC |\n| **TypeScript** | Type safety | Obviously |\n| **oxlint** | Linting | 50-100x faster than ESLint |\n| **Biome** | Formatting + linting | Fast, replaces Prettier |\n| **Fumadocs** | Documentation | Best-in-class Next.js docs |\n| **Vercel Analytics** | Usage tracking | Native integration |\n| **Better Auth** | Authentication | GitHub OAuth via swarmtools org |\n\n## Web App (swarmtools.ai)\n\n**Build incrementally, not generated.** Start minimal:\n\n### Phase 1: Landing + Docs\n- Landing page (what is swarm tools)\n- Fumadocs for package documentation\n- Getting started guides\n- Vercel Analytics\n\n### Phase 2: Playground\n- Interactive decomposition demo\n- Skills browser\n- Pattern maturity visualization\n\n### Phase 3: Dashboard\n- Better Auth with GitHub login (github.com/swarmtools org)\n- Swarm monitoring\n- Learning analytics\n- Cross-project insights\n\n## Migration Plan\n\n### Step 1: Web App First (validate toolchain)\n- [ ] Create apps/web with Next.js + Turbopack\n- [ ] Setup Biome + oxlint\n- [ ] Add Fumadocs\n- [ ] Landing page + basic docs\n- [ ] Deploy to swarmtools.ai\n\n### Step 2: Setup npm org\n- [ ] Create `@swarmtools` npm org\n- [ ] Setup trusted publishers for org\n- [ ] Rename repo to `swarm-tools`\n\n### Step 3: Extract @swarmtools/structured (easy win)\n- [ ] Create packages/structured\n- [ ] Move schemas/, extraction.ts, validation.ts\n- [ ] Zero deps, proves the pattern\n- [ ] Publish to npm\n\n### Step 4: Extract @swarmtools/data (foundation)\n- [ ] Create packages/data\n- [ ] Extract DatabaseAdapter from swarm-mail\n- [ ] Add migration runner with namespacing\n- [ ] Update swarm-mail to depend on it\n\n### Step 5: Rename swarm-mail → @swarmtools/mail\n- [ ] Update package.json name\n- [ ] Publish @swarmtools/mail\n- [ ] Deprecate swarm-mail with pointer\n\n### Step 6: Extract remaining packages\n- [ ] @swarmtools/vector (embeddings + storage)\n- [ ] @swarmtools/learning (decay, patterns, decompose)\n- [ ] @swarmtools/skills\n- [ ] @swarmtools/guardrails\n\n### Step 7: Slim down @swarmtools/opencode\n- [ ] Remove extracted code, import from packages\n- [ ] Keep only OpenCode-specific glue\n- [ ] Deprecate opencode-swarm-plugin with pointer\n\n## Tech Decisions (Resolved)\n\n| Question | Decision | Rationale |\n|----------|----------|-----------|\n| Docs framework | **Fumadocs** | Best Next.js docs, great DX |\n| Analytics | **Vercel Analytics** | Native, privacy-friendly |\n| Auth | **Better Auth + GitHub** | Simple, org-based access via github.com/swarmtools |\n\n## Success Criteria\n\n- [ ] Each @swarmtools/* package installable independently\n- [ ] Works with any AI agent (not just OpenCode)\n- [ ] \u003c100ms cold start for @swarmtools/data\n- [ ] oxlint + biome passing across monorepo\n- [ ] Full test coverage per package\n- [ ] swarmtools.ai live with docs\n- [ ] GitHub OAuth working via swarmtools org\n\n## References\n\n- Current swarm-mail: `packages/swarm-mail/`\n- Current plugin: `packages/opencode-swarm-plugin/`\n- Fumadocs: https://fumadocs.vercel.app/\n- Better Auth: https://www.better-auth.com/\n- oxlint: https://oxc.rs/docs/guide/usage/linter.html\n- Biome: https://biomejs.dev/","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-15T06:59:59.812675-08:00","updated_at":"2025-12-15T07:41:07.013616-08:00"}
{"id":"opencode-swarm-plugin-b0tzg","title":"Fix README + Swarm Mail docs + swarm_complete error handling","description":"1) Update README to reference Agent Mail in inspiration section but clarify our implementation is Swarm Mail with diagrams, 2) Fix swarm_complete silent failures - push errors to swarm mail for coordinator visibility, 3) Document Swarm Mail architecture based on closed PRs","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T14:41:44.17609-08:00","updated_at":"2025-12-14T14:47:46.049959-08:00","closed_at":"2025-12-14T14:47:46.049959-08:00"}
{"id":"opencode-swarm-plugin-b0tzg.1","title":"Update README - Agent Mail inspiration vs Swarm Mail implementation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:41:44.244997-08:00","updated_at":"2025-12-14T14:47:42.88356-08:00","closed_at":"2025-12-14T14:47:42.88356-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-b0tzg.1","depends_on_id":"opencode-swarm-plugin-b0tzg","type":"parent-child","created_at":"2025-12-14T14:41:44.246047-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-b0tzg.2","title":"Add error handling to swarm_complete - push failures to swarm mail","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T14:41:44.302057-08:00","updated_at":"2025-12-14T14:47:43.984532-08:00","closed_at":"2025-12-14T14:47:43.984532-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-b0tzg.2","depends_on_id":"opencode-swarm-plugin-b0tzg","type":"parent-child","created_at":"2025-12-14T14:41:44.304468-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-b0tzg.3","title":"Document Swarm Mail architecture with diagrams from closed PRs","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:41:44.364356-08:00","updated_at":"2025-12-14T14:47:45.050125-08:00","closed_at":"2025-12-14T14:47:45.050125-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-b0tzg.3","depends_on_id":"opencode-swarm-plugin-b0tzg","type":"parent-child","created_at":"2025-12-14T14:41:44.365969-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-b0ydv","title":"Create TDD skill with lore from prime knowledge","description":"Created .opencode/skills/tdd/SKILL.md with RED-GREEN-REFACTOR workflow and lore from Kent Beck, Michael Feathers, Martin Fowler, and Ousterhout's counterpoint.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:12:37.165045-08:00","updated_at":"2025-12-13T09:12:40.904565-08:00","closed_at":"2025-12-13T09:12:40.904565-08:00"}
{"id":"opencode-swarm-plugin-b1wpc","title":"swarm.ts:1620-1670 - runUbsScan doesn't validate JSON structure","description":"swarm.ts:1620-1670 - runUbsScan parses JSON but doesn't validate with schema. If UBS changes output format, could return malformed data or throw cryptic errors. Suggested fix: Define Zod schema for UBS output and validate.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:33.466723-08:00","updated_at":"2025-12-10T11:56:17.052815-08:00","closed_at":"2025-12-10T11:56:17.052815-08:00"}
{"id":"opencode-swarm-plugin-b22qj","title":"Gap: No transaction rollback error handling in appendEvents","description":"src/streams/store.ts:68-94 - appendEvents() has try/catch with ROLLBACK but if ROLLBACK itself fails (e.g., connection lost), that error is swallowed. Should log rollback failures. Also, if updateMaterializedViews fails mid-transaction, some events may be in inconsistent state. Consider: logging rollback errors, emitting error events, or adding retry logic.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:24:56.23944-08:00","updated_at":"2025-12-13T16:06:34.991434-08:00","closed_at":"2025-12-13T16:06:34.991434-08:00"}
{"id":"opencode-swarm-plugin-b4y3u","title":"Feature: Deep semantic-memory integration throughout plugin","description":"## Vision\nMake semantic-memory a first-class citizen in the plugin, not just an available tool.\n\n## Integration Points\n\n### 1. Swarm Learning\n- After swarm_complete: auto-store learnings about what worked/failed\n- After 3-strike: store architectural insights\n- Pattern maturity transitions: store why patterns got promoted/deprecated\n\n### 2. Decomposition\n- Before decomposing: query semantic-memory for similar past tasks\n- Store successful decomposition strategies with task characteristics\n- Learn which strategies work for which task types\n\n### 3. Skills\n- When skill is used successfully: reinforce in memory\n- When skill fails to help: store negative signal\n- Auto-suggest skills based on memory of past similar situations\n\n### 4. Error Handling\n- Store error patterns and their solutions\n- Query memory when hitting errors (before CASS)\n- Build project-specific error knowledge base\n\n### 5. Beads\n- Store context when closing beads (what was learned)\n- Query memory when starting similar beads\n- Track which approaches worked for which problem types\n\n## Implementation Ideas\n\n### Auto-store on key events\n```typescript\n// In swarm_complete\nif (success) {\n  semantic_memory_store({\n    information: `Task \"${title}\" succeeded with strategy \"${strategy}\". Key insight: ${summary}`,\n    metadata: `swarm, ${strategy}, success`\n  })\n}\n\n// In 3-strike detection\nsemantic_memory_store({\n  information: `Architecture problem in ${bead_id}: ${prompt}. Required human decision.`,\n  metadata: `architecture, 3-strike, ${bead_id}`\n})\n```\n\n### Auto-query before actions\n```typescript\n// In swarm_decompose\nconst memories = await semantic_memory_find({\n  query: task,\n  limit: 3\n})\n// Include relevant memories in decomposition context\n```\n\n### Validation on retrieval\n```typescript\n// When memory helps solve a problem\nsemantic_memory_validate({ id: memory.id })  // Reset decay timer\n```\n\n## Success Criteria\n- Every swarm completion stores a learning\n- Decomposition queries memory before CASS\n- Error patterns accumulate and help future debugging\n- Memory decay keeps knowledge fresh and relevant","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T14:18:23.293815-08:00","updated_at":"2025-12-13T16:05:13.309264-08:00","closed_at":"2025-12-13T16:05:13.309264-08:00"}
{"id":"opencode-swarm-plugin-bjjvp","title":"Gap: SQL injection vulnerability in replayEvents","description":"src/streams/store.ts:227-243 - replayEvents() uses string interpolation for SQL queries with projectKey: `DELETE FROM messages WHERE project_key = '${options.projectKey}'`. This is vulnerable to SQL injection if projectKey contains quotes. Should use parameterized queries ($1, $2) instead of string interpolation for ALL queries. Check entire file for similar issues.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-13T09:24:49.821997-08:00","updated_at":"2025-12-13T09:34:06.953215-08:00","closed_at":"2025-12-13T09:34:06.953215-08:00"}
{"id":"opencode-swarm-plugin-bvot5","title":"Document regex limitations in attemptJsonRepair","description":"src/structured.ts:249-272 - attemptJsonRepair has comment \"This is a simple heuristic - won't work for all cases\" but doesn't list known limitations. Add JSDoc: \"Limitations: single quotes in nested objects, escaped quotes in keys, multiline string detection\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:47.470646-08:00","updated_at":"2025-12-13T16:45:44.852448-08:00","closed_at":"2025-12-13T16:45:44.852448-08:00"}
{"id":"opencode-swarm-plugin-byhfs","title":"Extract magic number 0.01 epsilon to constant in pattern-maturity.ts","description":"src/pattern-maturity.ts:167 - `epsilon = 0.01` for float comparison is magic number. Extract to module constant: `const FLOAT_EPSILON = 0.01;` and document: \"Tolerance for floating-point comparisons\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:29.965468-08:00","updated_at":"2025-12-13T16:41:56.538935-08:00","closed_at":"2025-12-13T16:41:56.538935-08:00"}
{"id":"opencode-swarm-plugin-c4zjn","title":"Make Agent Mail auto-restart more aggressive","description":"Agent Mail server frequently gets into bad state with \"Server encountered an unexpected error\" but auto-restart is too conservative.\n\nCurrent config:\n- failureThreshold: 2 (needs 2 failures before restart)\n- restartCooldownMs: 30000 (30 second cooldown)\n\nProblems:\n1. First failure doesn't trigger restart, just retries\n2. 30s cooldown is too long when server is truly broken\n3. After restart, availability cache isn't cleared aggressively enough\n\nProposed fix:\n1. Reduce failureThreshold to 1 (restart on first \"unexpected error\")\n2. Reduce restartCooldownMs to 10000 (10 seconds)\n3. Add proactive health check on agentmail_init that triggers restart if server is unhealthy\n4. Clear availability cache after any restart attempt\n5. Add `agentmail_restart` tool for manual restart\n\nFiles: src/agent-mail.ts","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-10T10:14:48.242736-08:00","updated_at":"2025-12-10T10:16:17.53306-08:00","closed_at":"2025-12-10T10:16:17.53306-08:00"}
{"id":"opencode-swarm-plugin-c591c","title":"swarm.ts:1774-1777 - File reservation release without verification","description":"swarm.ts:1774-1777 - swarm_complete calls release_file_reservations but doesn't check if it succeeds. If release fails, reservations leak and block other agents. Suggested fix: Check mcpCall result and log/retry on failure.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:38.089086-08:00","updated_at":"2025-12-10T11:56:11.855492-08:00","closed_at":"2025-12-10T11:56:11.855492-08:00"}
{"id":"opencode-swarm-plugin-c5vtl","title":"Integration tests, audit beads, and release 0.12.5","description":"Run integration tests to verify fixes, create beads for remaining medium/low audit issues with context, then cut release with OTP","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T09:04:59.552742-08:00","updated_at":"2025-12-10T11:06:05.248492-08:00","closed_at":"2025-12-10T11:06:05.248492-08:00"}
{"id":"opencode-swarm-plugin-c5vtl.1","title":"Run integration tests and verify all pass","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-10T09:04:59.60091-08:00","updated_at":"2025-12-10T09:09:38.676808-08:00","closed_at":"2025-12-10T09:09:38.676808-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-c5vtl.1","depends_on_id":"opencode-swarm-plugin-c5vtl","type":"parent-child","created_at":"2025-12-10T09:04:59.601729-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-c5vtl.2","title":"Create beads for medium severity audit issues","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T09:04:59.646361-08:00","updated_at":"2025-12-10T09:09:39.40097-08:00","closed_at":"2025-12-10T09:09:39.40097-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-c5vtl.2","depends_on_id":"opencode-swarm-plugin-c5vtl","type":"parent-child","created_at":"2025-12-10T09:04:59.647339-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-c5vtl.3","title":"Create beads for low/info severity audit issues","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T09:04:59.691404-08:00","updated_at":"2025-12-10T09:09:39.911873-08:00","closed_at":"2025-12-10T09:09:39.911873-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-c5vtl.3","depends_on_id":"opencode-swarm-plugin-c5vtl","type":"parent-child","created_at":"2025-12-10T09:04:59.692833-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-c5vtl.4","title":"Bump version and publish release with OTP","description":"Version bumped to 0.12.5 and pushed to git. npm publish failed - access token expired. Need to run: npm login then npm publish --otp=CODE","status":"blocked","priority":2,"issue_type":"task","created_at":"2025-12-10T09:04:59.737145-08:00","updated_at":"2025-12-10T09:10:23.300829-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-c5vtl.4","depends_on_id":"opencode-swarm-plugin-c5vtl","type":"parent-child","created_at":"2025-12-10T09:04:59.73854-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku","title":"Investigate potential skills for opencode-swarm-plugin","description":"Analyze codebase patterns, workflows, and domain knowledge to identify new skill opportunities beyond the existing 5 bundled skills","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-12T21:44:25.282969-08:00","updated_at":"2025-12-12T21:47:11.486359-08:00","closed_at":"2025-12-12T21:47:11.486359-08:00"}
{"id":"opencode-swarm-plugin-cliku.1","title":"Analyze src/ modules for extractable patterns","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:44:25.33437-08:00","updated_at":"2025-12-12T21:46:09.368653-08:00","closed_at":"2025-12-12T21:46:09.368662-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.1","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:44:25.335292-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku.2","title":"Analyze existing skills for gaps and extensions","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:44:25.38425-08:00","updated_at":"2025-12-12T21:46:10.054798-08:00","closed_at":"2025-12-12T21:46:10.0548-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.2","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:44:25.385157-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku.3","title":"Search CASS for skill-related patterns from past sessions","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:44:25.437227-08:00","updated_at":"2025-12-12T21:46:10.75249-08:00","closed_at":"2025-12-12T21:46:10.752496-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.3","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:44:25.438595-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku.4","title":"Analyze CLI and plugin patterns for tooling skills","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:44:25.48734-08:00","updated_at":"2025-12-12T21:46:11.436638-08:00","closed_at":"2025-12-12T21:46:11.43664-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.4","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:44:25.488372-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku.5","title":"Synthesize findings into skill recommendations","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:44:25.535457-08:00","updated_at":"2025-12-12T21:47:09.742548-08:00","closed_at":"2025-12-12T21:47:09.742548-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.5","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:44:25.536925-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cliku.6","title":"Search pdf-brain for skill-worthy knowledge","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:46:12.83653-08:00","updated_at":"2025-12-12T21:46:46.011065-08:00","closed_at":"2025-12-12T21:46:46.011065-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cliku.6","depends_on_id":"opencode-swarm-plugin-cliku","type":"parent-child","created_at":"2025-12-12T21:46:12.837492-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cpd4n","title":"Fix skills_update tool - content not being written to file","description":"The skills_update tool accepts content parameter but doesn't actually write it to the SKILL.md file. User had to fall back to using the Write tool directly. Need to investigate the execute function in skills.ts to see why content isn't being persisted.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:02:13.058687-08:00","updated_at":"2025-12-16T12:58:44.722972-08:00","closed_at":"2025-12-16T12:58:44.722972-08:00"}
{"id":"opencode-swarm-plugin-cs3wl","title":"Cut release v0.21.0","description":"## Changes for v0.21.0\n\n**Fixed:**\n- Migration tests updated for 4 migrations (was hardcoded to 2)\n- All 230 tests passing\n\n**Features (from bead opencode-swarm-plugin-66ni8):**\n- Swarm recovery context (swarm_checkpoint, swarm_recover, auto-checkpoint at 25/50/75%)\n- Eval data capture (DecompositionGeneratedEvent, SubtaskOutcomeEvent, eval_records table)\n- Outcome-based scorers (fileOverlap, scopeAccuracy, timeBalance, successRate, humanAcceptance)\n- PGLite data loader for Evalite\n- JSONB parsing fix in store.ts/projections.ts\n\n**Steps:**\n1. Commit test fixes\n2. Update package.json version to 0.21.0\n3. Build\n4. Git tag\n5. Push\n6. Publish to npm","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-14T14:21:48.794294-08:00","updated_at":"2025-12-14T14:22:50.902471-08:00","closed_at":"2025-12-14T14:22:50.902471-08:00"}
{"id":"opencode-swarm-plugin-cxss9","title":"Rewrite swarm CLI with @clack/prompts","description":"Transform bin/swarm.ts into a beautiful interactive CLI using @clack/prompts. Commands: setup (interactive installer), doctor (health check), init (project init), version.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T09:26:03.309835-08:00","updated_at":"2025-12-09T09:33:34.197784-08:00","closed_at":"2025-12-09T09:33:34.197784-08:00"}
{"id":"opencode-swarm-plugin-cxss9.1","title":"Add @clack/prompts dependency and update package.json to v0.9.0","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T09:26:03.354614-08:00","updated_at":"2025-12-09T09:26:26.192593-08:00","closed_at":"2025-12-09T09:26:26.192593-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cxss9.1","depends_on_id":"opencode-swarm-plugin-cxss9","type":"parent-child","created_at":"2025-12-09T09:26:03.355539-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cxss9.2","title":"Rewrite bin/swarm.ts with clack - setup, doctor, init, version commands","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T09:26:03.400398-08:00","updated_at":"2025-12-09T09:31:15.343298-08:00","closed_at":"2025-12-09T09:31:15.343298-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cxss9.2","depends_on_id":"opencode-swarm-plugin-cxss9","type":"parent-child","created_at":"2025-12-09T09:26:03.400797-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cxss9.3","title":"Update README with new CLI usage and screenshots","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T09:26:03.441881-08:00","updated_at":"2025-12-09T09:32:20.702615-08:00","closed_at":"2025-12-09T09:32:20.702615-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-cxss9.3","depends_on_id":"opencode-swarm-plugin-cxss9","type":"parent-child","created_at":"2025-12-09T09:26:03.442265-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-cyc8w","title":"Pattern: Verification Before Completion - Evidence Before Claims","description":"## Verification Before Completion (from obra/superpowers)\n\n**Iron Law:** NO COMPLETION CLAIMS WITHOUT FRESH VERIFICATION EVIDENCE\n\n### The Gate Function\nBEFORE claiming ANY status or expressing satisfaction:\n1. **IDENTIFY** - What command proves this claim?\n2. **RUN** - Execute the FULL command (fresh, complete)\n3. **READ** - Full output, check exit code, count failures\n4. **VERIFY** - Does output confirm the claim?\n5. **ONLY THEN** - Make the claim\n\n**Skip any step = lying, not verifying**\n\n### Red Flags (STOP IMMEDIATELY)\n- Using \"should\", \"probably\", \"seems to\"\n- Expressing satisfaction before verification (\"Great!\", \"Perfect!\", \"Done!\")\n- About to commit/push/PR without verification\n- Trusting agent success reports\n- Relying on partial verification\n- Thinking \"just this once\"\n- **ANY wording implying success without having run verification**\n\n### Common Failures Table\n| Claim | Requires | Not Sufficient |\n|-------|----------|----------------|\n| Tests pass | Test command output: 0 failures | Previous run, \"should pass\" |\n| Build succeeds | Build command: exit 0 | Linter passing |\n| Bug fixed | Test original symptom: passes | Code changed, assumed fixed |\n| Agent completed | VCS diff shows changes | Agent reports \"success\" |\n\n### Key Quote\n\"Claiming work is complete without verification is dishonesty, not efficiency.\"\n\n**Full analysis:** VERIFICATION_QUALITY_PATTERNS.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T14:00:18.604763-08:00","updated_at":"2025-12-13T15:50:52.929605-08:00","closed_at":"2025-12-13T15:50:52.929605-08:00"}
{"id":"opencode-swarm-plugin-d7age","title":"Gap: Integer overflow risk in timestamp conversions","description":"src/streams/store.ts:169,180 - Parsing timestamps as integers: `parseInt(row.timestamp)`. PostgreSQL BIGINT can exceed JavaScript's MAX_SAFE_INTEGER (2^53-1). Year 2286+ timestamps will overflow. Should: use BigInt for timestamp handling, or document acceptable timestamp range. Low priority but good to note for long-lived systems.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-13T09:25:29.654739-08:00","updated_at":"2025-12-13T16:20:35.022602-08:00","closed_at":"2025-12-13T16:20:35.022602-08:00"}
{"id":"opencode-swarm-plugin-dhwmm","title":"swarm.ts:850-870 - querySwarmMessages silently returns 0 on error","description":"swarm.ts:850-870 - querySwarmMessages catches all errors and returns 0. Callers can't distinguish between \"no messages\" and \"query failed\". Affects swarm_status accuracy. Suggested fix: Log error before returning 0.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:28.375271-08:00","updated_at":"2025-12-10T11:56:18.544136-08:00","closed_at":"2025-12-10T11:56:18.544136-08:00"}
{"id":"opencode-swarm-plugin-dmji7","title":"Improve semantic memory usage patterns - agents should proactively store learnings","description":"## Problem\n\nSemantic memory exists but isn't being exercised in practice:\n- 35 memories total, but ~30 are test artifacts from integration tests\n- Only ~5 real learnings stored in `default` collection\n- Agents aren't proactively storing discoveries during work\n\n## Evidence\n\n```\nCollections breakdown:\n- test-patterns: ~15 (integration test pollution)\n- test-feedback: ~15 (integration test pollution)  \n- default: ~5 (actual learnings)\n```\n\nReal learnings found:\n1. CRITICAL SCHEMA FIX - egghead-rails series table deprecation\n2. Docker test infrastructure - egghead migration approach\n3. POC Migration Learnings - Coursebuilder patterns\n4. Durable Streams Protocol - Electric SQL\n\n## Proposed Solutions\n\n1. **Test isolation**: Integration tests should use separate memory location or cleanup after\n2. **Agent prompting**: Update AGENTS.md to emphasize when to store memories\n3. **Automatic capture**: Hook into swarm_complete to auto-store learnings from successful tasks\n4. **Memory triggers**: Define clear triggers for when agents SHOULD store:\n   - After solving a tricky bug (store the solution)\n   - After architectural decisions (store the reasoning)\n   - After discovering project-specific patterns\n   - After debugging sessions that reveal root causes\n\n## Success Criteria\n\n- Integration tests don't pollute production memory\n- Agents store 1-3 meaningful learnings per significant session\n- Memory search returns useful context for similar future tasks","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:51:44.162675-08:00","updated_at":"2025-12-14T20:00:01.597277-08:00","closed_at":"2025-12-14T20:00:01.597277-08:00"}
{"id":"opencode-swarm-plugin-dqeye","title":"Add JSDoc to schema export file","description":"src/schemas/index.ts:1-78 - File lacks JSDoc describing export groups and their purposes. Add module-level JSDoc explaining that this is the central export point for all schema definitions used in the plugin.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:04.359624-08:00","updated_at":"2025-12-13T16:48:09.917903-08:00","closed_at":"2025-12-13T16:48:09.917903-08:00"}
{"id":"opencode-swarm-plugin-e2182","title":"Fix PR #6 CodeRabbit Review Comments","description":"Address all major and minor review comments before merging swarm-mail production-ready branch","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T11:44:06.694005-08:00","updated_at":"2025-12-13T11:48:05.699992-08:00","closed_at":"2025-12-13T11:48:05.699992-08:00"}
{"id":"opencode-swarm-plugin-e2182.1","title":"Fix swarm_broadcast and tool-availability","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:44:06.745678-08:00","updated_at":"2025-12-13T11:47:56.176722-08:00","closed_at":"2025-12-13T11:47:56.176722-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-e2182.1","depends_on_id":"opencode-swarm-plugin-e2182","type":"parent-child","created_at":"2025-12-13T11:44:06.747621-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-e2182.2","title":"Fix swarm-mail.ts inbox and release bugs","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:44:06.801414-08:00","updated_at":"2025-12-13T11:47:57.726189-08:00","closed_at":"2025-12-13T11:47:57.726189-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-e2182.2","depends_on_id":"opencode-swarm-plugin-e2182","type":"parent-child","created_at":"2025-12-13T11:44:06.802754-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-e2182.3","title":"Fix test isolation in integration tests","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:44:06.852732-08:00","updated_at":"2025-12-13T11:47:58.931849-08:00","closed_at":"2025-12-13T11:47:58.931849-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-e2182.3","depends_on_id":"opencode-swarm-plugin-e2182","type":"parent-child","created_at":"2025-12-13T11:44:06.854329-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-e2182.4","title":"Fix beads and documentation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:44:06.902668-08:00","updated_at":"2025-12-13T11:48:00.61791-08:00","closed_at":"2025-12-13T11:48:00.61791-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-e2182.4","depends_on_id":"opencode-swarm-plugin-e2182","type":"parent-child","created_at":"2025-12-13T11:44:06.903642-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-e82t1","title":"agent-mail.ts:98-103 - Generic error handling loses error type info","description":"agent-mail.ts:98-103 - The catch block converts all errors to string, losing stack trace and error type. Makes debugging harder. Suggested fix: Preserve Error instances or at least log full error details before converting.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-10T09:05:56.451458-08:00","updated_at":"2025-12-13T08:52:59.165397-08:00","closed_at":"2025-12-13T08:52:59.165397-08:00"}
{"id":"opencode-swarm-plugin-ejeg6","title":"Gap: Connection leak risk - no cleanup on process exit","description":"src/streams/index.ts:50-102 - Database instances are cached in Map but there's no process.on('exit') or SIGINT/SIGTERM handlers to close connections gracefully. PGLite connections should be closed on shutdown. Add process event handlers that call closeAllDatabases() to prevent resource leaks and ensure clean shutdown.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:24:47.194396-08:00","updated_at":"2025-12-13T09:55:53.515281-08:00","closed_at":"2025-12-13T09:55:53.515281-08:00"}
{"id":"opencode-swarm-plugin-evr9p","title":"Fix skill-builder PR issues","description":"Fix critical bugs and improvements identified in skill-builder branch review: __dirname bug, path traversal validation, code duplication, global-skills quality","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-12T21:14:01.993571-08:00","updated_at":"2025-12-12T21:25:08.600282-08:00","closed_at":"2025-12-12T21:25:08.600282-08:00"}
{"id":"opencode-swarm-plugin-evr9p.1","title":"Fix __dirname ES module bug in skills.ts","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-12T21:14:02.045699-08:00","updated_at":"2025-12-12T21:14:30.779437-08:00","closed_at":"2025-12-12T21:14:30.779437-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-evr9p.1","depends_on_id":"opencode-swarm-plugin-evr9p","type":"parent-child","created_at":"2025-12-12T21:14:02.046676-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-evr9p.2","title":"Add path traversal validation to skills_execute","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-12T21:14:02.094421-08:00","updated_at":"2025-12-12T21:17:27.357522-08:00","closed_at":"2025-12-12T21:17:27.357522-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-evr9p.2","depends_on_id":"opencode-swarm-plugin-evr9p","type":"parent-child","created_at":"2025-12-12T21:14:02.095826-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-evr9p.3","title":"Deduplicate YAML parser in scripts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:14:02.144137-08:00","updated_at":"2025-12-12T21:19:54.453324-08:00","closed_at":"2025-12-12T21:19:54.453324-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-evr9p.3","depends_on_id":"opencode-swarm-plugin-evr9p","type":"parent-child","created_at":"2025-12-12T21:14:02.145641-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-evr9p.4","title":"Improve global-skills quality","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:14:02.192572-08:00","updated_at":"2025-12-12T21:22:50.299557-08:00","closed_at":"2025-12-12T21:22:50.299557-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-evr9p.4","depends_on_id":"opencode-swarm-plugin-evr9p","type":"parent-child","created_at":"2025-12-12T21:14:02.19349-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ewrdy","title":"Document bead ID regex pattern meaning","description":"src/schemas/bead.ts:45 - Regex pattern `/^[a-z0-9]+(-[a-z0-9]+)+(\\.\\d+)?$/` is not explained. Add inline comment explaining: \"project-slug-hash format (e.g., 'my-project-abc12') with optional subtask index (.1, .2)\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:06.693646-08:00","updated_at":"2025-12-13T16:48:09.415056-08:00","closed_at":"2025-12-13T16:48:09.415056-08:00"}
{"id":"opencode-swarm-plugin-f8553","title":"rate-limiter.ts:383-410 - Missing bound checks in checkWindow SQL queries","description":"rate-limiter.ts:383-410 - checkWindow SQL queries don't validate query result before accessing .count or .timestamp properties. If query fails or returns unexpected shape, undefined access occurs. Suggested fix: Add null checks and validation.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:22.687466-08:00","updated_at":"2025-12-10T11:58:24.449815-08:00","closed_at":"2025-12-10T11:58:24.449815-08:00"}
{"id":"opencode-swarm-plugin-f9u7d","title":"Gap: No connection timeout or query timeout","description":"src/streams/index.ts:68 - PGLite instance created with no timeout configuration. Long-running queries could hang indefinitely. Should configure: query timeout (e.g., 30s), statement timeout, connection timeout. PGLite may support options in constructor - check docs. Also: add timeout wrapper around critical operations for fail-fast behavior.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:17.064162-08:00","updated_at":"2025-12-13T16:06:35.828834-08:00","closed_at":"2025-12-13T16:06:35.828834-08:00"}
{"id":"opencode-swarm-plugin-fn2a3","title":"CLI-based plugin wrapper for OpenCode","description":"Replace broken npm import plugin with thin wrapper that shells out to `swarm tool` CLI. Fixes bun: protocol crash.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T12:44:59.286448-08:00","updated_at":"2025-12-09T12:53:22.927803-08:00","closed_at":"2025-12-09T12:53:22.927803-08:00"}
{"id":"opencode-swarm-plugin-fn2a3.1","title":"Add CLI tool subcommand with JSON interface","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T12:44:59.380582-08:00","updated_at":"2025-12-09T12:48:28.655484-08:00","closed_at":"2025-12-09T12:48:28.655484-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fn2a3.1","depends_on_id":"opencode-swarm-plugin-fn2a3","type":"parent-child","created_at":"2025-12-09T12:44:59.381424-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fn2a3.2","title":"Add file-based session state for Agent Mail","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T12:44:59.452126-08:00","updated_at":"2025-12-09T12:50:05.569927-08:00","closed_at":"2025-12-09T12:50:05.569927-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fn2a3.2","depends_on_id":"opencode-swarm-plugin-fn2a3","type":"parent-child","created_at":"2025-12-09T12:44:59.452571-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fn2a3.3","title":"Create plugin wrapper template generator","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T12:44:59.511026-08:00","updated_at":"2025-12-09T12:52:13.47915-08:00","closed_at":"2025-12-09T12:52:13.47915-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fn2a3.3","depends_on_id":"opencode-swarm-plugin-fn2a3","type":"parent-child","created_at":"2025-12-09T12:44:59.511712-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fn2a3.4","title":"Update setup command to generate new plugin wrapper","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T12:44:59.559682-08:00","updated_at":"2025-12-09T12:53:13.282356-08:00","closed_at":"2025-12-09T12:53:13.282356-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fn2a3.4","depends_on_id":"opencode-swarm-plugin-fn2a3","type":"parent-child","created_at":"2025-12-09T12:44:59.560036-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fn2a3.5","title":"Export tool registry from source modules","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T12:44:59.609125-08:00","updated_at":"2025-12-09T12:46:18.092813-08:00","closed_at":"2025-12-09T12:46:18.092813-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fn2a3.5","depends_on_id":"opencode-swarm-plugin-fn2a3","type":"parent-child","created_at":"2025-12-09T12:44:59.609492-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fnup6","title":"Add timestamp field to EvaluationRequest","description":"src/schemas/evaluation.ts:77-82 - EvaluationRequestSchema missing timestamp field that other schemas have. Consider adding `.optional()` timestamp for tracking when evaluation was requested.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:17.623103-08:00","updated_at":"2025-12-13T16:45:51.784813-08:00","closed_at":"2025-12-13T16:45:51.784813-08:00"}
{"id":"opencode-swarm-plugin-fst9c","title":"Event-Sourced Agent Mail with PGLite","description":"Replace MCP-based agent mail with embedded PGLite database using Durable Streams protocol (Electric SQL). Same tool API, offset-based resumability, crash recovery, full audit trail, no external dependencies.\n\nReference: github.com/durable-streams/durable-streams\n\nKey changes from original plan:\n- Using Durable Streams protocol instead of custom event sourcing\n- Offset format: `\u003cread-seq\u003e_\u003cbyte-offset\u003e` (lexicographically sortable)\n- Recovery: scan files to reconcile with metadata on startup\n- Long-poll support for live tailing","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T08:47:30.814673-08:00","updated_at":"2025-12-13T15:51:21.968873-08:00","closed_at":"2025-12-13T15:51:21.968873-08:00"}
{"id":"opencode-swarm-plugin-fst9c.1","title":"PGLite Foundation + Event Schema","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T08:47:30.870657-08:00","updated_at":"2025-12-13T08:49:03.269255-08:00","closed_at":"2025-12-13T08:49:03.269255-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.1","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:30.871568-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fst9c.2","title":"Event Store Implementation","description":"TDD: Implement Durable Streams-compliant event store with PGLite\n\nTest-first approach:\n1. Write unit tests for events.ts (schemas, createEvent, isEventType)\n2. Write unit tests for store.ts (append, read, replay)\n3. Write integration tests for full flow\n4. Implement to make tests pass\n\nKey features:\n- Offset format: `\u003cread-seq\u003e_\u003cbyte-offset\u003e` (16-char zero-padded)\n- append() with sequence coordination\n- read() with offset-based resumability  \n- Crash recovery: scan to reconcile metadata\n- Long-poll support for live tailing\n\nReference: github.com/durable-streams/durable-streams PROTOCOL.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T08:47:30.926284-08:00","updated_at":"2025-12-13T09:01:37.573559-08:00","closed_at":"2025-12-13T09:01:37.573559-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.2","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:30.927781-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fst9c.3","title":"Projections Layer","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T08:47:30.97906-08:00","updated_at":"2025-12-13T09:01:38.193937-08:00","closed_at":"2025-12-13T09:01:38.193937-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.3","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:30.980628-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fst9c.4","title":"Agent Mail Tools Implementation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T08:47:31.03628-08:00","updated_at":"2025-12-13T09:07:56.866122-08:00","closed_at":"2025-12-13T09:07:56.866122-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.4","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:31.036965-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fst9c.5","title":"Debug Tools + Event Inspection","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T08:47:31.094034-08:00","updated_at":"2025-12-13T09:16:52.96239-08:00","closed_at":"2025-12-13T09:16:52.96239-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.5","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:31.095559-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fst9c.6","title":"Integration + Exports","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T08:47:31.151332-08:00","updated_at":"2025-12-13T09:17:58.24284-08:00","closed_at":"2025-12-13T09:17:58.24284-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-fst9c.6","depends_on_id":"opencode-swarm-plugin-fst9c","type":"parent-child","created_at":"2025-12-13T08:47:31.152307-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-fwovc","title":"Add JSDoc to TaskDecomposition.reasoning field","description":"src/schemas/task.ts:59 - `reasoning` field has inline comment \"Why this decomposition\" but should be JSDoc for IDE tooltips. Add: \"/** Rationale for this decomposition strategy */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:25.735267-08:00","updated_at":"2025-12-13T16:45:49.106586-08:00","closed_at":"2025-12-13T16:45:49.106586-08:00"}
{"id":"opencode-swarm-plugin-fxqpf","title":"agent-mail.ts:94 - Potential resource leak in process cleanup","description":"agent-mail.ts:94 - The finally block calls proc.kill() unconditionally. If the process already exited normally, kill() may fail or have no effect. Not checking proc.exited status first. Suggested fix: Check if process is still running before calling kill().","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:05:54.508966-08:00","updated_at":"2025-12-13T08:52:58.290228-08:00","closed_at":"2025-12-13T08:52:58.290228-08:00"}
{"id":"opencode-swarm-plugin-gde33","title":"Swarm Mail Generalization Analysis - Actor coordination patterns for agentic systems","description":"## Status: Partially Complete\n\nThe core analysis exists in `docs/swarm-mail-architecture.md` (1148 lines).\n\n### What's Done\n- ✅ Primitive taxonomy (DurableCursor, DurableDeferred, DurableLock, DurableMailbox)\n- ✅ Architecture diagrams (ASCII + Mermaid)\n- ✅ Comparison to Agent Mail\n- ✅ Use cases and examples\n- ✅ Event sourcing architecture\n- ✅ Effect-TS integration\n- ✅ Database schema documentation\n\n### Remaining Work (Optional)\n- [ ] Comparison to Akka/Orleans/Temporal frameworks\n- [ ] Generalization opportunities beyond agent coordination (SaaS, workflow orchestration, IoT, game servers)\n- [ ] Kyle Mathews' specific insights from Twitter thread (stream combinators, DurableSemaphore, DurableBroadcast)\n\n### Decision Needed\nClose as \"core analysis complete\" or keep open for framework comparisons?\n\n### References\n- Existing doc: `packages/opencode-swarm-plugin/docs/swarm-mail-architecture.md`\n- Kyle's thread: https://x.com/kylemathews/status/1999896667030700098","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-14T09:10:19.615437-08:00","updated_at":"2025-12-15T08:34:21.674068-08:00"}
{"id":"opencode-swarm-plugin-gf1n8","title":"Add skills documentation and create 7 new bundled skills","description":"Update README with skills feature documentation, publish new version, then create 7 new skills: agent-patterns, tacit-knowledge-extraction, learning-systems, zod-validation, resilience-patterns, mcp-tool-authoring, testing-strategies","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-12T21:49:01.067542-08:00","updated_at":"2025-12-12T21:53:55.973974-08:00","closed_at":"2025-12-12T21:53:55.973974-08:00"}
{"id":"opencode-swarm-plugin-gf1n8.1","title":"Update README with skills documentation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:49:01.108379-08:00","updated_at":"2025-12-12T21:49:37.717118-08:00","closed_at":"2025-12-12T21:49:37.717118-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.1","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.109457-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.2","title":"Create agent-patterns skill from PDF","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.147507-08:00","updated_at":"2025-12-12T21:53:28.210831-08:00","closed_at":"2025-12-12T21:53:28.210831-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.2","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.148296-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.3","title":"Create tacit-knowledge-extraction skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.190071-08:00","updated_at":"2025-12-12T21:53:29.05083-08:00","closed_at":"2025-12-12T21:53:29.05083-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.3","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.191674-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.4","title":"Create learning-systems skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.240273-08:00","updated_at":"2025-12-12T21:53:29.822709-08:00","closed_at":"2025-12-12T21:53:29.822709-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.4","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.241765-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.5","title":"Create zod-validation skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.286597-08:00","updated_at":"2025-12-12T21:53:30.592121-08:00","closed_at":"2025-12-12T21:53:30.592121-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.5","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.287248-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.6","title":"Create resilience-patterns skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.326304-08:00","updated_at":"2025-12-12T21:53:31.396458-08:00","closed_at":"2025-12-12T21:53:31.396458-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.6","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.327839-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.7","title":"Create mcp-tool-authoring skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.3722-08:00","updated_at":"2025-12-12T21:53:32.220987-08:00","closed_at":"2025-12-12T21:53:32.220987-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.7","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.373746-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gf1n8.8","title":"Create testing-strategies skill","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:49:01.415744-08:00","updated_at":"2025-12-12T21:53:32.979008-08:00","closed_at":"2025-12-12T21:53:32.979008-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gf1n8.8","depends_on_id":"opencode-swarm-plugin-gf1n8","type":"parent-child","created_at":"2025-12-12T21:49:01.417461-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gpusl","title":"DX Improvements: Actionable Errors \u0026 Troubleshooting","description":"Improve developer experience with actionable error messages that tell users HOW to fix problems, add troubleshooting docs, and enhance CLI doctor output.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T15:21:23.537986-08:00","updated_at":"2025-12-13T15:26:06.152115-08:00","closed_at":"2025-12-13T15:26:06.152115-08:00"}
{"id":"opencode-swarm-plugin-gpusl.1","title":"Add troubleshooting section to README","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T15:21:23.645841-08:00","updated_at":"2025-12-13T15:24:59.766004-08:00","closed_at":"2025-12-13T15:24:59.766004-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gpusl.1","depends_on_id":"opencode-swarm-plugin-gpusl","type":"parent-child","created_at":"2025-12-13T15:21:23.64819-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gpusl.2","title":"Make BeadError and SwarmError actionable","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T15:21:23.728838-08:00","updated_at":"2025-12-13T15:25:01.061305-08:00","closed_at":"2025-12-13T15:25:01.061305-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gpusl.2","depends_on_id":"opencode-swarm-plugin-gpusl","type":"parent-child","created_at":"2025-12-13T15:21:23.730994-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gpusl.3","title":"Make MandateError and storage errors actionable","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T15:21:23.806569-08:00","updated_at":"2025-12-13T15:25:02.21639-08:00","closed_at":"2025-12-13T15:25:02.21639-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gpusl.3","depends_on_id":"opencode-swarm-plugin-gpusl","type":"parent-child","created_at":"2025-12-13T15:21:23.808361-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-gpusl.4","title":"Enhance CLI doctor with fix suggestions","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T15:21:23.868538-08:00","updated_at":"2025-12-13T15:25:03.179053-08:00","closed_at":"2025-12-13T15:25:03.179053-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-gpusl.4","depends_on_id":"opencode-swarm-plugin-gpusl","type":"parent-child","created_at":"2025-12-13T15:21:23.869987-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-h2ban","title":"Gap: Memory leak potential in Map-based caching","description":"src/streams/index.ts:50,53 - instances and schemaInitialized Maps grow unbounded if many different projectPaths are used (e.g., scanning many repos). Should: implement LRU eviction, max cache size, or TTL for unused instances. Also: closeDatabase() is provided but nothing calls it automatically - consider idle timeout to auto-close.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:36.484187-08:00","updated_at":"2025-12-13T09:55:54.155264-08:00","closed_at":"2025-12-13T09:55:54.155264-08:00"}
{"id":"opencode-swarm-plugin-h2wai","title":"Add JSDoc to fallbackBehaviors explaining usage","description":"src/tool-availability.ts:217-225 - fallbackBehaviors object lacks JSDoc. Add: \"/** Human-readable descriptions of graceful degradation behavior when tools are unavailable. Shown to users in warnings and tool status output. */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:10.385729-08:00","updated_at":"2025-12-13T16:41:52.233653-08:00","closed_at":"2025-12-13T16:41:52.233653-08:00"}
{"id":"opencode-swarm-plugin-hbag9","title":"Gap: No schema version migration system","description":"src/streams/index.ts:131-211 - initializeSchema() uses CREATE TABLE IF NOT EXISTS but no version tracking or migration system. If schema changes in future (add column, change index), existing databases won't upgrade. Should: add schema_version table, track current version, run migrations on version mismatch, provide rollback capability. See tools like node-pg-migrate or implement simple version check.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:24.051926-08:00","updated_at":"2025-12-13T15:51:25.795239-08:00","closed_at":"2025-12-13T15:51:25.795239-08:00"}
{"id":"opencode-swarm-plugin-helin","title":"Document subtask index in SubtaskDependency","description":"src/schemas/task.ts:46-47 - `from` and `to` fields say \"subtask index\" but don't clarify zero-based. Add: \"/** Zero-based subtask index */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:24.053154-08:00","updated_at":"2025-12-13T16:45:48.648104-08:00","closed_at":"2025-12-13T16:45:48.648104-08:00"}
{"id":"opencode-swarm-plugin-hnl2n","title":"Document Event-Sourced Agent Mail \u0026 Assess Production Readiness","description":"Add architecture documentation for the new embedded event-sourced Agent Mail system to README, create ASCII diagram, and audit production readiness gaps","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T09:23:28.557826-08:00","updated_at":"2025-12-13T09:26:41.728913-08:00","closed_at":"2025-12-13T09:26:41.728913-08:00"}
{"id":"opencode-swarm-plugin-hnl2n.1","title":"Add Event-Sourced Architecture section to README","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:23:28.61425-08:00","updated_at":"2025-12-13T09:26:35.261715-08:00","closed_at":"2025-12-13T09:26:35.261715-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-hnl2n.1","depends_on_id":"opencode-swarm-plugin-hnl2n","type":"parent-child","created_at":"2025-12-13T09:23:28.615237-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-hnl2n.2","title":"Audit production readiness and create gap analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:23:28.673264-08:00","updated_at":"2025-12-13T09:26:37.366564-08:00","closed_at":"2025-12-13T09:26:37.366564-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-hnl2n.2","depends_on_id":"opencode-swarm-plugin-hnl2n","type":"parent-child","created_at":"2025-12-13T09:23:28.674348-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-hyj89","title":"Add module-level JSDoc to structured.ts","description":"src/structured.ts:1-12 - Good module doc but missing usage guidance. Add: \"Usage: 1) structured_extract_json for raw extraction, 2) structured_validate for schema validation, 3) structured_parse_* for typed parsing\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:36.497225-08:00","updated_at":"2025-12-13T16:45:42.956445-08:00","closed_at":"2025-12-13T16:45:42.956445-08:00"}
{"id":"opencode-swarm-plugin-i6dpl","title":"Add usage example to resetToolCache JSDoc","description":"src/tool-availability.ts:369-372 - resetToolCache says \"for testing\" but doesn't explain when else to use. Add: \"/** Reset tool cache. Use in tests, or when tool availability may have changed (e.g., after installing a tool). */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:13.17266-08:00","updated_at":"2025-12-13T16:41:53.358205-08:00","closed_at":"2025-12-13T16:41:53.358205-08:00"}
{"id":"opencode-swarm-plugin-ierlm","title":"Simplify double destructuring in structured_parse_evaluation","description":"src/structured.ts:444 - `(v as { passed: boolean }).passed` type assertion is verbose. Since we've validated with EvaluationSchema, use type guard or cast validated earlier: `const criterion = v as CriterionEvaluation; criterion.passed`","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:57.069749-08:00","updated_at":"2025-12-13T16:45:47.110329-08:00","closed_at":"2025-12-13T16:45:47.110329-08:00"}
{"id":"opencode-swarm-plugin-ifb8b","title":"Gap: Insufficient logging/observability","description":"src/streams/store.ts, agent-mail.ts - No logging for critical operations: event appends, materialized view updates, database errors, conflicts detected. Makes debugging production issues hard. Should add structured logging (console.error/warn at minimum) for: database connection errors, event append failures, projection update failures, conflict detection, reservation operations. Consider: log levels (info/warn/error), context fields (projectKey, agentName, eventType).","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:07.066447-08:00","updated_at":"2025-12-13T16:06:34.32075-08:00","closed_at":"2025-12-13T16:06:34.32075-08:00"}
{"id":"opencode-swarm-plugin-ijzjd","title":"Update README to document skills feature","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:46:13.821586-08:00","updated_at":"2025-12-12T21:49:38.634771-08:00","closed_at":"2025-12-12T21:49:38.634771-08:00"}
{"id":"opencode-swarm-plugin-it2ke","title":"Event-Sourced Beads: Full TypeScript Replacement","description":"Replace steveyegge/beads Go CLI with TypeScript implementation using event sourcing, Effect-TS durable streams, and adapter pattern. Lives inside swarm-mail package. Shares PGLite database. TDD throughout.\n\n## Context Survival Protocol (ALL AGENTS MUST FOLLOW)\n1. Checkpoint frequently - After completing any significant unit of work\n2. Bead updates are checkpoints - Update bead description with progress summary  \n3. Commit early, commit often - Small atomic commits preserve work\n4. Test files are documentation - Tests survive context loss, comments don't\n5. If context gets heavy - Use /checkpoint before continuing\n\n## Key References\n- steveyegge/beads cloned at ~/.opencode-autopsy/steveyegge/beads\n- internal/types/types.go - Issue struct, Status, IssueType, Dependency\n- internal/storage/storage.go - Storage interface (60+ methods)\n- internal/merge/merge.go - 3-way JSONL merge (MIT, port to TS)\n\n## Architecture\n- Beads code lives in swarm-mail/src/beads/\n- Shares DatabaseAdapter with agent-mail\n- Events in shared event store, bead-specific projections\n- JSONL exports projections (not events) for git sync","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-16T13:40:19.534435-08:00","updated_at":"2025-12-16T15:40:28.481364-08:00","closed_at":"2025-12-16T15:40:28.481364-08:00"}
{"id":"opencode-swarm-plugin-it2ke.17","title":"BeadsAdapter Interface \u0026 Database Schema","description":"Define BeadsAdapter interface. Add bead tables to shared PGLite. FILES: swarm-mail/src/types/beads-adapter.ts, swarm-mail/src/beads/migrations.ts, projections.ts. TABLES: beads, bead_dependencies, bead_labels, bead_comments, blocked_beads_cache, dirty_beads. TDD first. REF: steveyegge/beads internal/storage/sqlite/schema.go","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T13:42:17.255403-08:00","updated_at":"2025-12-16T13:51:40.408287-08:00","closed_at":"2025-12-16T13:51:40.408287-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.17","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:17.256639-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.18","title":"Bead Event Store Integration","description":"Integrate 20 bead event types into event store. FILES: swarm-mail/src/beads/store.ts, adapter.ts + tests. IMPL: updateMaterializedViews for all bead events, createBeadsAdapter factory. DEPENDS: Subtask 1","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:42:21.889186-08:00","updated_at":"2025-12-16T14:07:53.433497-08:00","closed_at":"2025-12-16T14:07:53.433497-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.18","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:21.889773-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.18","depends_on_id":"opencode-swarm-plugin-it2ke.17","type":"blocks","created_at":"2025-12-16T13:42:49.370308-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.19","title":"Core Issue CRUD Operations","description":"Issue lifecycle: create, get, update, close, delete, reopen. FILES: swarm-mail/src/beads/operations.ts, validation.ts + tests. VALIDATION: Title max 500, priority 0-4, status transitions, tombstones. DEPENDS: Subtask 2","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:42:23.507049-08:00","updated_at":"2025-12-16T14:20:31.93294-08:00","closed_at":"2025-12-16T14:20:31.93294-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.19","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:23.507492-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.19","depends_on_id":"opencode-swarm-plugin-it2ke.18","type":"blocks","created_at":"2025-12-16T13:42:56.762082-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.20","title":"Dependencies, Labels \u0026 Comments","description":"Dependency graph, labels, comments. FILES: swarm-mail/src/beads/dependencies.ts, labels.ts, comments.ts + tests. DEP TYPES: blocks, related, parent-child, discovered-from, replies-to, relates-to, duplicates, supersedes. DEPENDS: Subtask 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T13:42:24.443287-08:00","updated_at":"2025-12-16T14:38:14.923886-08:00","closed_at":"2025-12-16T14:38:14.923886-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.20","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:24.443658-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.20","depends_on_id":"opencode-swarm-plugin-it2ke.19","type":"blocks","created_at":"2025-12-16T13:42:56.831301-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.21","title":"Ready Work \u0026 Blocked Queries","description":"Ready work query, blocked cache, epic closure. FILES: swarm-mail/src/beads/queries.ts, blocked-cache.ts + tests. QUERIES: getReadyWork, getBlockedIssues, getEpicsEligibleForClosure. SORT: hybrid, priority, oldest. DEPENDS: Subtask 4","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T13:42:25.777091-08:00","updated_at":"2025-12-16T14:52:26.16765-08:00","closed_at":"2025-12-16T14:52:26.16765-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.21","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:25.777511-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.21","depends_on_id":"opencode-swarm-plugin-it2ke.20","type":"blocks","created_at":"2025-12-16T13:42:56.894228-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.22","title":"JSONL Export/Import \u0026 Dirty Tracking","description":"JSONL git sync with dirty tracking. FILES: swarm-mail/src/beads/jsonl.ts, flush-manager.ts + tests. EXPORT: From projections, hash dedup. IMPORT: Hash match skip, update or insert. FLUSH: 30s debounce. DEPENDS: Subtask 5","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T13:42:27.286649-08:00","updated_at":"2025-12-16T15:40:22.762193-08:00","closed_at":"2025-12-16T15:40:22.762193-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.22","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:27.287516-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.22","depends_on_id":"opencode-swarm-plugin-it2ke.21","type":"blocks","created_at":"2025-12-16T13:42:56.944054-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.23","title":"3-Way Merge Driver","description":"Port MIT merge driver to TypeScript. FILES: swarm-mail/src/beads/merge.ts + tests. SOURCE: steveyegge/beads internal/merge/merge.go. TOMBSTONE: wins over live, expired allows resurrection. DEPENDS: Subtask 6","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T13:42:28.643137-08:00","updated_at":"2025-12-16T15:18:26.003469-08:00","closed_at":"2025-12-16T15:18:26.003469-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.23","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:28.643577-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.23","depends_on_id":"opencode-swarm-plugin-it2ke.22","type":"blocks","created_at":"2025-12-16T13:42:56.99293-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-it2ke.24","title":"Plugin Tools Migration","description":"Migrate beads_* tools to BeadsAdapter. FILES: opencode-swarm-plugin/src/beads.ts + integration tests. TOOLS: beads_create, create_epic, query, update, close, start, ready, sync. COMPAT: Same Zod schemas. DEPENDS: Subtask 7","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T13:42:29.949789-08:00","updated_at":"2025-12-16T15:39:38.608076-08:00","closed_at":"2025-12-16T15:39:38.608076-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-it2ke.24","depends_on_id":"opencode-swarm-plugin-it2ke","type":"parent-child","created_at":"2025-12-16T13:42:29.950204-08:00","created_by":"daemon"},{"issue_id":"opencode-swarm-plugin-it2ke.24","depends_on_id":"opencode-swarm-plugin-it2ke.23","type":"blocks","created_at":"2025-12-16T13:42:57.046057-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-jf6gz","title":"Add repo-crawl tools to swarm plugin","description":"repo-crawl is essential for research tasks. Should be part of the plugin rather than a separate MCP server.\n\nTools to add:\n- repo_readme(repo) - Get README content\n- repo_structure(repo) - Get repo structure and tech stack\n- repo_tree(repo, path?) - Get directory tree\n- repo_file(repo, path) - Get file content\n- repo_search(repo, query) - Search code in repo\n\nImplementation:\n- Use GitHub API (unauthenticated for public repos, GITHUB_TOKEN for private)\n- Add to tool-availability.ts checks\n- Integrate with research-based strategy\n\nFiles: src/repo-crawl.ts (new), src/index.ts, src/tool-availability.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-10T11:01:29.213791-08:00","updated_at":"2025-12-10T11:09:20.028842-08:00","closed_at":"2025-12-10T11:09:20.028842-08:00"}
{"id":"opencode-swarm-plugin-jp6ah","title":"Create \"publish-package-cicd\" skill - Changesets + Trusted Publishers workflow","description":"## Goal\n\nCreate a reusable skill documenting the complete CI/CD publishing workflow for npm packages using Changesets + npm Trusted Publishers (OIDC).\n\n## What to Document\n\n### The Flow\n1. Create changeset file manually (not interactive `bunx changeset`)\n2. Commit + push to main\n3. GitHub Actions creates release PR via `changesets/action`\n4. Merge PR → auto-publishes via OIDC (no npm token needed)\n\n### Key Gotchas Learned\n- **NEVER run `bunx changeset version` or `bunx changeset publish` locally** - requires GITHUB_TOKEN\n- **workspace:\\* protocol** - needs custom publish script (`bun pm pack` + `npm publish tarball`)\n- **Exclude non-published packages** from turbo build in publish.yml (e.g., `--filter='!@swarmtools/web'`)\n- **Changeset ignore** only affects versioning, NOT builds\n- **postinstall scripts** for generated types (fumadocs, etc.)\n- **Lockfile sync** - `bun install` before `bun pm pack` to resolve workspace:\\*\n\n### Files to Reference\n- `.github/workflows/publish.yml`\n- `.changeset/config.json`\n- `scripts/publish.ts`\n- `AGENTS.md` (Publishing section)\n\n### Skill Structure\n```\nglobal-skills/publish-package-cicd/\n├── SKILL.md\n└── references/\n    ├── publish-workflow.yml (example)\n    ├── changeset-config.json (example)\n    └── publish-script.ts (example)\n```\n\n## Success Criteria\n- Skill can be loaded to guide setting up publishing for a new monorepo\n- Covers Bun + Turborepo + Changesets + npm OIDC\n- Includes troubleshooting for common failures","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T08:18:33.084334-08:00","updated_at":"2025-12-15T08:24:16.309451-08:00","closed_at":"2025-12-15T08:24:16.309451-08:00"}
{"id":"opencode-swarm-plugin-k9jxm","title":"Extract magic number 9 to constant in recordPatternObservation","description":"src/anti-patterns.ts:189 - `.slice(-9)` to keep last 10 examples (9 + new = 10) is not obvious. Extract to constant: `const MAX_EXAMPLE_BEADS = 10;` and use `slice(-(MAX_EXAMPLE_BEADS - 1))`","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:19.594675-08:00","updated_at":"2025-12-13T16:41:54.755714-08:00","closed_at":"2025-12-13T16:41:54.755714-08:00"}
{"id":"opencode-swarm-plugin-kg04n","title":"Production-Ready Swarm Mail + Skills Integration","description":"Fix 18 production readiness gaps in Swarm Mail (error handling, race conditions, logging, timeouts, pagination, cleanup) and update CLI prompts/templates to leverage global skills effectively","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T09:50:37.986193-08:00","updated_at":"2025-12-13T16:45:57.642789-08:00","closed_at":"2025-12-13T16:45:57.642789-08:00"}
{"id":"opencode-swarm-plugin-kg04n.1","title":"Fix database singleton: error handling, race condition, process exit handlers","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:50:38.047239-08:00","updated_at":"2025-12-13T10:00:16.730133-08:00","closed_at":"2025-12-13T10:00:16.730133-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.1","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.048675-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.2","title":"Fix store.ts: transaction rollback, N+1 queries, pagination","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:50:38.103935-08:00","updated_at":"2025-12-13T15:59:41.133577-08:00","closed_at":"2025-12-13T15:59:41.133577-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.2","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.105771-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.3","title":"Add logging, timeouts, and reservation cleanup","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T09:50:38.162535-08:00","updated_at":"2025-12-13T15:59:41.674936-08:00","closed_at":"2025-12-13T15:59:41.674936-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.3","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.163973-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.4","title":"Add schema migration system","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T09:50:38.223066-08:00","updated_at":"2025-12-13T16:45:52.324654-08:00","closed_at":"2025-12-13T16:45:52.324654-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.4","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.224391-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.5","title":"Add performance monitoring and thread safety docs","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T09:50:38.282357-08:00","updated_at":"2025-12-13T16:41:58.122669-08:00","closed_at":"2025-12-13T16:41:58.122669-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.5","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.283586-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.6","title":"Update CLI prompts to leverage global skills","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T09:50:38.335876-08:00","updated_at":"2025-12-13T09:54:29.523416-08:00","closed_at":"2025-12-13T09:54:29.523416-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.6","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.336793-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kg04n.7","title":"Document MCP migration path and update README","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T09:50:38.389891-08:00","updated_at":"2025-12-13T16:41:59.947546-08:00","closed_at":"2025-12-13T16:41:59.947546-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-kg04n.7","depends_on_id":"opencode-swarm-plugin-kg04n","type":"parent-child","created_at":"2025-12-13T09:50:38.391664-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-kmlbm","title":"swarm.ts:820-840 - queryEpicSubtasks returns empty on error with only warning","description":"swarm.ts:820-840 - queryEpicSubtasks logs warning on failure but returns empty array. Callers can't distinguish between \"no subtasks\" and \"query failed\". Could cause incorrect status reporting. Suggested fix: Throw error or return Result type.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:26.391059-08:00","updated_at":"2025-12-10T11:56:19.38476-08:00","closed_at":"2025-12-10T11:56:19.38476-08:00"}
{"id":"opencode-swarm-plugin-kr0ue","title":"Document shared_context usage pattern","description":"src/schemas/task.ts:62 - `shared_context` field comment \"Context to pass to all agents\" is vague. Add example: \"/** Shared context for all agents (e.g., API contracts, shared types, project conventions) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:27.641899-08:00","updated_at":"2025-12-13T16:45:49.63414-08:00","closed_at":"2025-12-13T16:45:49.63414-08:00"}
{"id":"opencode-swarm-plugin-kzs3m","title":"Gap: Reservation expiry not enforced on read","description":"src/streams/projections.ts:215-242 - getActiveReservations() filters by expires_at \u003e now, but expired reservations are never cleaned up from DB. Over time, reservations table grows with expired entries. Should: add cleanup job to DELETE expired reservations, or VACUUM old data. Consider: periodic cleanup on health check, TTL-based auto-deletion, or expose cleanup API.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:39.780369-08:00","updated_at":"2025-12-13T15:51:25.259688-08:00","closed_at":"2025-12-13T15:51:25.259688-08:00"}
{"id":"opencode-swarm-plugin-l5i5e","title":"Add validation message for datetime schema","description":"src/schemas/bead.ts:51-53 - datetime schemas have default Zod error messages. Add custom message: `.datetime({ offset: true, message: \"Must be ISO-8601 with timezone\" })`","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:08.592079-08:00","updated_at":"2025-12-13T16:48:08.881079-08:00","closed_at":"2025-12-13T16:48:08.881079-08:00"}
{"id":"opencode-swarm-plugin-ljchj","title":"Add minimum observation threshold to formatMaturityForPrompt","description":"src/pattern-maturity.ts:337-354 - formatMaturityForPrompt shows percentages even for 1 observation (100% from 1 sample is misleading). Add check: if total \u0026lt; 3, show \"Limited data (N observations)\" instead of percentages.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:42.236056-08:00","updated_at":"2025-12-13T16:20:31.992553-08:00","closed_at":"2025-12-13T16:20:31.992553-08:00"}
{"id":"opencode-swarm-plugin-lknkj","title":"Full Repo Audit: Post-Restructure Verification","description":"Comprehensive audit of monorepo after Bun + Turborepo restructure. Verify builds, tests, types, dependencies, and documentation accuracy.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T19:39:31.733006-08:00","updated_at":"2025-12-14T19:49:10.041148-08:00","closed_at":"2025-12-14T19:49:10.041148-08:00"}
{"id":"opencode-swarm-plugin-lknkj.1","title":"Audit swarm-mail package: types, deps, exports","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:39:31.807644-08:00","updated_at":"2025-12-14T19:48:57.992422-08:00","closed_at":"2025-12-14T19:48:57.992422-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.1","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:31.810264-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-lknkj.2","title":"Audit opencode-swarm-plugin package: types, deps, exports","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:39:31.88511-08:00","updated_at":"2025-12-14T19:48:59.295686-08:00","closed_at":"2025-12-14T19:48:59.295686-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.2","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:31.885806-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-lknkj.3","title":"Run and fix test suites for both packages","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:39:31.935981-08:00","updated_at":"2025-12-14T19:49:00.666823-08:00","closed_at":"2025-12-14T19:49:00.666823-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.3","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:31.936603-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-lknkj.4","title":"Audit root workspace config and turbo pipeline","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:39:31.990364-08:00","updated_at":"2025-12-14T19:49:01.644607-08:00","closed_at":"2025-12-14T19:49:01.644607-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.4","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:31.993052-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-lknkj.5","title":"Audit documentation accuracy post-restructure","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:39:32.047096-08:00","updated_at":"2025-12-14T19:49:03.288623-08:00","closed_at":"2025-12-14T19:49:03.288623-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.5","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:32.047728-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-lknkj.6","title":"Dead code and unused export cleanup","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:39:32.108029-08:00","updated_at":"2025-12-14T19:49:04.295344-08:00","closed_at":"2025-12-14T19:49:04.295344-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-lknkj.6","depends_on_id":"opencode-swarm-plugin-lknkj","type":"parent-child","created_at":"2025-12-14T19:39:32.110605-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-manrh","title":"Gap: No performance monitoring or slow query logging","description":"All query operations - No timing instrumentation to detect slow queries. In production, you'd want to know which operations are taking \u003e1s. Should: add query timing wrapper, log slow queries (\u003e100ms threshold), emit metrics for appendEvent, readEvents, projection updates. Consider: performance.now() wrapper, histogram of query times, alerting on P99 latency.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-13T09:25:32.95699-08:00","updated_at":"2025-12-13T16:41:59.389137-08:00","closed_at":"2025-12-13T16:41:59.389137-08:00"}
{"id":"opencode-swarm-plugin-me8rq","title":"Release workflow: changesets + PR review","description":"Create changesets for recent features, review incoming PR #15 (bundled skills sync), monitor release workflow","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T11:40:03.291458-08:00","updated_at":"2025-12-16T12:03:06.902457-08:00","closed_at":"2025-12-16T12:03:06.902457-08:00"}
{"id":"opencode-swarm-plugin-me8rq.1","title":"Create changeset for worker survival + Socratic planning","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:40:03.414798-08:00","updated_at":"2025-12-16T11:51:18.255337-08:00","closed_at":"2025-12-16T11:51:18.255337-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-me8rq.1","depends_on_id":"opencode-swarm-plugin-me8rq","type":"parent-child","created_at":"2025-12-16T11:40:03.415598-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-me8rq.2","title":"Review and verify PR #15 (bundled skills sync)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:40:03.556477-08:00","updated_at":"2025-12-16T11:52:05.114466-08:00","closed_at":"2025-12-16T11:52:05.114466-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-me8rq.2","depends_on_id":"opencode-swarm-plugin-me8rq","type":"parent-child","created_at":"2025-12-16T11:40:03.557683-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-me8rq.3","title":"Monitor release workflow and merge changeset PR","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:40:03.702817-08:00","updated_at":"2025-12-16T12:03:05.10638-08:00","closed_at":"2025-12-16T12:03:05.10638-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-me8rq.3","depends_on_id":"opencode-swarm-plugin-me8rq","type":"parent-child","created_at":"2025-12-16T11:40:03.703739-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-mqhmm","title":"Document extraction strategy priority order","description":"src/structured.ts:118-190 - extractJsonFromText tries 6 strategies but priority reasoning not documented. Add JSDoc: \"Strategies tried in order: 1) direct parse (fastest), 2-3) code blocks (common), 4-5) brace matching (resilient), 6) repair (last resort)\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:42.644422-08:00","updated_at":"2025-12-13T16:45:43.863641-08:00","closed_at":"2025-12-13T16:45:43.863641-08:00"}
{"id":"opencode-swarm-plugin-ncmif","title":"Integrate superpowers verification \u0026 quality patterns","description":"Add Verification Gate to swarm_complete, CSO validation to skills_create, 3-Strike Detection, Socratic strategy for swarm decomposition, and coordinator context preservation pattern. Based on analysis of obra/superpowers repo.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T14:09:25.492623-08:00","updated_at":"2025-12-13T15:50:51.023656-08:00","closed_at":"2025-12-13T15:50:51.023656-08:00"}
{"id":"opencode-swarm-plugin-ncmif.1","title":"Add CSO validation to skills_create","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T14:09:25.550394-08:00","updated_at":"2025-12-13T14:18:35.456019-08:00","closed_at":"2025-12-13T14:18:35.456019-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ncmif.1","depends_on_id":"opencode-swarm-plugin-ncmif","type":"parent-child","created_at":"2025-12-13T14:09:25.55131-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ncmif.2","title":"Add Verification Gate + Socratic strategy to swarm.ts","description":"COMPLETED: Added Verification Gate to swarm_complete.\n\nImplements the Gate Function (IDENTIFY → RUN → READ → VERIFY → CLAIM):\n1. UBS scan (existing)\n2. Typecheck verification (new) - runs tsc --noEmit\n3. Test verification (new) - runs tests for touched files\n\nAll steps must pass before bead can be closed. Adds skip_verification param for escape hatch.\n\nFiles modified:\n- src/swarm.ts: Added runTypecheckVerification(), runTestVerification(), runVerificationGate(), updated swarm_complete tool","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T14:09:25.600836-08:00","updated_at":"2025-12-13T14:49:56.515815-08:00","closed_at":"2025-12-13T14:49:56.515815-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ncmif.2","depends_on_id":"opencode-swarm-plugin-ncmif","type":"parent-child","created_at":"2025-12-13T14:09:25.601585-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ncmif.3","title":"Implement 3-Strike Detection","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T14:09:25.654605-08:00","updated_at":"2025-12-13T14:18:37.578898-08:00","closed_at":"2025-12-13T14:18:37.578898-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ncmif.3","depends_on_id":"opencode-swarm-plugin-ncmif","type":"parent-child","created_at":"2025-12-13T14:09:25.655388-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ncmif.4","title":"Update docs with context preservation pattern","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T14:09:25.712789-08:00","updated_at":"2025-12-13T14:18:39.306665-08:00","closed_at":"2025-12-13T14:18:39.306665-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ncmif.4","depends_on_id":"opencode-swarm-plugin-ncmif","type":"parent-child","created_at":"2025-12-13T14:09:25.714085-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-nnu9l","title":"Pattern: Defense-in-Depth - 4 Layers of Validation","description":"## Defense-in-Depth Validation (from obra/superpowers)\n\n**Core Principle:** Single validation = \"We fixed the bug\". Multiple layers = \"We made the bug structurally impossible.\"\n\n### The 4 Layers\n**Layer 1: Entry Point Validation**\n- Reject obviously invalid input at API boundary\n- Check: not empty, exists, is correct type\n\n**Layer 2: Business Logic Validation**\n- Ensure data makes sense for this operation\n- Check: required fields, valid ranges, business rules\n\n**Layer 3: Environment Guards**\n- Prevent dangerous operations in specific contexts\n- Example: Refuse git init outside temp dir during tests\n\n**Layer 4: Debug Instrumentation**\n- Capture context for forensics\n- Log: directory, cwd, environment, stack trace\n\n### Why All 4 Layers\nAll four layers are necessary because:\n- Different code paths bypass entry validation\n- Mocks bypass business logic checks\n- Edge cases on different platforms need environment guards\n- Debug logging identifies structural misuse\n\n### Application Process\nWhen you find a bug:\n1. **Trace the data flow** - Where does bad value originate? Where used?\n2. **Map all checkpoints** - List every point data passes through\n3. **Add validation at each layer** - Entry, business, environment, debug\n4. **Test each layer** - Try to bypass layer 1, verify layer 2 catches it\n\n### Real Example\nBug: Empty `projectDir` caused `git init` in source code\n\nLayers added:\n- Layer 1: `Project.create()` validates not empty/exists/writable\n- Layer 2: `WorkspaceManager` validates projectDir not empty\n- Layer 3: `WorktreeManager` refuses git init outside tmpdir in tests\n- Layer 4: Stack trace logging before git init\n\nResult: 1847 tests passed, bug impossible to reproduce\n\n**Full analysis:** VERIFICATION_QUALITY_PATTERNS.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T14:01:12.487844-08:00","updated_at":"2025-12-13T15:50:55.223043-08:00","closed_at":"2025-12-13T15:50:55.223043-08:00"}
{"id":"opencode-swarm-plugin-o8i7h","title":"Extract magic number 200 to constant in structured.ts","description":"src/structured.ts:329 - Magic number 200 for preview length. Extract to constant: `const RAW_INPUT_PREVIEW_LENGTH = 200;` and use it on lines 329, 380.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:49.829007-08:00","updated_at":"2025-12-13T16:45:45.52985-08:00","closed_at":"2025-12-13T16:45:45.52985-08:00"}
{"id":"opencode-swarm-plugin-p35nv","title":"Drizzle ORM Feasibility Analysis for swarm-mail","description":"Research-only analysis of migrating swarm-mail from raw SQL to Drizzle ORM. Evaluate PGLite compatibility, migration strategy, type-safety benefits, adapter interface impact, testing implications, and performance considerations. No code changes. Related to existing bead opencode-swarm-plugin-13fho.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T12:15:35.230593-08:00","updated_at":"2025-12-16T12:15:45.661949-08:00","closed_at":"2025-12-16T12:15:45.661949-08:00"}
{"id":"opencode-swarm-plugin-phkfw","title":"Gap: No fallback if PGLite initialization fails","description":"src/streams/index.ts:58-78 \u0026 agent-mail.ts - If PGLite fails to initialize (corrupted DB, disk issues), entire agent-mail system is unusable. No graceful degradation or in-memory fallback. Should: detect init failure, offer in-memory mode for session, log clear error with recovery instructions, or provide \"rebuild database\" option. Critical for production reliability.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-13T09:25:03.421024-08:00","updated_at":"2025-12-13T09:34:08.051882-08:00","closed_at":"2025-12-13T09:34:08.051882-08:00"}
{"id":"opencode-swarm-plugin-pkguj","title":"Document PatternKind vs is_negative field relationship","description":"src/anti-patterns.ts:32-35 - DecompositionPatternSchema has both `kind: \"anti_pattern\"` and `is_negative: true` which seem redundant. Add JSDoc clarifying: \"/** kind tracks pattern lifecycle (pattern→anti_pattern), is_negative is a derived boolean flag for quick filtering */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:16.47239-08:00","updated_at":"2025-12-13T16:41:54.120691-08:00","closed_at":"2025-12-13T16:41:54.120691-08:00"}
{"id":"opencode-swarm-plugin-poiyi","title":"Document EffortLevel time ranges in schema comment","description":"src/schemas/task.ts:12-17 - Time ranges only in inline comments. Move to JSDoc for better IDE support: \"/** Effort estimation: trivial (\u003c 5 min), small (5-30 min), medium (30 min - 2 hours), large (2+ hours) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:20.198569-08:00","updated_at":"2025-12-13T16:45:47.639416-08:00","closed_at":"2025-12-13T16:45:47.639416-08:00"}
{"id":"opencode-swarm-plugin-ppyaf","title":"Clarify dependencies default value behavior","description":"src/schemas/bead.ts:55 - `dependencies` uses `.optional().default([])` which is redundant - optional with default is always present. Change to just `.default([])` for clarity.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:09.341547-08:00","updated_at":"2025-12-13T16:48:08.412935-08:00","closed_at":"2025-12-13T16:48:08.412935-08:00"}
{"id":"opencode-swarm-plugin-pqe1f","title":"agent-mail.ts:122-131 - Non-atomic session state save","description":"agent-mail.ts:122-131 - saveSessionState() writes directly to target file without atomic write-then-rename pattern. Could corrupt state if process crashes mid-write. Suggested fix: Write to temp file, then rename atomically.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:01.116799-08:00","updated_at":"2025-12-13T08:52:55.939004-08:00","closed_at":"2025-12-13T08:52:55.939004-08:00"}
{"id":"opencode-swarm-plugin-ps1jm","title":"learning.ts:197-234 - calculateCriterionWeight doesn't handle empty events","description":"learning.ts:197-234 - calculateCriterionWeight accesses events[0]?.criterion when events array is empty, returning \"unknown\". Callers may not expect this. Suggested fix: Require non-empty events array or return error result.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:40.768084-08:00","updated_at":"2025-12-10T11:56:10.918368-08:00","closed_at":"2025-12-10T11:56:10.918368-08:00"}
{"id":"opencode-swarm-plugin-psfm3","title":"swarm.ts:1710-1725 - Critical bug blocking silently continues on parse error","description":"swarm.ts:1710-1725 - swarm_complete catches Zod parse errors on evaluation but doesn't block completion for critical issues beyond evaluation. If UBS returns parse errors, they're ignored. Suggested fix: Block completion on UBS parse errors too.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:35.874785-08:00","updated_at":"2025-12-10T11:56:12.284646-08:00","closed_at":"2025-12-10T11:56:12.284646-08:00"}
{"id":"opencode-swarm-plugin-pwwfa","title":"Add TDD section to AGENTS.md with lore from prime knowledge","description":"Added TDD as default development approach with RED-GREEN-REFACTOR. Includes lore from Kent Beck, Michael Feathers, and Ousterhout counterpoint about when TDD can lead to tactical programming.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:07:58.982391-08:00","updated_at":"2025-12-13T09:08:02.759949-08:00","closed_at":"2025-12-13T09:08:02.759949-08:00"}
{"id":"opencode-swarm-plugin-qb5pt","title":"Document weight field decay semantics","description":"src/schemas/evaluation.ts:34-35 - weight comment \"lower = less reliable\" could be more specific. Change to: \"/** Current weight after 90-day half-life decay (0-1, 1=recent/validated, 0=old/unreliable) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:15.949005-08:00","updated_at":"2025-12-13T16:48:06.823057-08:00","closed_at":"2025-12-13T16:48:06.823057-08:00"}
{"id":"opencode-swarm-plugin-qgt38","title":"Document SubtaskSpec estimated_complexity scale","description":"src/schemas/bead.ts:106 - `estimated_complexity: z.number().int().min(1).max(5)` - scale meaning not documented. Add JSDoc: \"/** Complexity estimate (1=trivial, 5=very complex) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:10.789511-08:00","updated_at":"2025-12-13T16:48:07.924735-08:00","closed_at":"2025-12-13T16:48:07.924735-08:00"}
{"id":"opencode-swarm-plugin-qhj39","title":"Codebase Quality Analysis and Improvement Ideas","description":"Parallel analysis of opencode-swarm-plugin codebase across multiple dimensions: architecture, testing, performance, error handling, and code organization","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:46:33.460464-08:00","updated_at":"2025-12-13T16:35:47.684376-08:00","closed_at":"2025-12-13T16:35:47.684376-08:00"}
{"id":"opencode-swarm-plugin-qhj39.1","title":"Architecture and Module Design Analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:46:33.527617-08:00","updated_at":"2025-12-13T16:14:01.218929-08:00","closed_at":"2025-12-13T16:14:01.218929-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qhj39.1","depends_on_id":"opencode-swarm-plugin-qhj39","type":"parent-child","created_at":"2025-12-13T13:46:33.528576-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qhj39.2","title":"Testing Coverage and Quality Analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:46:33.587114-08:00","updated_at":"2025-12-13T16:14:02.185091-08:00","closed_at":"2025-12-13T16:14:02.185091-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qhj39.2","depends_on_id":"opencode-swarm-plugin-qhj39","type":"parent-child","created_at":"2025-12-13T13:46:33.587953-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qhj39.3","title":"Error Handling and Resilience Analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:46:33.638663-08:00","updated_at":"2025-12-13T16:14:02.957291-08:00","closed_at":"2025-12-13T16:14:02.957291-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qhj39.3","depends_on_id":"opencode-swarm-plugin-qhj39","type":"parent-child","created_at":"2025-12-13T13:46:33.639443-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qhj39.4","title":"Performance and Resource Management Analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:46:33.692921-08:00","updated_at":"2025-12-13T16:14:03.860041-08:00","closed_at":"2025-12-13T16:14:03.860041-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qhj39.4","depends_on_id":"opencode-swarm-plugin-qhj39","type":"parent-child","created_at":"2025-12-13T13:46:33.693758-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qhj39.5","title":"Synthesis: Prioritized Improvement Roadmap","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T13:46:33.748664-08:00","updated_at":"2025-12-13T16:35:46.458137-08:00","closed_at":"2025-12-13T16:35:46.458137-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qhj39.5","depends_on_id":"opencode-swarm-plugin-qhj39","type":"parent-child","created_at":"2025-12-13T13:46:33.749458-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qkscs","title":"Production Hardening: Logging, Cleanup, and N+1 Fixes","description":"Fix 3 production readiness gaps in Swarm Mail to improve reliability and debuggability","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:27:21.122378-08:00","updated_at":"2025-12-13T15:51:22.811521-08:00","closed_at":"2025-12-13T15:51:22.811521-08:00"}
{"id":"opencode-swarm-plugin-qkscs.1","title":"Fix N+1 queries in store.ts message and reservation handlers","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:27:21.179002-08:00","updated_at":"2025-12-13T15:51:23.583961-08:00","closed_at":"2025-12-13T15:51:23.583961-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qkscs.1","depends_on_id":"opencode-swarm-plugin-qkscs","type":"parent-child","created_at":"2025-12-13T13:27:21.180631-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qkscs.2","title":"Implement expired reservation cleanup in projections.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:27:21.234033-08:00","updated_at":"2025-12-13T15:51:24.090427-08:00","closed_at":"2025-12-13T15:51:24.090427-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qkscs.2","depends_on_id":"opencode-swarm-plugin-qkscs","type":"parent-child","created_at":"2025-12-13T13:27:21.235438-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qkscs.3","title":"Add structured logging for critical operations","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:27:21.287551-08:00","updated_at":"2025-12-13T15:51:24.600571-08:00","closed_at":"2025-12-13T15:51:24.600571-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-qkscs.3","depends_on_id":"opencode-swarm-plugin-qkscs","type":"parent-child","created_at":"2025-12-13T13:27:21.288503-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-qmkwc","title":"Add JSDoc to plugin.ts exports","description":"src/plugin.ts:1-12 - File has warning about exports but no JSDoc explaining why. Add: \"/** CRITICAL: Only export the plugin function. OpenCode plugin loader calls all exports as functions, so exporting classes/constants will cause load failures. */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:59.660536-08:00","updated_at":"2025-12-13T16:41:57.162635-08:00","closed_at":"2025-12-13T16:41:57.162635-08:00"}
{"id":"opencode-swarm-plugin-qnwm4","title":"swarm_complete fails silently when bead project doesn't match CWD","description":"**Problem:**\nWhen `swarm_complete` is called with a bead ID from a different project than the current working directory, `bd close` fails because it looks for `.beads/` in CWD, not the project from the bead ID.\n\n**Fix:**\n1. Use `project_key` as working directory for `bd close` via `.cwd(args.project_key)`\n2. Improved error messages with context-specific recovery steps\n3. Added planning guardrails to warn when agents use todowrite for parallel work\n\n**Also added:**\n- `planning-guardrails.ts` - Warns when agents create 6+ file-modification todos (should use swarm instead)\n- `tool.execute.before` hook to intercept todowrite calls","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T13:13:33.914956-08:00","updated_at":"2025-12-16T13:20:35.087497-08:00","closed_at":"2025-12-16T13:20:35.087497-08:00"}
{"id":"opencode-swarm-plugin-qoe7","title":"swarm_complete and swarm_progress tools fail due to swarm-mail import error","description":"","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-17T08:52:57.259149-08:00","updated_at":"2025-12-17T08:52:57.259149-08:00"}
{"id":"opencode-swarm-plugin-qvym","title":"swarm-mail missing createBeadsAdapter export breaks swarm plugin tools","description":"","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-17T08:52:47.145981-08:00","updated_at":"2025-12-17T08:52:47.145981-08:00"}
{"id":"opencode-swarm-plugin-r0r95","title":"Extract swarm-mail as standalone npm package (monorepo conversion)","description":"## Extract swarm-mail as standalone npm package (monorepo conversion)\n\n### Architecture Decision: Adapter Pattern\n\n**Key insight from coursebuilder's adapter-drizzle:** Code against interfaces, accept database as dependency injection.\n\n```typescript\n// swarm-mail exports adapter factory\nexport function createSwarmMailAdapter(db: DatabaseAdapter) {\n  return {\n    appendEvent: (event) =\u003e ...,\n    sendMessage: (msg) =\u003e ...,\n    // etc\n  }\n}\n\n// Consumer owns database, passes to swarm-mail\nconst db = new PGlite('./my-db');\nconst swarmMail = createSwarmMailAdapter(db);\n```\n\n### Benefits\n- **Portable**: Works with PGLite, Postgres, Turso, any SQL database\n- **Testable**: Easy to inject in-memory instances\n- **Shareable**: One database instance across multiple consumers\n- **Decoupled**: swarm-mail doesn't own database lifecycle\n\n### Interface Design\n```typescript\n// packages/swarm-mail/src/adapter.ts\nexport interface DatabaseAdapter {\n  query\u003cT\u003e(sql: string, params?: unknown[]): Promise\u003c{ rows: T[] }\u003e;\n  exec(sql: string): Promise\u003cvoid\u003e;\n}\n\nexport interface SwarmMailAdapter {\n  // Event store\n  appendEvent(event: AgentEvent): Promise\u003cAgentEvent \u0026 { id: number }\u003e;\n  readEvents(options?: ReadOptions): Promise\u003cAgentEvent[]\u003e;\n  \n  // Agent mail\n  sendMessage(msg: MessageInput): Promise\u003cMessage\u003e;\n  getInbox(agent: string, options?: InboxOptions): Promise\u003cMessage[]\u003e;\n  \n  // File reservations\n  reserveFiles(agent: string, paths: string[]): Promise\u003cReservation[]\u003e;\n  releaseFiles(agent: string): Promise\u003cvoid\u003e;\n  \n  // Locks\n  acquireLock(resource: string, holder: string): Promise\u003cLock\u003e;\n  releaseLock(resource: string, holder: string): Promise\u003cvoid\u003e;\n}\n```\n\n### Convenience Layer (for simple usage)\n```typescript\n// packages/swarm-mail/src/pglite.ts\nimport { PGlite } from '@electric-sql/pglite';\nimport { createSwarmMailAdapter } from './adapter';\n\n// Singleton cache for convenience API\nconst instances = new Map\u003cstring, SwarmMailAdapter\u003e();\n\nexport async function getSwarmMail(projectPath?: string): Promise\u003cSwarmMailAdapter\u003e {\n  const dbPath = getDatabasePath(projectPath);\n  if (!instances.has(dbPath)) {\n    const db = new PGlite(dbPath);\n    await runMigrations(db);\n    instances.set(dbPath, createSwarmMailAdapter(db));\n  }\n  return instances.get(dbPath)!;\n}\n```\n\n### Phase 1 Tasks (Updated)\n1. ✅ Set up Turborepo monorepo infrastructure\n2. ✅ Move streams infrastructure to swarm-mail package\n3. 🔄 Define DatabaseAdapter and SwarmMailAdapter interfaces\n4. 🔄 Refactor to adapter pattern (inject db, don't create)\n5. 🔄 Add PGLite convenience layer\n6. 🔄 Update opencode-swarm-plugin to use adapter\n7. 🔄 Migrate tests\n8. 🔄 Verify build and prepare for publish","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T15:14:45.066749-08:00","updated_at":"2025-12-14T16:22:01.120043-08:00","closed_at":"2025-12-14T16:22:01.120043-08:00"}
{"id":"opencode-swarm-plugin-r0r95.1","title":"Set up Turborepo monorepo infrastructure","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:14:45.130796-08:00","updated_at":"2025-12-14T15:17:53.227577-08:00","closed_at":"2025-12-14T15:17:53.227577-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.1","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.131656-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r0r95.2","title":"Move streams infrastructure to swarm-mail package","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:14:45.190487-08:00","updated_at":"2025-12-14T15:22:26.738459-08:00","closed_at":"2025-12-14T15:22:26.738459-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.2","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.191289-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r0r95.3","title":"Move agent-mail and swarm-mail APIs to package","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:14:45.246268-08:00","updated_at":"2025-12-14T16:21:49.81394-08:00","closed_at":"2025-12-14T16:21:49.81394-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.3","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.247128-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r0r95.4","title":"Update imports in opencode-swarm-plugin to use swarm-mail","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:14:45.322767-08:00","updated_at":"2025-12-14T16:18:30.071448-08:00","closed_at":"2025-12-14T16:18:30.071448-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.4","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.33101-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r0r95.5","title":"Migrate tests to swarm-mail package","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T15:14:45.387372-08:00","updated_at":"2025-12-14T16:21:50.612458-08:00","closed_at":"2025-12-14T16:21:50.612458-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.5","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.391464-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r0r95.6","title":"Verify build and prepare for publish","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T15:14:45.456388-08:00","updated_at":"2025-12-14T16:21:51.846756-08:00","closed_at":"2025-12-14T16:21:51.846756-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-r0r95.6","depends_on_id":"opencode-swarm-plugin-r0r95","type":"parent-child","created_at":"2025-12-14T15:14:45.459389-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-r5glh","title":"Add constraint between status and blockers fields","description":"src/schemas/task.ts:107-111 - AgentProgressSchema has `status: \"blocked\"` and `blockers` array but no validation linking them. Add `.refine()` to require blockers when status is blocked.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:34.320563-08:00","updated_at":"2025-12-13T16:45:51.156357-08:00","closed_at":"2025-12-13T16:45:51.156357-08:00"}
{"id":"opencode-swarm-plugin-rbaar","title":"Validate swarm context death survival claims","description":"The docs claim swarms survive context compaction via checkpoints. Code exists (swarm_checkpoint, swarm_recover) but is UNTESTED. Need to prove it actually works or fix it.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T19:14:14.622192-08:00","updated_at":"2025-12-15T19:41:05.015196-08:00","closed_at":"2025-12-15T19:41:05.015196-08:00"}
{"id":"opencode-swarm-plugin-rbaar.1","title":"Add integration tests for checkpoint/recovery flow","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T19:14:14.69491-08:00","updated_at":"2025-12-15T19:20:47.375221-08:00","closed_at":"2025-12-15T19:20:47.37523-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rbaar.1","depends_on_id":"opencode-swarm-plugin-rbaar","type":"parent-child","created_at":"2025-12-15T19:14:14.698121-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rbaar.2","title":"Fix any bugs found during test writing","description":"BUG FOUND: Tests incorrectly require Agent Mail when checkpoint/recovery uses swarm-mail (embedded PGLite). Tests should use swarm-mail directly, not Agent Mail MCP. Fix the test skip conditions and test setup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T19:14:14.772265-08:00","updated_at":"2025-12-15T19:37:58.078017-08:00","closed_at":"2025-12-15T19:37:58.078017-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rbaar.2","depends_on_id":"opencode-swarm-plugin-rbaar","type":"parent-child","created_at":"2025-12-15T19:14:14.773097-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rbaar.3","title":"Update docs to reflect actual capabilities","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T19:14:14.856446-08:00","updated_at":"2025-12-15T19:40:58.468773-08:00","closed_at":"2025-12-15T19:40:58.468773-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rbaar.3","depends_on_id":"opencode-swarm-plugin-rbaar","type":"parent-child","created_at":"2025-12-15T19:14:14.857223-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rbaar.4","title":"Create manual recovery test scenario","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T19:14:14.933436-08:00","updated_at":"2025-12-15T19:40:59.437446-08:00","closed_at":"2025-12-15T19:40:59.437446-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rbaar.4","depends_on_id":"opencode-swarm-plugin-rbaar","type":"parent-child","created_at":"2025-12-15T19:14:14.934165-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rbaud","title":"Inline Swarm Mail architecture into README","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:48:15.768044-08:00","updated_at":"2025-12-14T14:49:13.602901-08:00","closed_at":"2025-12-14T14:49:13.602901-08:00"}
{"id":"opencode-swarm-plugin-rlgfi","title":"agent-mail.ts:1115-1120 - Unexpected response structure not validated","description":"agent-mail.ts:1115-1120 - agentmail_reserve checks for null result but doesn't validate the shape of result.granted. If API changes and returns non-array, error message is generic. Suggested fix: Validate result shape with Zod or detailed error message.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:09.12539-08:00","updated_at":"2025-12-13T08:52:57.705844-08:00","closed_at":"2025-12-13T08:52:57.705844-08:00"}
{"id":"opencode-swarm-plugin-rpe7q","title":"learning.ts:423-437 - InMemoryFeedbackStorage has unbounded memory growth","description":"learning.ts:423-437 - InMemoryFeedbackStorage stores all events in array with no cleanup or size limit. Long-running sessions could OOM. Suggested fix: Add max size with LRU eviction or periodic cleanup.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:45.008479-08:00","updated_at":"2025-12-10T11:56:09.251539-08:00","closed_at":"2025-12-10T11:56:09.251539-08:00"}
{"id":"opencode-swarm-plugin-rrkua","title":"Plan Swarm Mail Improvements + Monorepo Conversion","description":"Research and planning swarm to produce ADRs, architecture docs, and implementation roadmap for extracting Swarm Mail as independent package with performance improvements","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T14:57:23.560042-08:00","updated_at":"2025-12-14T15:06:15.264762-08:00","closed_at":"2025-12-14T15:06:15.264762-08:00"}
{"id":"opencode-swarm-plugin-rrkua.1","title":"Research: Monorepo structure with Turborepo + Bun workspaces","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:57:23.619965-08:00","updated_at":"2025-12-14T15:06:10.919713-08:00","closed_at":"2025-12-14T15:06:10.919713-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rrkua.1","depends_on_id":"opencode-swarm-plugin-rrkua","type":"parent-child","created_at":"2025-12-14T14:57:23.621634-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rrkua.2","title":"Research: PGLite LISTEN/NOTIFY + Connection Pooling","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:57:23.679372-08:00","updated_at":"2025-12-14T15:06:11.636126-08:00","closed_at":"2025-12-14T15:06:11.636126-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rrkua.2","depends_on_id":"opencode-swarm-plugin-rrkua","type":"parent-child","created_at":"2025-12-14T14:57:23.680294-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rrkua.3","title":"Research: Message Queue Patterns (Priorities, DLQ, TTL, Sagas)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:57:23.737984-08:00","updated_at":"2025-12-14T15:06:12.26288-08:00","closed_at":"2025-12-14T15:06:12.26288-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rrkua.3","depends_on_id":"opencode-swarm-plugin-rrkua","type":"parent-child","created_at":"2025-12-14T14:57:23.73927-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rrkua.4","title":"Research: DevTools UI + Observability Architecture","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:57:23.797762-08:00","updated_at":"2025-12-14T15:06:13.027038-08:00","closed_at":"2025-12-14T15:06:13.027038-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rrkua.4","depends_on_id":"opencode-swarm-plugin-rrkua","type":"parent-child","created_at":"2025-12-14T14:57:23.799538-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rrkua.5","title":"Synthesize: Write ADRs and Implementation Roadmap","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T14:57:23.86154-08:00","updated_at":"2025-12-14T15:06:13.910564-08:00","closed_at":"2025-12-14T15:06:13.910564-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rrkua.5","depends_on_id":"opencode-swarm-plugin-rrkua","type":"parent-child","created_at":"2025-12-14T14:57:23.862437-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u","title":"Setup Fumadocs on swarmtools.ai","description":"Install and configure Fumadocs documentation framework on the Next.js 16 web app. Includes: dependencies, Tailwind CSS 4 integration, MDX content source, docs routes, and sample content.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T07:50:09.093396-08:00","updated_at":"2025-12-15T07:59:32.315728-08:00","closed_at":"2025-12-15T07:59:32.315728-08:00"}
{"id":"opencode-swarm-plugin-rys2u.1","title":"Install Fumadocs dependencies and configure MDX source","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T07:50:09.187754-08:00","updated_at":"2025-12-15T07:53:34.515055-08:00","closed_at":"2025-12-15T07:53:34.515059-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.1","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.189275-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u.2","title":"Setup Tailwind CSS 4 with Fumadocs styles","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T07:50:09.261171-08:00","updated_at":"2025-12-15T07:53:34.897201-08:00","closed_at":"2025-12-15T07:53:34.897205-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.2","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.262074-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u.3","title":"Create lib/source.ts and lib/layout.shared.tsx","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T07:50:09.329315-08:00","updated_at":"2025-12-15T07:54:47.135151-08:00","closed_at":"2025-12-15T07:54:47.135151-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.3","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.33008-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u.4","title":"Update root layout with RootProvider and styles","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T07:50:09.398231-08:00","updated_at":"2025-12-15T07:54:29.847935-08:00","closed_at":"2025-12-15T07:54:29.847935-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.4","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.399604-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u.5","title":"Create docs routes and MDX components","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T07:50:09.468806-08:00","updated_at":"2025-12-15T07:59:24.756202-08:00","closed_at":"2025-12-15T07:59:24.756202-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.5","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.469772-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-rys2u.6","title":"Add sample documentation content","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T07:50:09.544492-08:00","updated_at":"2025-12-15T07:59:25.854763-08:00","closed_at":"2025-12-15T07:59:25.854763-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-rys2u.6","depends_on_id":"opencode-swarm-plugin-rys2u","type":"parent-child","created_at":"2025-12-15T07:50:09.545306-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-s4xfg","title":"Simplify errorBullets initialization in StructuredValidationError","description":"src/structured.ts:47 - `this.errorBullets = zodError ? formatZodErrors(zodError) : [message];` could use nullish coalescing for clarity: `this.errorBullets = zodError ? formatZodErrors(zodError) : [message];` (no change needed, but could assign in constructor params for cleaner code)","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:39.878643-08:00","updated_at":"2025-12-13T16:45:43.398628-08:00","closed_at":"2025-12-13T16:45:43.398628-08:00"}
{"id":"opencode-swarm-plugin-sd9ev","title":"MCP Output Guardrails + Evalite Integration","description":"Add context protection via tool output interception and quality evaluation framework using Evalite","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T17:53:20.125833-08:00","updated_at":"2025-12-13T18:01:50.731899-08:00","closed_at":"2025-12-13T18:01:50.731899-08:00"}
{"id":"opencode-swarm-plugin-sd9ev.1","title":"Implement output-guardrails.ts module","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T17:53:20.183296-08:00","updated_at":"2025-12-13T18:00:10.410723-08:00","closed_at":"2025-12-13T18:00:10.410723-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sd9ev.1","depends_on_id":"opencode-swarm-plugin-sd9ev","type":"parent-child","created_at":"2025-12-13T17:53:20.184446-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sd9ev.2","title":"Integrate guardrails into plugin hook","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T17:53:20.240057-08:00","updated_at":"2025-12-13T18:00:05.172185-08:00","closed_at":"2025-12-13T18:00:05.172185-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sd9ev.2","depends_on_id":"opencode-swarm-plugin-sd9ev","type":"parent-child","created_at":"2025-12-13T17:53:20.241272-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sd9ev.3","title":"Set up Evalite infrastructure","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T17:53:20.293998-08:00","updated_at":"2025-12-13T18:00:11.418403-08:00","closed_at":"2025-12-13T18:00:11.418403-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sd9ev.3","depends_on_id":"opencode-swarm-plugin-sd9ev","type":"parent-child","created_at":"2025-12-13T17:53:20.294691-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sd9ev.4","title":"Create swarm decomposition eval","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T17:53:20.346751-08:00","updated_at":"2025-12-13T18:01:49.491638-08:00","closed_at":"2025-12-13T18:01:49.491638-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sd9ev.4","depends_on_id":"opencode-swarm-plugin-sd9ev","type":"parent-child","created_at":"2025-12-13T17:53:20.348143-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sdb4r","title":"agent-mail.ts:380-398 - Missing cleanup after process spawn","description":"agent-mail.ts:380-398 - restartServer() spawns processes but doesn't track them for cleanup. If kill commands fail or processes don't respond, orphaned processes accumulate. Suggested fix: Store PIDs and add cleanup handler.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:03.389992-08:00","updated_at":"2025-12-13T08:52:56.497517-08:00","closed_at":"2025-12-13T08:52:56.497517-08:00"}
{"id":"opencode-swarm-plugin-simya","title":"Pattern: Fresh Subagent Per Task - No Context Pollution","description":"## Fresh Subagent Per Task (from obra/superpowers)\n\n**Core Principle:** Each agent starts clean, reads requirements, executes, reports back. No context pollution.\n\n### Why Fresh Subagents\n- TDD comes naturally (no accumulated assumptions)\n- Parallel-safe (subagents don't interfere)\n- Catches issues early (code review after each task)\n- Cheaper than debugging cascading failures\n\n### Subagent-Driven Development Workflow\n1. Load plan, create TodoWrite\n2. For each task:\n   - Dispatch implementation subagent\n   - Dispatch code-reviewer subagent\n   - Fix issues from review (dispatch fix subagent, NOT manual)\n   - Mark complete\n3. Final review of entire implementation\n4. Use finishing-a-development-branch skill\n\n### Agent Prompt Best Practices\n**1. Focused** - One clear problem domain\n```\n❌ \"Fix all the tests\"\n✓ \"Fix agent-tool-abort.test.ts\"\n```\n\n**2. Self-contained** - All context needed\n```\n❌ \"Fix the race condition\"\n✓ \"Fix the 3 failing tests in src/agents/agent-tool-abort.test.ts:\n   1. 'should abort tool with partial output capture'...\"\n```\n\n**3. Specific about output**\n```\n❌ \"Fix it\"\n✓ \"Return: Summary of root cause and what you fixed\"\n```\n\n**4. Constraints** - Prevent scope creep\n```\n✓ \"Do NOT just increase timeouts - find the real issue\"\n✓ \"Don't refactor - minimal changes to make tests pass\"\n```\n\n### Red Flags\n- Skip code review between tasks\n- Proceed with unfixed Critical issues\n- Dispatch multiple implementation subagents in parallel (conflicts)\n- Fix subagent failures manually (context pollution)\n\n**Full analysis:** docs/analysis/subagent-coordination-patterns.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T14:00:40.843556-08:00","updated_at":"2025-12-13T15:50:54.544856-08:00","closed_at":"2025-12-13T15:50:54.544856-08:00"}
{"id":"opencode-swarm-plugin-sj43f","title":"Repo rename: Update all docs, READMEs, SEO for swarmtools.ai","description":"Complete documentation overhaul after repo rename. Fix SEO metadata, update all READMEs with swarmtools.ai links and ASCII art, create comprehensive docs for what exists today, add roadmap, update home page.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T09:56:42.232091-08:00","updated_at":"2025-12-15T10:06:24.760333-08:00","closed_at":"2025-12-15T10:06:24.760333-08:00"}
{"id":"opencode-swarm-plugin-sj43f.1","title":"Fix SEO metadata and add docs link to home page","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T09:56:42.314368-08:00","updated_at":"2025-12-15T10:06:23.052979-08:00","closed_at":"2025-12-15T10:06:23.052979-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sj43f.1","depends_on_id":"opencode-swarm-plugin-sj43f","type":"parent-child","created_at":"2025-12-15T09:56:42.315749-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sj43f.2","title":"Update root README with swarmtools.ai branding","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T09:56:42.400385-08:00","updated_at":"2025-12-15T09:58:34.346097-08:00","closed_at":"2025-12-15T09:58:34.346097-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sj43f.2","depends_on_id":"opencode-swarm-plugin-sj43f","type":"parent-child","created_at":"2025-12-15T09:56:42.401279-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sj43f.3","title":"Update opencode-swarm-plugin package README","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T09:56:42.477689-08:00","updated_at":"2025-12-15T09:58:22.306341-08:00","closed_at":"2025-12-15T09:58:22.306341-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sj43f.3","depends_on_id":"opencode-swarm-plugin-sj43f","type":"parent-child","created_at":"2025-12-15T09:56:42.478476-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sj43f.4","title":"Update swarm-mail package README","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T09:56:42.54507-08:00","updated_at":"2025-12-15T09:58:32.133094-08:00","closed_at":"2025-12-15T09:58:32.133094-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sj43f.4","depends_on_id":"opencode-swarm-plugin-sj43f","type":"parent-child","created_at":"2025-12-15T09:56:42.545818-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-sj43f.5","title":"Create comprehensive docs for existing features","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T09:56:42.617788-08:00","updated_at":"2025-12-15T10:04:50.26419-08:00","closed_at":"2025-12-15T10:04:50.26419-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-sj43f.5","depends_on_id":"opencode-swarm-plugin-sj43f","type":"parent-child","created_at":"2025-12-15T09:56:42.618499-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-spe6m","title":"Create publish-package-cicd skill","description":"Create a reusable skill documenting Changesets + npm Trusted Publishers workflow for Bun monorepos. Based on learnings from opencode-swarm-plugin publishing setup.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T08:24:09.643989-08:00","updated_at":"2025-12-15T08:27:37.737366-08:00","closed_at":"2025-12-15T08:27:37.737366-08:00"}
{"id":"opencode-swarm-plugin-spe6m.1","title":"SKILL.md - Core workflow documentation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T08:24:09.786831-08:00","updated_at":"2025-12-15T08:27:36.666095-08:00","closed_at":"2025-12-15T08:27:36.666095-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-spe6m.1","depends_on_id":"opencode-swarm-plugin-spe6m","type":"parent-child","created_at":"2025-12-15T08:24:09.787796-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-spe6m.2","title":"Reference files - Example configs and scripts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T08:24:09.876555-08:00","updated_at":"2025-12-15T08:27:37.284952-08:00","closed_at":"2025-12-15T08:27:37.284952-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-spe6m.2","depends_on_id":"opencode-swarm-plugin-spe6m","type":"parent-child","created_at":"2025-12-15T08:24:09.877328-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-spr1z","title":"Gap: No error handling in getDatabase initialization","description":"src/streams/index.ts:58-78 - getDatabase() has no try/catch around PGLite instantiation or schema initialization. If PGLite fails to initialize (e.g., disk full, permissions issue), the error will propagate uncaught. Should wrap in try/catch and provide graceful degradation or clear error message. Consider: retry logic, fallback to in-memory mode, or circuit breaker pattern.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:24:44.317017-08:00","updated_at":"2025-12-13T09:55:52.136578-08:00","closed_at":"2025-12-13T09:55:52.136578-08:00"}
{"id":"opencode-swarm-plugin-ss6em","title":"Eval Data Capture \u0026 Outcome-Based Scoring","description":"Wire real swarm execution data into evals. Add event capture to durable streams, outcome-based scorers, and PGlite-backed eval data loader. Make swarm-mail default for agents.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T09:00:23.215537-08:00","updated_at":"2025-12-14T09:32:11.570116-08:00","closed_at":"2025-12-14T09:32:11.570116-08:00"}
{"id":"opencode-swarm-plugin-ss6em.1","title":"Add eval capture events to durable streams","description":"✅ Added 3 new eval capture event types to AgentEvent discriminated union:\n- DecompositionGeneratedEvent (captures task, context, strategy, epic_title, subtasks array)\n- SubtaskOutcomeEvent (captures planned_files, actual_files, duration_ms, error_count, retry_count, success)\n- HumanFeedbackEvent (captures accepted, modified, notes)\n\nAll schemas follow existing patterns with Zod validation.\nAdded comprehensive tests covering:\n- Complete event validation\n- Default value handling\n- Enum/bounds validation\n- Edge cases\n\nTypeScript: ✓ No errors\nTests: ✓ 230 pass (all existing + 15 new tests for eval events)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:00:23.27377-08:00","updated_at":"2025-12-14T09:12:34.904686-08:00","closed_at":"2025-12-14T09:12:34.904686-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.1","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.275265-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ss6em.2","title":"Create eval_records projection and materialized view","description":"Completed implementation:\n- Added migration v3 for eval_records table\n- Added event handlers for decomposition_generated, subtask_outcome, human_feedback\n- Implemented metric computation (file overlap, scope accuracy, time balance ratio)\n- Added query functions getEvalRecords() and getEvalStats()\n- All typechecks pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:00:23.327955-08:00","updated_at":"2025-12-14T09:19:31.685729-08:00","closed_at":"2025-12-14T09:19:31.685729-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.2","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.328686-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ss6em.3","title":"Add outcome-based scorers for Evalite","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:00:23.390475-08:00","updated_at":"2025-12-14T09:12:36.250094-08:00","closed_at":"2025-12-14T09:12:36.250094-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.3","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.391549-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ss6em.4","title":"Create PGlite-backed eval data loader","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:00:23.445093-08:00","updated_at":"2025-12-14T09:29:01.126814-08:00","closed_at":"2025-12-14T09:29:01.126814-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.4","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.446598-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ss6em.5","title":"Wire eval capture into swarm tools","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:00:23.496255-08:00","updated_at":"2025-12-14T09:19:30.723371-08:00","closed_at":"2025-12-14T09:19:30.723371-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.5","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.497591-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-ss6em.6","title":"Make swarm-mail initialization default for agents","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T09:00:23.556716-08:00","updated_at":"2025-12-14T09:12:37.331677-08:00","closed_at":"2025-12-14T09:12:37.331677-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-ss6em.6","depends_on_id":"opencode-swarm-plugin-ss6em","type":"parent-child","created_at":"2025-12-14T09:00:23.55747-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-t3kfd","title":"OIDC CI/CD + Semantic Memory Improvements","description":"Two parallel tracks: 1) GitHub Actions OIDC workflow for npm publishing, 2) Improve semantic memory usage patterns with mandatory triggers and test isolation\n\n**HUMAN CHORE REQUIRED FOR OIDC:**\nBefore the publish workflow will work, configure trusted publishers on npmjs.com:\n1. Go to each package's Settings → Trusted Publisher\n2. Set: Organization=joelhooks, Repository=opencode-swarm-plugin, Workflow=publish.yml\n3. Optionally add environment=npm for deployment protection\n\nRelated beads: 7lb2r (OIDC), dmji7 (semantic memory)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T19:53:13.425126-08:00","updated_at":"2025-12-14T20:00:02.919626-08:00","closed_at":"2025-12-14T20:00:02.919626-08:00"}
{"id":"opencode-swarm-plugin-t3kfd.1","title":"Create OIDC publish workflow for npm","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:53:13.492602-08:00","updated_at":"2025-12-14T19:54:43.830077-08:00","closed_at":"2025-12-14T19:54:43.830077-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-t3kfd.1","depends_on_id":"opencode-swarm-plugin-t3kfd","type":"parent-child","created_at":"2025-12-14T19:53:13.493617-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-t3kfd.2","title":"Add semantic memory mandatory triggers to AGENTS.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:53:13.560976-08:00","updated_at":"2025-12-14T19:54:57.704243-08:00","closed_at":"2025-12-14T19:54:57.704243-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-t3kfd.2","depends_on_id":"opencode-swarm-plugin-t3kfd","type":"parent-child","created_at":"2025-12-14T19:53:13.561795-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-t3kfd.3","title":"Add test isolation pattern for semantic memory","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:53:13.711548-08:00","updated_at":"2025-12-14T19:59:05.48433-08:00","closed_at":"2025-12-14T19:59:05.48433-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-t3kfd.3","depends_on_id":"opencode-swarm-plugin-t3kfd","type":"parent-child","created_at":"2025-12-14T19:53:13.712332-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-tqh2","title":"Add client-side rate limiting to Agent Mail tools","description":"Implement per-agent rate limiting with Redis primary and SQLite fallback. Prevents abuse and runaway agents. Client-side enforcement in plugin MCP tools.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T08:42:14.798392-08:00","updated_at":"2025-12-08T08:53:01.185866-08:00","closed_at":"2025-12-08T08:53:01.185866-08:00"}
{"id":"opencode-swarm-plugin-tqh2.1","title":"Create rate limiter module with Redis/SQLite backends","description":"Created src/rate-limiter.ts with:\n- RateLimiter interface (checkLimit, recordRequest, close)\n- RedisRateLimiter using sorted sets (ZADD/ZREMRANGEBYSCORE/ZCARD)\n- SqliteRateLimiter using bun:sqlite with sliding window COUNT queries\n- InMemoryRateLimiter for testing\n- createRateLimiter factory with Redis→SQLite fallback\n- Dual window enforcement (minute AND hour)\n- Default limits for all 8 endpoints\n- Env var overrides (OPENCODE_RATE_LIMIT_{ENDPOINT}_PER_{MIN,HOUR})","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:42:14.835835-08:00","updated_at":"2025-12-08T08:47:25.694259-08:00","closed_at":"2025-12-08T08:47:25.694259-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-tqh2.1","depends_on_id":"opencode-swarm-plugin-tqh2","type":"parent-child","created_at":"2025-12-08T08:42:14.836202-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-tqh2.2","title":"Integrate rate limiting into agent-mail tools","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:42:14.870719-08:00","updated_at":"2025-12-08T08:51:56.178029-08:00","closed_at":"2025-12-08T08:51:56.178029-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-tqh2.2","depends_on_id":"opencode-swarm-plugin-tqh2","type":"parent-child","created_at":"2025-12-08T08:42:14.871065-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-tqh2.3","title":"Add ioredis dependency","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:42:14.904031-08:00","updated_at":"2025-12-08T08:47:26.337047-08:00","closed_at":"2025-12-08T08:47:26.337047-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-tqh2.3","depends_on_id":"opencode-swarm-plugin-tqh2","type":"parent-child","created_at":"2025-12-08T08:42:14.904351-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-tqh2.4","title":"Write rate limiter integration tests","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T08:42:14.935221-08:00","updated_at":"2025-12-08T08:53:00.06109-08:00","closed_at":"2025-12-08T08:53:00.06109-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-tqh2.4","depends_on_id":"opencode-swarm-plugin-tqh2","type":"parent-child","created_at":"2025-12-08T08:42:14.935525-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-tqh2.5","title":"Update documentation with rate limiting section","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T08:42:14.965572-08:00","updated_at":"2025-12-08T08:47:27.018163-08:00","closed_at":"2025-12-08T08:47:27.018163-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-tqh2.5","depends_on_id":"opencode-swarm-plugin-tqh2","type":"parent-child","created_at":"2025-12-08T08:42:14.965912-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-twoql","title":"Bug: Remove all agentmail references - replace with swarmmail","description":"## Problem\nCurrent version still has agentmail_init references that cause errors. We removed agentmail from exports in v0.14.0 but prompts/docs still reference it.\n\n## Task\nFind and replace ALL agentmail references with swarmmail equivalents:\n- agentmail_init → swarmmail_init\n- agentmail_send → swarmmail_send\n- agentmail_inbox → swarmmail_inbox\n- agentmail_read_message → swarmmail_read_message\n- agentmail_reserve → swarmmail_reserve\n- agentmail_release → swarmmail_release\n\n## Files to Check\n- src/swarm.ts (SUBTASK_PROMPT_V2 and other prompts)\n- examples/commands/*.md\n- global-skills/**/*.md\n- Any other prompt templates\n\n## Verification\nAfter fix: grep -r \"agentmail\" should return 0 results (except maybe comments explaining the migration)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T14:18:28.580449-08:00","updated_at":"2025-12-13T14:21:45.26748-08:00","closed_at":"2025-12-13T14:21:45.26748-08:00"}
{"id":"opencode-swarm-plugin-u0g5m","title":"agent-mail.ts:103 - Missing validation for session state integrity","description":"agent-mail.ts:98-104 - loadSessionState() doesn't validate the parsed JSON against AgentMailState schema. Corrupted state files could cause runtime errors. Suggested fix: Parse with Zod schema validation.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:05:59.013695-08:00","updated_at":"2025-12-13T08:52:55.376137-08:00","closed_at":"2025-12-13T08:52:55.376137-08:00"}
{"id":"opencode-swarm-plugin-u3q34","title":"Swarm Mail Migration - Rename \u0026 Integrate Durable Streams","description":"Rename agent-mail to swarm-mail across the codebase, integrate Effect-TS Durable Streams primitives into the embedded implementation, and swap out the MCP client for the embedded PGLite implementation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T10:46:25.642744-08:00","updated_at":"2025-12-13T11:08:19.303362-08:00","closed_at":"2025-12-13T11:08:19.303362-08:00"}
{"id":"opencode-swarm-plugin-u3q34.1","title":"Rename streams/agent-mail.ts to streams/swarm-mail.ts with Effect integration","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T10:46:25.696738-08:00","updated_at":"2025-12-13T10:50:15.095031-08:00","closed_at":"2025-12-13T10:50:15.095031-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.1","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.697614-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.2","title":"Create new src/swarm-mail.ts plugin tools using embedded implementation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T10:46:25.745126-08:00","updated_at":"2025-12-13T11:01:23.384649-08:00","closed_at":"2025-12-13T11:01:23.384649-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.2","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.745886-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.3","title":"Update src/index.ts exports and plugin registration","description":"Completed:\n- Added swarmMailTools import from ./swarm-mail.ts\n- Added setSwarmMailProjectDirectory call in plugin init (after agentMailTools)\n- Added swarmMailTools to tools registry\n- Added swarmMailTools to allTools registry\n- Updated JSDoc comments to mention swarm-mail tools (marked agent-mail as legacy)\n- Added comprehensive re-export section for swarm-mail module\n- Fixed swarmMailTools export structure (array → object) to match agentMailTools pattern\n- Typecheck passes with zero errors\n- Both agentMailTools and swarmMailTools now coexist for backward compatibility","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:46:25.797106-08:00","updated_at":"2025-12-13T11:07:52.101315-08:00","closed_at":"2025-12-13T11:07:52.101315-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.3","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.798033-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.4","title":"Update src/swarm.ts integration points","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:46:25.848869-08:00","updated_at":"2025-12-13T11:07:53.078537-08:00","closed_at":"2025-12-13T11:07:53.078537-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.4","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.849699-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.5","title":"Update tool-availability.ts and supporting modules","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:46:25.897832-08:00","updated_at":"2025-12-13T11:07:53.974396-08:00","closed_at":"2025-12-13T11:07:53.974396-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.5","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.898654-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.6","title":"Migrate tests from agent-mail to swarm-mail","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:46:25.947081-08:00","updated_at":"2025-12-13T11:07:54.960497-08:00","closed_at":"2025-12-13T11:07:54.960497-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.6","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.94776-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u3q34.7","title":"Remove old agent-mail.ts and update documentation","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T10:46:25.99697-08:00","updated_at":"2025-12-13T16:42:01.379047-08:00","closed_at":"2025-12-13T16:42:01.379047-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-u3q34.7","depends_on_id":"opencode-swarm-plugin-u3q34","type":"parent-child","created_at":"2025-12-13T10:46:25.997868-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-u5m4w","title":"Document state transition side effects in updatePatternMaturity","description":"src/pattern-maturity.ts:222-255 - updatePatternMaturity has side effects (sets promoted_at, deprecated_at) but not documented. Add JSDoc: \"Tracks state transitions by setting promoted_at/deprecated_at timestamps on first entry into proven/deprecated states.\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:33.62453-08:00","updated_at":"2025-12-13T16:20:34.138638-08:00","closed_at":"2025-12-13T16:20:34.138638-08:00"}
{"id":"opencode-swarm-plugin-u6gys","title":"Document reservation_ids relationship to Agent Mail","description":"src/schemas/task.ts:85 - `reservation_ids` lacks context. Add JSDoc: \"/** Agent Mail reservation IDs for file locking (used to release locks on completion) */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:32.169242-08:00","updated_at":"2025-12-13T16:45:50.582038-08:00","closed_at":"2025-12-13T16:45:50.582038-08:00"}
{"id":"opencode-swarm-plugin-ub4lk","title":"Extract swarm-mail as standalone package (monorepo conversion)","description":"## Next Implementation Task\n\nExtract `swarm-mail` as standalone npm package from opencode-swarm-plugin.\n\n### Package Names (CONFIRMED)\n- `swarm-mail` - standalone actor-model library (npm available ✓)\n- `opencode-swarm-plugin` - stays as-is, will depend on swarm-mail\n\n### Planning Docs (DONE)\nSee docs/planning/:\n- ADR-001: Monorepo structure (Turborepo + Bun)\n- ADR-002: Package extraction strategy (5 phases)\n- ADR-003: Performance improvements (live queries)\n- ADR-004: Message queue features (priorities, DLQ, TTL)\n- ADR-005: DevTools + observability\n- ROADMAP: 12-week implementation plan\n\n### Phase 1: Monorepo Setup (Week 1-2)\n1. Install Turborepo, configure turbo.json\n2. Create packages/swarm-mail directory\n3. Set up workspace dependencies\n4. Configure TypeScript project references\n\n### Phase 2: Extract swarm-mail (Week 3-4)\n1. Move src/streams/* to packages/swarm-mail/src/\n2. Move agent-mail.ts, swarm-mail.ts\n3. Update imports in opencode-swarm-plugin\n4. Migrate integration tests\n5. Publish swarm-mail@0.1.0\n\n### Key Files to Move (~3K lines)\n- src/streams/*.ts (event sourcing, projections, store)\n- src/streams/effect/*.ts (DurableCursor, DurableDeferred, DurableLock, DurableMailbox)\n- src/agent-mail.ts\n- src/swarm-mail.ts\n\n### Success Criteria\n- [ ] swarm-mail published to npm independently\n- [ ] opencode-swarm-plugin depends on swarm-mail workspace:*\n- [ ] All tests pass\n- [ ] No breaking changes for existing users","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T15:12:38.941077-08:00","updated_at":"2025-12-14T15:14:56.623735-08:00","closed_at":"2025-12-14T15:14:56.623735-08:00"}
{"id":"opencode-swarm-plugin-uiw73","title":"Fix critical audit findings from swarm review","description":"Address critical bugs, race conditions, and quick wins identified by the 5-agent audit of opencode-swarm-plugin","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T08:55:18.929554-08:00","updated_at":"2025-12-10T09:00:56.759764-08:00","closed_at":"2025-12-10T09:00:56.759764-08:00"}
{"id":"opencode-swarm-plugin-uiw73.1","title":"Fix storage.ts critical issues: memory leak and unhandled promise rejection","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-10T08:55:18.968188-08:00","updated_at":"2025-12-10T09:00:45.23984-08:00","closed_at":"2025-12-10T09:00:45.23984-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-uiw73.1","depends_on_id":"opencode-swarm-plugin-uiw73","type":"parent-child","created_at":"2025-12-10T08:55:18.969322-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-uiw73.2","title":"Fix agent-mail.ts critical issues: state persistence and broken read_message","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-10T08:55:19.010778-08:00","updated_at":"2025-12-10T09:00:46.915622-08:00","closed_at":"2025-12-10T09:00:46.915622-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-uiw73.2","depends_on_id":"opencode-swarm-plugin-uiw73","type":"parent-child","created_at":"2025-12-10T08:55:19.011422-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-uiw73.3","title":"Fix beads.ts issues: epic rollback race condition and command injection risk","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-10T08:55:19.04992-08:00","updated_at":"2025-12-10T09:00:48.2312-08:00","closed_at":"2025-12-10T09:00:48.2312-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-uiw73.3","depends_on_id":"opencode-swarm-plugin-uiw73","type":"parent-child","created_at":"2025-12-10T08:55:19.058152-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-uiw73.4","title":"Fix schema validation: ISO-8601 timestamps and bead ID regex","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T08:55:19.102282-08:00","updated_at":"2025-12-10T09:00:49.432495-08:00","closed_at":"2025-12-10T09:00:49.432495-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-uiw73.4","depends_on_id":"opencode-swarm-plugin-uiw73","type":"parent-child","created_at":"2025-12-10T08:55:19.103868-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-uiw73.5","title":"Fix swarm.ts: dependency bounds validation and rate limiter race condition","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T08:55:19.146501-08:00","updated_at":"2025-12-10T09:00:50.467925-08:00","closed_at":"2025-12-10T09:00:50.467925-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-uiw73.5","depends_on_id":"opencode-swarm-plugin-uiw73","type":"parent-child","created_at":"2025-12-10T08:55:19.147495-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h","title":"Superpowers Repo Analysis - Extract Best Ideas as Beads","description":"Deep analysis of obra/superpowers repo to extract the best patterns, workflows, and ideas. Focus on Socratic Planner (brainstorming + writing-plans) and create full-context beads documenting findings for potential adoption into opencode-swarm-plugin.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T13:52:18.993949-08:00","updated_at":"2025-12-13T14:01:19.850383-08:00","closed_at":"2025-12-13T14:01:19.850383-08:00"}
{"id":"opencode-swarm-plugin-v737h.1","title":"Analyze Socratic Planner Pattern (brainstorming + writing-plans)","description":"Completed deep analysis of Socratic Planner pattern. Document created at docs/analysis-socratic-planner-pattern.md with:\n- 15 core principles extracted (brainstorming + writing-plans phases)\n- 12 anti-patterns identified with corrections\n- Complete workflow diagrams for both skills\n- Integration analysis with OpenCode Swarm\n- Recommendations for plugin adoption","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:52:19.054996-08:00","updated_at":"2025-12-13T13:59:32.042524-08:00","closed_at":"2025-12-13T13:59:32.042524-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.1","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.056551-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h.2","title":"Analyze Verification \u0026 Quality Patterns","description":"Extracted verification and quality patterns from superpowers repo. Created VERIFICATION_QUALITY_PATTERNS.md with:\n- 5 Core Principles (evidence-first, root cause, systematic, defense-in-depth, architecture questioning)\n- 3 Iron Laws (verification, investigation, tracing)\n- 4 Decision Frameworks (Gate Function, 4-Phase Debugging, Defense Layers, Root Cause Tracing)\n- Red flags and anti-patterns\n- Common failures table\n- Real-world impact evidence\n- Key quotes worth preserving","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:52:19.108939-08:00","updated_at":"2025-12-13T13:59:32.589761-08:00","closed_at":"2025-12-13T13:59:32.589761-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.2","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.110442-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h.3","title":"Analyze Subagent Coordination Patterns","description":"✓ Extracted subagent coordination patterns from obra/superpowers\n- Fresh subagent per task (prevents context pollution)\n- Mandatory code review between tasks (catch issues early)\n- Parallelize at 3+ independent failures (clear heuristic)\n- Focused agent prompts (self-contained, specific output, constraints)\n- Severity tiers: Critical (must fix), Important (should fix), Minor (note)\n- Fix subagent pattern (no manual coordinator fixes)\n- Same session vs parallel session strategies\n\nDocument: docs/analysis/subagent-coordination-patterns.md\n\nKey integrations for opencode-swarm-plugin:\n1. Add code review after swarm_complete\n2. Parallel dispatch at 3+ failures in debug-plus\n3. Severity-based UBS scan result triage\n4. Fix subagent toolkit addition","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:52:19.167761-08:00","updated_at":"2025-12-13T13:59:33.380442-08:00","closed_at":"2025-12-13T13:59:33.380442-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.3","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.169319-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h.4","title":"Analyze Skill Architecture \u0026 Meta-Skills","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:52:19.231112-08:00","updated_at":"2025-12-13T13:59:34.261473-08:00","closed_at":"2025-12-13T13:59:34.261473-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.4","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.231839-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h.5","title":"Analyze Workflow Integration \u0026 Branch Management","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:52:19.292894-08:00","updated_at":"2025-12-13T13:59:34.866091-08:00","closed_at":"2025-12-13T13:59:34.866091-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.5","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.294337-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v737h.6","title":"Synthesize Findings into Full-Context Beads","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T13:52:19.354131-08:00","updated_at":"2025-12-13T14:01:18.471937-08:00","closed_at":"2025-12-13T14:01:18.471937-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-v737h.6","depends_on_id":"opencode-swarm-plugin-v737h","type":"parent-child","created_at":"2025-12-13T13:52:19.355121-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-v74fo","title":"learning.ts:254-259 - Potential division by zero in decay calculation","description":"learning.ts:254-259 - scoreImplicitFeedback calls calculateDecayedValue but doesn't validate halfLifeDays isn't zero. If config is malformed, division by zero occurs. Suggested fix: Validate config or add bounds check.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-10T09:06:42.722198-08:00","updated_at":"2025-12-10T11:56:10.091823-08:00","closed_at":"2025-12-10T11:56:10.091823-08:00"}
{"id":"opencode-swarm-plugin-whh1n","title":"swarm_complete fails silently when bead is in blocked status","description":"## Problem\n`swarm_complete` tool returns generic \"Tool execution failed\" error without useful context.\n\n## Root Cause Analysis\nIn `src/swarm-orchestrate.ts:1216-1223`, the tool runs:\n```typescript\nconst closeResult = await Bun.$`bd close ${args.bead_id} --reason ${args.summary} --json`.quiet().nothrow();\nif (closeResult.exitCode !== 0) {\n  throw new Error(`Failed to close bead because bd close command failed: ${closeResult.stderr.toString()}...`);\n}\n```\n\nThe error message IS being generated, but it's being caught somewhere and converted to a generic \"Tool execution failed\" error before reaching the agent.\n\n## Additional Context (from Worker-2 session)\n- **Direct `bd close` works fine** - Running `bd close opencode-swarm-plugin-r0r95.2 --reason \"...\" --json` directly succeeds\n- **Bead was in `in_progress` status** - Not blocked, so status isn't the issue\n- **swarm_complete fails before bd close** - The failure happens earlier in the function\n- **Verification Gate may be the culprit** - Lines 1108-1143 run verification gate unless `skip_verification=true`\n- **Error notification also fails** - Lines 1482-1498 try to send swarm mail notification, but if that fails too, we get double-silent failure\n\n## Likely Failure Points (in order)\n1. **Verification Gate** (line 1108-1143) - Runs typecheck/UBS on files_touched\n2. **UBS Scan** (line 1146-1177) - Legacy path for backward compatibility  \n3. **Evaluation parsing** (line 1181-1211) - If evaluation arg provided\n4. **bd close** (line 1215-1224) - Actual bead closure\n5. **SubtaskOutcomeEvent** (line 1227-1252) - Learning system event\n6. **Memory storage** (line 1271-1297) - semantic-memory store\n\n## Reproduction\n1. Start a swarm subtask\n2. Call `swarm_complete()` with files_touched array\n3. Returns \"Error: Tool execution failed\" with no details\n\n## Expected Behavior\nShould return the actual error message with:\n- Which step failed (verification, UBS, bd close, etc.)\n- The specific error from that step\n- Recovery suggestions\n\n## Files\n- src/swarm-orchestrate.ts:1013-1505 (swarm_complete tool)\n- Possibly plugin.ts or index.ts error handling wrapper","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T15:18:39.249083-08:00","updated_at":"2025-12-15T07:15:29.023511-08:00","closed_at":"2025-12-15T07:15:29.023511-08:00"}
{"id":"opencode-swarm-plugin-wjd12","title":"Rename to Swarm Mail \u0026 Fix Critical Bugs","description":"Rename Agent Mail to Swarm Mail and fix 3 critical bugs: SQL injection, graceful degradation, reservation logic","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T09:29:16.765764-08:00","updated_at":"2025-12-13T09:34:05.586133-08:00","closed_at":"2025-12-13T09:34:05.586133-08:00"}
{"id":"opencode-swarm-plugin-wjd12.1","title":"Fix SQL injection in replayEvents with parameterized queries","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T09:29:16.829488-08:00","updated_at":"2025-12-13T09:33:55.847263-08:00","closed_at":"2025-12-13T09:33:55.847263-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-wjd12.1","depends_on_id":"opencode-swarm-plugin-wjd12","type":"parent-child","created_at":"2025-12-13T09:29:16.830674-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-wjd12.2","title":"Add graceful degradation for PGLite init failures","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T09:29:16.883469-08:00","updated_at":"2025-12-13T09:33:57.101719-08:00","closed_at":"2025-12-13T09:33:57.101719-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-wjd12.2","depends_on_id":"opencode-swarm-plugin-wjd12","type":"parent-child","created_at":"2025-12-13T09:29:16.884179-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-wjd12.3","title":"Fix reservation logic to reject on conflicts","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T09:29:16.938086-08:00","updated_at":"2025-12-13T09:33:58.571059-08:00","closed_at":"2025-12-13T09:33:58.571059-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-wjd12.3","depends_on_id":"opencode-swarm-plugin-wjd12","type":"parent-child","created_at":"2025-12-13T09:29:16.938837-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-wjd12.4","title":"Rename Agent Mail to Swarm Mail in docs and comments","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T09:29:16.988812-08:00","updated_at":"2025-12-13T09:33:59.84621-08:00","closed_at":"2025-12-13T09:33:59.84621-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-wjd12.4","depends_on_id":"opencode-swarm-plugin-wjd12","type":"parent-child","created_at":"2025-12-13T09:29:16.98978-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-wuhvb","title":"Add safety check to findBalancedBraces depth","description":"src/structured.ts:195-238 - findBalancedBraces has no max depth check. If depth goes negative or exceeds reasonable limit (e.g., 100), it could indicate malformed input. Add early return for depth \u0026lt; 0 or depth \u0026gt; 100.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:45.256712-08:00","updated_at":"2025-12-13T16:45:44.387924-08:00","closed_at":"2025-12-13T16:45:44.387924-08:00"}
{"id":"opencode-swarm-plugin-x3231","title":"Gap: No thread safety documentation for PGLite singleton","description":"src/streams/index.ts - No documentation on whether PGLite is thread-safe or if concurrent queries from multiple async operations are safe. Node.js is single-threaded but async operations can interleave. Should: document PGLite's concurrency model, test concurrent appendEvent calls, verify transaction isolation, add test for race conditions under load.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-13T09:25:42.564807-08:00","updated_at":"2025-12-13T16:41:58.684039-08:00","closed_at":"2025-12-13T16:41:58.684039-08:00"}
{"id":"opencode-swarm-plugin-xc4po","title":"Add JSDoc to DecomposedSubtask.risks field","description":"src/schemas/task.ts:38 - `risks` field lacks description. Add JSDoc: \"/** Potential risks or complications (e.g., 'tight coupling', 'data migration required') */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:22.374689-08:00","updated_at":"2025-12-13T16:45:48.108316-08:00","closed_at":"2025-12-13T16:45:48.108316-08:00"}
{"id":"opencode-swarm-plugin-xcavl","title":"Codebase Health: Split swarm.ts, fix bugs, add tests","description":"Critical improvements identified from analysis: split god module, fix data integrity bugs, add missing test coverage","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T16:57:57.93951-08:00","updated_at":"2025-12-13T17:21:15.826931-08:00","closed_at":"2025-12-13T17:21:15.826931-08:00"}
{"id":"opencode-swarm-plugin-xcavl.1","title":"Split swarm.ts: Extract swarm-strategies.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:57.99498-08:00","updated_at":"2025-12-13T17:21:12.619794-08:00","closed_at":"2025-12-13T17:21:12.619794-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.1","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:57.99606-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.2","title":"Split swarm.ts: Extract swarm-decompose.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:58.047931-08:00","updated_at":"2025-12-13T17:21:13.275233-08:00","closed_at":"2025-12-13T17:21:13.275233-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.2","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.048892-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.3","title":"Split swarm.ts: Extract swarm-prompts.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:58.105828-08:00","updated_at":"2025-12-13T17:21:13.835048-08:00","closed_at":"2025-12-13T17:21:13.835048-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.3","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.107241-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.4","title":"Split swarm.ts: Extract swarm-orchestrate.ts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:58.157999-08:00","updated_at":"2025-12-13T17:21:14.461773-08:00","closed_at":"2025-12-13T17:21:14.461773-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.4","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.159412-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.5","title":"Fix transaction rollback error propagation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:58.21724-08:00","updated_at":"2025-12-13T17:05:47.103573-08:00","closed_at":"2025-12-13T17:05:47.103573-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.5","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.218636-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.6","title":"Make file reservation idempotent with ON CONFLICT","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T16:57:58.269982-08:00","updated_at":"2025-12-13T17:05:47.675583-08:00","closed_at":"2025-12-13T17:05:47.675583-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.6","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.27125-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.7","title":"Add tests for structured.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T16:57:58.323033-08:00","updated_at":"2025-12-13T17:05:48.48549-08:00","closed_at":"2025-12-13T17:05:48.48549-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.7","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.324485-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.8","title":"Add tests for anti-patterns.ts","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T16:57:58.376043-08:00","updated_at":"2025-12-13T17:05:49.201843-08:00","closed_at":"2025-12-13T17:05:49.201843-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.8","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.377102-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xcavl.9","title":"Fix CI to run integration tests","description":"## Changes Made\n\nAdded integration test step to CI workflow (.github/workflows/ci.yml):\n\n**Before:**\n- Only ran unit tests (`bun run test`)\n\n**After:**\n- Runs unit tests (step: \"Run unit tests\")\n- Runs integration tests (step: \"Run integration tests\") with 10-minute timeout\n\n## Implementation Details\n\n1. **Single job approach:** Both unit and integration tests run in the same job sequentially\n2. **Timeout:** Integration tests have `timeout-minutes: 10` to prevent hanging\n3. **Fail fast:** If either test suite fails, the build fails (default behavior)\n4. **Verified:** \n   - 10 integration test files exist in src/\n   - `test:integration` script exists in package.json\n   - Script uses vitest with proper config (vitest.integration.config.ts)\n   - Tests run serially to avoid race conditions\n\n## Success Criteria Met\n- ✅ CI runs both unit and integration tests\n- ✅ Build fails if either test suite fails (continue-on-error is false by default)\n- ✅ Integration tests have reasonable timeout (10 min)\n\n## Workflow Structure\n```yaml\n- Run unit tests (bun run test)\n- Run integration tests (bun run test:integration, timeout: 10 min)\n```\n\nBoth steps must pass for CI to succeed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T16:57:58.429642-08:00","updated_at":"2025-12-13T17:05:49.697088-08:00","closed_at":"2025-12-13T17:05:49.697088-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-xcavl.9","depends_on_id":"opencode-swarm-plugin-xcavl","type":"parent-child","created_at":"2025-12-13T16:57:58.430689-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-xwlda","title":"Pattern: Socratic Planner - Transform Ideas into Executable Plans","description":"## Socratic Planner Pattern (from obra/superpowers)\n\nTwo-phase workflow that transforms rough ideas into executable implementation plans:\n\n### Phase 1: Brainstorming (Socratic Refinement)\n- **One question at a time** - Never overwhelm with multiple questions\n- **Multiple choice preferred** - Easier to answer than open-ended\n- **Project context first** - Check files/docs/commits before asking\n- **2-3 alternatives with trade-offs** - Lead with recommendation + reasoning\n- **Incremental validation (200-300 words)** - Present design in digestible sections\n- **YAGNI ruthlessly** - Remove unnecessary features\n\n### Phase 2: Writing Plans (Zero-Context Execution)\n- **Bite-sized tasks (2-5 min each)** - Each step is ONE action\n- **Zero context assumption** - Write for \"junior engineer with poor taste, no judgment, no project context\"\n- **Exact file paths always** - `src/auth/login.py:45-67` not \"update the auth flow\"\n- **Complete code in plans** - Don't say \"add validation\" - show the exact code\n- **DRY, YAGNI, TDD** - Enforce in every task\n- **Frequent commits** - Every task ends with a commit\n\n### Integration\nBrainstorming → Design Doc → Git Worktree → Writing Plans → Execution (subagent-driven OR batch)\n\n### Key Insight\nThe two-phase split serves context preservation: brainstorming keeps context lean (200-300 word checkpoints), plans are context-free and reusable across agents/sessions.\n\n**Full analysis:** docs/analysis-socratic-planner-pattern.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T14:00:08.183656-08:00","updated_at":"2025-12-13T15:50:52.088177-08:00","closed_at":"2025-12-13T15:50:52.088177-08:00"}
{"id":"opencode-swarm-plugin-xycu1","title":"Refactor swarm-mail to adapter pattern","description":"Refactor the moved code to use dependency injection instead of singleton.\n\n## Core Change\nFROM: Functions that call `getDatabase()` internally\nTO: Adapter class/factory that receives db as constructor param\n\n## Files to Refactor\n- packages/swarm-mail/src/adapter.ts - Main adapter factory\n- packages/swarm-mail/src/streams/store.ts - Remove getDatabase calls, accept db param\n- packages/swarm-mail/src/streams/projections.ts - Same\n- packages/swarm-mail/src/streams/agent-mail.ts - Same\n- packages/swarm-mail/src/streams/effect/*.ts - Same\n\n## Pattern\n```typescript\n// Before\nexport async function appendEvent(event: AgentEvent, projectPath?: string) {\n  const db = await getDatabase(projectPath);\n  // ...\n}\n\n// After\nexport function createSwarmMailAdapter(db: DatabaseAdapter): SwarmMailAdapter {\n  return {\n    async appendEvent(event: AgentEvent) {\n      // Use injected db directly\n      const result = await db.query(...);\n      // ...\n    }\n  }\n}\n```\n\n## Keep Backward Compat\nThe old function signatures should still work via convenience layer (next subtask).\n\n## Success Criteria\n- No direct `getDatabase()` calls in core adapter code\n- All functions receive db via closure from factory\n- Types align with SwarmMailAdapter interface","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T15:57:34.083722-08:00","updated_at":"2025-12-14T16:14:55.384057-08:00","closed_at":"2025-12-14T16:14:55.384057-08:00"}
{"id":"opencode-swarm-plugin-yi3ke","title":"Document warnMissingTool deduplication strategy","description":"src/tool-availability.ts:301-310 - warnMissingTool uses Set for deduplication but comment doesn't explain why. Add JSDoc: \"/** Logs warning once per tool per session. Uses Set to prevent spam when tool is checked repeatedly. */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:07:11.393397-08:00","updated_at":"2025-12-13T16:41:52.798405-08:00","closed_at":"2025-12-13T16:41:52.798405-08:00"}
{"id":"opencode-swarm-plugin-yn9e3","title":"Swarm-aware beads with durable recovery context","description":"## Problem\n\nSwarms die when context compacts. Coordinator state lives in ephemeral context - when OpenCode compacts or session ends, swarm recovery requires manual reconstruction.\n\n## Solution: Beads as Durable Swarm State\n\nExtend beads to carry swarm execution context that survives compaction:\n\n```typescript\ninterface SwarmBeadContext {\n  epic_id: string;\n  strategy: \"file-based\" | \"feature-based\" | \"risk-based\";\n  files: string[];           // Reserved files\n  dependencies: string[];    // Bead IDs this depends on\n  \n  // Directives for agent pickup\n  directives: {\n    shared_context: string;  // Synthesized knowledge\n    skills_to_load: string[];\n    coordinator_notes: string;\n  };\n  \n  // Recovery checkpoint\n  recovery: {\n    last_checkpoint: string; // ISO timestamp\n    files_modified: string[];\n    progress_percent: number;\n    last_message: string;\n    error_context?: string;  // If blocked/failed\n  };\n}\n```\n\n## Implementation\n\n1. **Store swarm context in PGlite** - New `swarm_beads` table linked to bead ID\n2. **Checkpoint on compaction** - Hook into OpenCode's compaction (if available) or periodic save\n3. **Recovery on session start** - `beads_ready()` returns swarm context, agent can resume\n4. **Event sourcing** - Use existing durable streams for swarm state changes\n\n## Integration Points\n\n- `beads_create_epic` - Initialize swarm context for epic + subtasks\n- `swarm_progress` - Update recovery checkpoint\n- `swarm_complete` - Finalize and archive swarm context\n- New: `swarm_recover(epic_id)` - Reconstruct coordinator state from PGlite\n\n## Benefits\n\n- Swarms survive context compaction\n- Any agent can pick up mid-flight work\n- Full audit trail via event sourcing\n- Enables \"swarm handoff\" between sessions\n\n## Related\n\n- PR #6: Durable Streams primitives (DurableCursor, DurableDeferred, etc.)\n- Kyle Mathews actor primitives analysis (bead gde33)\n- Existing swarm-mail coordination layer","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T09:16:47.670546-08:00","updated_at":"2025-12-14T09:42:33.092759-08:00","closed_at":"2025-12-14T09:42:33.092759-08:00"}
{"id":"opencode-swarm-plugin-yrcu","title":"Swarm Plugin Intelligence Upgrade","description":"Add learning and validation capabilities from cass-memory, ubs, and cass patterns: confidence decay, outcome scoring, anti-patterns, conflict detection, maturity tracking, UBS scanning, CASS history","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T07:37:04.64051-08:00","updated_at":"2025-12-08T07:47:04.718697-08:00","closed_at":"2025-12-08T07:47:04.718697-08:00"}
{"id":"opencode-swarm-plugin-yrcu.1","title":"Add confidence decay to evaluation criteria","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T07:37:04.680246-08:00","updated_at":"2025-12-08T07:39:13.801147-08:00","closed_at":"2025-12-08T07:39:13.801147-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.1","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.680563-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.2","title":"Add outcome recording for implicit feedback","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T07:37:04.715147-08:00","updated_at":"2025-12-08T07:40:29.238438-08:00","closed_at":"2025-12-08T07:40:29.238438-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.2","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.715452-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.3","title":"Add anti-pattern learning","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T07:37:04.748721-08:00","updated_at":"2025-12-08T07:41:44.626164-08:00","closed_at":"2025-12-08T07:41:44.626164-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.3","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.749052-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.4","title":"Add conflict detection for subtasks","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T07:37:04.78441-08:00","updated_at":"2025-12-08T07:44:34.394267-08:00","closed_at":"2025-12-08T07:44:34.394267-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.4","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.784758-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.5","title":"Add pattern maturity tracking","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T07:37:04.819413-08:00","updated_at":"2025-12-08T07:44:35.925234-08:00","closed_at":"2025-12-08T07:44:35.925234-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.5","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.819785-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.6","title":"Add UBS pre-completion scan","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T07:37:04.853068-08:00","updated_at":"2025-12-08T07:45:45.058166-08:00","closed_at":"2025-12-08T07:45:45.058166-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.6","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.853376-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-yrcu.7","title":"Add CASS history context","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T07:37:04.888083-08:00","updated_at":"2025-12-08T07:46:57.562984-08:00","closed_at":"2025-12-08T07:46:57.562984-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-yrcu.7","depends_on_id":"opencode-swarm-plugin-yrcu","type":"parent-child","created_at":"2025-12-08T07:37:04.888396-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-z4bmf","title":"Swarm-aware beads with durable recovery context","description":"Extend beads to carry swarm execution context that survives context compaction. When OpenCode compacts or session ends, swarms can recover coordinator state from durable storage.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T09:42:27.61346-08:00","updated_at":"2025-12-14T09:47:48.901952-08:00","closed_at":"2025-12-14T09:47:48.901952-08:00"}
{"id":"opencode-swarm-plugin-z4bmf.1","title":"Schema and migration for swarm_contexts table","description":"Completed: Added migration v4 for swarm_contexts table and SwarmBeadContext Zod schemas. Migration follows existing patterns (v1-v3) with proper indexes. Schemas exported from index.ts. All type checks passing.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-14T09:42:27.668076-08:00","updated_at":"2025-12-14T09:47:41.858044-08:00","closed_at":"2025-12-14T09:47:41.858044-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-z4bmf.1","depends_on_id":"opencode-swarm-plugin-z4bmf","type":"parent-child","created_at":"2025-12-14T09:42:27.668846-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-z4bmf.2","title":"Event types for swarm checkpoint and recovery","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:42:27.721299-08:00","updated_at":"2025-12-14T09:47:42.496735-08:00","closed_at":"2025-12-14T09:47:42.496735-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-z4bmf.2","depends_on_id":"opencode-swarm-plugin-z4bmf","type":"parent-child","created_at":"2025-12-14T09:42:27.722112-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-z4bmf.3","title":"swarm_checkpoint and swarm_recover tools","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:42:27.770156-08:00","updated_at":"2025-12-14T09:47:43.212016-08:00","closed_at":"2025-12-14T09:47:43.212016-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-z4bmf.3","depends_on_id":"opencode-swarm-plugin-z4bmf","type":"parent-child","created_at":"2025-12-14T09:42:27.770839-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-z4bmf.4","title":"Beads and prompts integration for recovery context","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T09:42:27.818298-08:00","updated_at":"2025-12-14T09:47:43.854612-08:00","closed_at":"2025-12-14T09:47:43.854612-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-z4bmf.4","depends_on_id":"opencode-swarm-plugin-z4bmf","type":"parent-child","created_at":"2025-12-14T09:42:27.819819-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-z8rkb","title":"Add validation for SpawnedAgent.agent_name format","description":"src/schemas/task.ts:81 - `agent_name` is plain string but Agent Mail uses specific format (e.g., \"BlueLake\"). Add regex validation or comment: \"/** Agent Mail name (e.g., 'BlueLake', 'CrimsonRiver') */\"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-10T09:06:30.499386-08:00","updated_at":"2025-12-13T16:45:50.112928-08:00","closed_at":"2025-12-13T16:45:50.112928-08:00"}
{"id":"opencode-swarm-plugin-zmzuw","title":"Gap: N+1 query in handleMessageSent","description":"src/streams/store.ts:360-395 - handleMessageSent() loops through recipients and inserts one-by-one with separate queries. For messages with many recipients, this is N+1 pattern. Should use bulk INSERT with VALUES (...), (...), (...) or INSERT ... SELECT. Similar issue in handleFileReserved (lines 398-416) which loops through paths.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T09:25:14.000433-08:00","updated_at":"2025-12-13T16:06:33.70323-08:00","closed_at":"2025-12-13T16:06:33.70323-08:00"}
{"id":"opencode-swarm-plugin-zn4of","title":"Review skill-builder PR branch","description":"Analyze skill-builder PR branch for errors, omissions, improvements, oversights, gaps, and ideas. READ-ONLY code review - no modifications.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-12T21:05:18.645731-08:00","updated_at":"2025-12-12T21:17:59.05899-08:00","closed_at":"2025-12-12T21:17:59.05899-08:00"}
{"id":"opencode-swarm-plugin-zn4of.1","title":"Review src/skills.ts core module","description":"READ-ONLY review of src/skills.ts (1356 lines). Analyzing: security (path traversal, script execution), bugs (__dirname in ES modules, iteration errors), missing features, code quality. Found critical __dirname bug and TypeScript config issue.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:05:18.691442-08:00","updated_at":"2025-12-12T21:08:55.61161-08:00","closed_at":"2025-12-12T21:08:55.61161-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-zn4of.1","depends_on_id":"opencode-swarm-plugin-zn4of","type":"parent-child","created_at":"2025-12-12T21:05:18.693109-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-zn4of.2","title":"Review global-skills definitions","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:05:18.739019-08:00","updated_at":"2025-12-12T21:07:06.557236-08:00","closed_at":"2025-12-12T21:07:06.557236-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-zn4of.2","depends_on_id":"opencode-swarm-plugin-zn4of","type":"parent-child","created_at":"2025-12-12T21:05:18.740085-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-zn4of.3","title":"Review TypeScript scripts","description":"Analyzing init-skill.ts and validate-skill.ts for type safety, error handling, and code quality issues","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:05:18.791905-08:00","updated_at":"2025-12-12T21:07:35.163562-08:00","closed_at":"2025-12-12T21:07:35.163562-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-zn4of.3","depends_on_id":"opencode-swarm-plugin-zn4of","type":"parent-child","created_at":"2025-12-12T21:05:18.793516-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-zn4of.4","title":"Review swarm/beads integration","description":"READ-ONLY review of swarm/beads integration for skills support. Analyzing: custom ID support (beads.ts +24 lines), skills integration (swarm.ts +286 lines), exports (index.ts +38 lines), schema changes (bead.ts). Found well-structured integration with one potential circular dependency concern in swarm_learn.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T21:05:18.841231-08:00","updated_at":"2025-12-12T21:17:57.068655-08:00","closed_at":"2025-12-12T21:17:57.068655-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-zn4of.4","depends_on_id":"opencode-swarm-plugin-zn4of","type":"parent-child","created_at":"2025-12-12T21:05:18.842555-08:00","created_by":"daemon"}]}
{"id":"opencode-swarm-plugin-zn4of.5","title":"Synthesize findings and recommendations","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T21:05:18.898997-08:00","updated_at":"2025-12-12T21:17:58.04489-08:00","closed_at":"2025-12-12T21:17:58.04489-08:00","dependencies":[{"issue_id":"opencode-swarm-plugin-zn4of.5","depends_on_id":"opencode-swarm-plugin-zn4of","type":"parent-child","created_at":"2025-12-12T21:05:18.900293-08:00","created_by":"daemon"}]}
